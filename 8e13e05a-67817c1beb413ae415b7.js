(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{kZZH:function(e,t,n){var o,i;n("xfY5"),n("Vd3H"),n("rGqo"),n("yt8O"),n("bHtr"),n("Oyvg"),n("Tze0"),n("pIFo"),n("V+eJ"),n("LK8F"),n("a1Th"),n("h7Nl"),n("Btvt"),n("KKXr"),n("f3/d"),i=this,void 0===(o=function(){return i.primitives=((e={common:{version:"5.8.2"},orgdiagram:{},famdiagram:{},text:{},callout:{},connector:{},shape:{},pdf:{orgdiagram:{},famdiagram:{}}}).common.getElementsByName=function(e,t,n,o){for(var i=t.getElementsByTagName("*"),a=0;a<i.length;a+=1){var r=i[a];r.name==n&&o.call(e,r)}},e.common.getFixOfPixelALignment=function(t){var n=t.getBoundingClientRect(),o=n.top+document.body.scrollTop,i=n.left+document.body.scrollLeft;return new e.common.Size(-i+Math.floor(i),-o+Math.floor(o))},e.common.getElementOffset=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.documentElement;return{top:t.top+window.pageYOffset-n.clientTop,left:t.left+window.pageXOffset-n.clientLeft}},e.common.hasClass=function(e,t){var n=e.className;if(null!=n&&"string"==typeof n)for(var o=n.split(" "),i=0;i<o.length;i+=1)if(o[i]==t)return!0;return!1},e.common.stopPropagation=function(e){void 0!==e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble?e.cancelBubble=!0:void 0!==e.preventDefault&&e.preventDefault()},e.common.getInnerSize=function(t){var n=window.getComputedStyle(t);return new e.common.Size(parseInt(n.width,10),parseInt(n.height,10))},e.common.isEven=function(e){return e%2==0},e.common.isNullOrEmpty=function(e){var t=!0;return null!=e&&e.toString().length>0&&(t=!1),t},e.common.isArray=Array.isArray||function(e){return e instanceof Array},e.common.loop=function(t,n,o){var i,a,r;if(null!=o)if(e.common.isArray(n))for(a=0,r=n.length;a<r&&!o.call(t,a,n[a]);a+=1);else for(i in n)if(n.hasOwnProperty(i)&&o.call(t,i,n[i]))break},e.common.splitCamelCaseName=function(e){for(var t=[],n="",o=0;o<e.length;o+=1){var i=e[o];i>="A"&&i<="Z"?(""!==n&&t.push(n),n=i):n+=i}return""!==n&&t.push(n),t},e.common.isObject=function(e){return null!==e&&"object"==typeof e},e.common.isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},e.common.cloneObject=function(t,n){var o;if(null===t)o=null;else if(t instanceof Array)if(n)o=t.slice(0);else{o=[];for(var i=0,a=t.length;i<a;i+=1)o.push(e.common.cloneObject(t[i],n))}else switch(typeof t){case"object":for(var r in o={},t)t.hasOwnProperty(r)&&(o[r]=n?t[r]:e.common.cloneObject(t[r],n));break;default:o=t}return o},e.common.mergeObjects=function(e,t){for(var n=1;n<arguments.length;n+=1){var o=arguments[n];if(null!=o)for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i])}return e},e.common.hashCode=function(e){var t,n=0;if(e.length>0)for(t=0;t<e.length;t+=1)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},e.common.indexOf=function(e,t,n){var o,i;for(o=0;o<e.length;o+=1)if(i=e[o],null!=n?n(i,t):i==t)return o;return-1},e.common._supportsSVG=null,e.common.supportsSVG=function(){return null===e.common._supportsSVG&&(e.common._supportsSVG=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.0")),e.common._supportsSVG},e.common._supportsCanvas=null,e.common.supportsCanvas=function(){return null===e.common._supportsCanvas&&(e.common._supportsCanvas=!!window.HTMLCanvasElement),e.common._supportsCanvas},e.common.createGraphics=function(t,n){var o,i,a,r=null;for(i in o=[t],e.common.GraphicsType)e.common.GraphicsType.hasOwnProperty(i)&&o.push(e.common.GraphicsType[i]);for(a=0;null===r&&a<o.length;a+=1)switch(o[a]){case 0:e.common.supportsSVG()&&(r=new e.common.SvgGraphics(n));break;case 1:e.common.supportsCanvas()&&(r=new e.common.CanvasGraphics(n))}return r},e.common.isChrome=function(){return null!=navigator&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},e.common.getColorHexValue=function(t){var n,o,i;if("#"===t.substr(0,1))return t;if(null!==(n=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(t))&&n.length>0)return o=(parseInt(n[2],10)<<16|parseInt(n[3],10)<<8|parseInt(n[4],10)).toString(16),n[1]+"000000".substr(0,6-o.length)+o;if(void 0===e.common.ColorHexs)for(i in e.common.ColorHexs={},e.common.Colors)e.common.Colors.hasOwnProperty(i)&&(e.common.ColorHexs[i.toUpperCase()]=e.common.Colors[i]);return e.common.ColorHexs[t.toUpperCase()]},e.common.getColorName=function(t){var n;if(t=e.common.getColorHexValue(t),void 0===e.common.ColorNames)for(n in e.common.ColorNames={},e.common.Colors)e.common.Colors.hasOwnProperty(n)&&(e.common.ColorNames[e.common.Colors[n]]=n);return e.common.ColorNames[t]},e.common.getRed=function(e){return"#"===e.substr(0,1)&&7===e.length?parseInt(e.substr(1,2),16):null},e.common.getGreen=function(e){return"#"===e.substr(0,1)&&7===e.length?parseInt(e.substr(3,2),16):null},e.common.getBlue=function(e){return"#"===e.substr(0,1)&&7===e.length?parseInt(e.substr(5,2),16):null},e.common.beforeOpacity=function(t,n){var o,i=e.common;return t=i.getColorHexValue(t),o=(Math.ceil((i.getRed(t)-255*(1-n))/n)<<16|Math.ceil((i.getGreen(t)-255*(1-n))/n)<<8|Math.ceil((i.getBlue(t)-255*(1-n))/n)).toString(16),"#"+"000000".substr(0,6-o.length)+o},e.common.highestContrast=function(t,n,o){var i=n,a=e.common,r=t+","+n+","+o;return void 0===a.highestContrasts&&(a.highestContrasts={}),a.highestContrasts.hasOwnProperty(r)?i=a.highestContrasts[r]:(a.luminosity(n,t)<a.luminosity(o,t)&&(i=o),a.highestContrasts[r]=i),i},e.common.luminosity=function(t,n){var o=e.common,i=o.getColorHexValue(t),a=o.getColorHexValue(n),r=.2126*Math.pow(o.getRed(i)/255,2.2)+.7152*Math.pow(o.getRed(i)/255,2.2)+.0722*Math.pow(o.getRed(i)/255,2.2),s=.2126*Math.pow(o.getRed(a)/255,2.2)+.7152*Math.pow(o.getRed(a)/255,2.2)+.0722*Math.pow(o.getRed(a)/255,2.2);return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)},e.common.compareArrays=function(e,t,n){var o,i,a,r,s=!0;if(e.length!=t.length)s=!1;else{for(r={},o=0,i=e.length;o<i;o+=1)a=null!=n?n(e[o]):e[o],r.hasOwnProperty(a)?r[a]+=1:r[a]=1;for(o=0,i=t.length;o<i;o+=1){if(a=null!=n?n(t[o]):t[o],!r.hasOwnProperty(a)){s=!1;break}if(r[a]-=1,r[a]<0){s=!1;break}}}return s},e.common.JsonML={},"undefined"!=typeof document&&function(e,t){"use strict";var n={accesskey:"accessKey",bgcolor:"bgColor",cellpadding:"cellPadding",cellspacing:"cellSpacing",checked:"defaultChecked",class:"className",colspan:"colSpan",contenteditable:"contentEditable",defaultchecked:"defaultChecked",for:"htmlFor",formnovalidate:"formNoValidate",hidefocus:"hideFocus",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",tabindex:"tabIndex",usemap:"useMap",willvalidate:"willValidate"},o={enctype:"encoding",onscroll:"DOMMouseScroll"},i={autocapitalize:1,autocomplete:1,autocorrect:1},a={async:1,autofocus:1,checked:1,defaultchecked:1,defer:1,disabled:1,formnovalidate:1,hidden:1,indeterminate:1,ismap:1,multiple:1,novalidate:1,readonly:1,required:1,spellcheck:1,willvalidate:1},r=/^[\r\n]+/,s=/[\r\n]+$/;function l(e){this.value=e}l.prototype.toString=function(){return this.value},e.raw=function(e){return new l(e)};var m=e.isRaw=function(e){return e instanceof l},c=Array.isArray||function(e){return e instanceof Array};function h(e){return"function"==typeof e}function u(e){switch(typeof e){case"object":return e?c(e)?2:m(e)?5:e instanceof Date?4:3:0;case"function":return 1;case"undefined":return 0;default:return 4}}var d=function(e){if(e){if("!"===e.charAt(0))return t.createComment("!"===e?"":e.substr(1)+" ")}else{if(t.createDocumentFragment)return t.createDocumentFragment();e=""}return"style"===e.toLowerCase()&&t.createStyleSheet?t.createStyleSheet():t.createElement(e)},g=function(e,t,n){switch("on"===t.substr(0,2)&&(t=t.substr(2)),typeof n){case"function":if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent&&0!==u(e[t]))e.attachEvent("on"+t,n);else{var o=e["on"+t]||e[t];e["on"+t]=e[t]=h(o)?function(e){return!1!==o.call(this,e)&&!1!==n.call(this,e)}:n}break;case"string":e["on"+t]=new Function("event",n)}},p=e.applyStyles=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e},f=function(e,r){if(r.name&&t.attachEvent&&!e.parentNode)try{var s=d("<"+e.tagName+' name="'+r.name+'">');e.tagName===s.tagName&&(e=s)}catch(T){}for(var l in r)if(r.hasOwnProperty(l)){var m=r[l],h=u(m);if(l)if(0===h&&(m="",h=4),"$"===(l=n[l.toLowerCase()]||l))m(e);else if("className"==l)if(c(m))for(var f=0;f<m.length;f+=1)e.className+=" "+m[f];else e.className+=" "+m;else"style"===l?0!==u(e.style.cssText)?"string"==typeof m?e.style.cssText=m:p(e,m):e.style=m:"on"===l.substr(0,2)?(g(e,l,m),(l=o[l])&&g(e,l,m)):i[l.toLowerCase()]||4===h&&"$"!==l.charAt(0)&&0===u(e[l])&&0===u(e[o[l]])?a[l.toLowerCase()]?m&&(e.setAttribute(l,l),(l=o[l])&&e.setAttribute(l,l)):(e.setAttribute(l,m),(l=o[l])&&e.setAttribute(l,m)):(e[l]=m,(l=o[l])&&(e[l]=m))}return e},T=e.appendDOM=function(e,n){if(n){var o=(e.tagName||"").toLowerCase();if(8===e.nodeType)3===n.nodeType&&(e.nodeValue+=n.nodeValue);else if("table"===o&&e.tBodies){if(!n.tagName){if(11===n.nodeType)for(;n.firstChild;)T(e,n.removeChild(n.firstChild));return}var i=n.tagName.toLowerCase();if(i&&"tbody"!==i&&"thead"!==i){var a=e.tBodies.length>0?e.tBodies[e.tBodies.length-1]:null;a||(a=d("th"===i?"thead":"tbody"),e.appendChild(a)),a.appendChild(n)}else!1!==e.canHaveChildren&&e.appendChild(n)}else if("style"===o&&t.createStyleSheet)e.cssText=n;else if(!1!==e.canHaveChildren)e.appendChild(n);else if("object"===o&&n.tagName&&"param"===n.tagName.toLowerCase()){try{e.appendChild(n)}catch(r){}try{e.object&&(e.object[n.name]=n.value)}catch(s){}}}},y=function(e){return!(!e||3!==e.nodeType||e.nodeValue&&/\S/.exec(e.nodeValue))},k=function(e,t){e&&3===e.nodeType&&t.exec(e.nodeValue)&&(e.nodeValue=e.nodeValue.replace(t,""))},v=function(e){if(e){for(;y(e.firstChild);)e.removeChild(e.firstChild);for(k(e.firstChild,r);y(e.lastChild);)e.removeChild(e.lastChild);k(e.lastChild,s)}},w=function(e){var t=d("div");if(t.innerHTML=""+e,v(t),1===t.childNodes.length)return t.firstChild;for(var n=d("");t.firstChild;)n.appendChild(t.firstChild);return n},C=function(e){return t.createTextNode("["+e+"]")};e.onerror=null;var b=e.patch=function(e,t,n){for(var o=1;o<t.length;o+=1)c(t[o])||"string"==typeof t[o]?T(e,P(t[o],n)):m(t[o])?T(e,w(t[o].value)):"object"==typeof t[o]&&null!==t[o]&&1===e.nodeType&&(e=f(e,t[o]));return e},P=e.toHTML=function(n,o){try{if(!n)return null;if("string"==typeof n)return t.createTextNode(n);if(m(n))return w(n.value);if(!c(n)||"string"!=typeof n[0])throw new SyntaxError("invalid JsonML");var i=n[0];if(!i){for(var a=d(""),r=1;r<n.length;r+=1)T(a,P(n[r],o));return v(a),1===a.childNodes.length?a.firstChild:a}if("style"===i.toLowerCase()&&t.createStyleSheet)return b(t.createStyleSheet(),n,o),null;var s=b(d(i),n,o);return v(s),s&&h(o)?o(s):s}catch(l){try{return(h(e.onerror)?e.onerror:C)(l,n,o)}catch(u){return t.createTextNode("["+u+"]")}}};e.toHTMLText=function(e,t){var n=P(e,t);if(n.outerHTML)return n.outerHTML;var o=d("div");o.appendChild(n);var i=o.innerHTML;return o.removeChild(n),i}}(e.common.JsonML,document),e.common.AdviserPlacementType={Auto:0,Left:2,Right:3},e.orgdiagram.AdviserPlacementType=e.common.AdviserPlacementType,e.common.AnnotationType={Connector:0,Shape:1,HighlightPath:2,Label:3,Background:4},e.common.ChildrenPlacementType={Auto:0,Vertical:1,Horizontal:2,Matrix:3},e.orgdiagram.ChildrenPlacementType=e.common.ChildrenPlacementType,e.common.Colors={AliceBlue:"#f0f8ff",AntiqueWhite:"#faebd7",Aqua:"#00ffff",Aquamarine:"#7fffd4",Azure:"#f0ffff",Beige:"#f5f5dc",Bisque:"#ffe4c4",Black:"#000000",BlanchedAlmond:"#ffebcd",Blue:"#0000ff",BlueViolet:"#8a2be2",Brown:"#a52a2a",BurlyWood:"#deb887",Bronze:"#cd7f32",CadetBlue:"#5f9ea0",ChartReuse:"#7fff00",Chocolate:"#d2691e",Coral:"#ff7f50",CornflowerBlue:"#6495ed",Cornsilk:"#fff8dc",Crimson:"#dc143c",Cyan:"#00ffff",DarkBlue:"#00008b",DarkCyan:"#008b8b",DarkGoldenrod:"#b8860b",DarkGray:"#a9a9a9",DarkGreen:"#006400",DarkKhaki:"#bdb76b",DarkMagenta:"#8b008b",DarkOliveGreen:"#556b2f",Darkorange:"#ff8c00",DarkOrchid:"#9932cc",DarkRed:"#8b0000",DarkSalmon:"#e9967a",DarkSeaGreen:"#8fbc8f",DarkSlateBlue:"#483d8b",DarkSlateGray:"#2f4f4f",DarkTurquoise:"#00ced1",DarkViolet:"#9400d3",DeepPink:"#ff1493",DeepSkyBlue:"#00bfff",DimGray:"#696969",DodgerBlue:"#1e90ff",FireBrick:"#b22222",FloralWhite:"#fffaf0",ForestGreen:"#228b22",Fuchsia:"#ff00ff",Gainsboro:"#dcdcdc",GhostWhite:"#f8f8ff",Gold:"#ffd700",Goldenrod:"#daa520",Gray:"#808080",Green:"#008000",GreenYellow:"#adff2f",Honeydew:"#f0fff0",Hotpink:"#ff69b4",IndianRed:"#cd5c5c",Indigo:"#4b0082",Ivory:"#fffff0",Khaki:"#f0e68c",Lavender:"#e6e6fa",LavenderBlush:"#fff0f5",Lawngreen:"#7cfc00",Lemonchiffon:"#fffacd",LightBlue:"#add8e6",LightCoral:"#f08080",LightCyan:"#e0ffff",LightGoldenrodYellow:"#fafad2",LightGray:"#d3d3d3",LightGreen:"#90ee90",LightPink:"#ffb6c1",LightSalmon:"#ffa07a",LightSeaGreen:"#20b2aa",LightSkyBlue:"#87cefa",LightSlateGray:"#778899",LightSteelBlue:"#b0c4de",LightYellow:"#ffffe0",Lime:"#00ff00",Limegreen:"#32cd32",Linen:"#faf0e6",Magenta:"#ff00ff",Maroon:"#800000",MediumAquamarine:"#66cdaa",MediumBlue:"#0000cd",MediumOrchid:"#ba55d3",MediumPurple:"#9370d8",MediumSeaGreen:"#3cb371",MediumSlateBlue:"#7b68ee",MediumSpringGreen:"#00fa9a",MediumTurquoise:"#48d1cc",MediumVioletRed:"#c71585",MidnightBlue:"#191970",MintCream:"#f5fffa",MistyRose:"#ffe4e1",Moccasin:"#ffe4b5",NavajoWhite:"#ffdead",Navy:"#000080",Oldlace:"#fdf5e6",Olive:"#808000",Olivedrab:"#6b8e23",Orange:"#ffa500",OrangeRed:"#ff4500",Orchid:"#da70d6",PaleGoldenRod:"#eee8aa",PaleGreen:"#98fb98",PaleTurquoise:"#afeeee",PaleVioletRed:"#d87093",Papayawhip:"#ffefd5",Peachpuff:"#ffdab9",Peru:"#cd853f",Pink:"#ffc0cb",Plum:"#dda0dd",PowderBlue:"#b0e0e6",Purple:"#800080",Red:"#ff0000",RosyBrown:"#bc8f8f",RoyalBlue:"#4169e1",SaddleBrown:"#8b4513",Salmon:"#fa8072",SandyBrown:"#f4a460",SeaGreen:"#2e8b57",Seashell:"#fff5ee",Sienna:"#a0522d",Silver:"#c0c0c0",SkyBlue:"#87ceeb",SlateBlue:"#6a5acd",SlateGray:"#708090",Snow:"#fffafa",SpringGreen:"#00ff7f",SteelBlue:"#4682b4",Tan:"#d2b48c",Teal:"#008080",Thistle:"#d8bfd8",Tomato:"#ff6347",Turquoise:"#40e0d0",Violet:"#ee82ee",Wheat:"#f5deb3",White:"#ffffff",WhiteSmoke:"#f5f5f5",Yellow:"#ffff00",YellowGreen:"#9acd32"},e.common.ConnectorLabelPlacementType={From:0,Between:1,To:2},e.common.ConnectorPlacementType={Offbeat:0,Straight:1},e.common.ConnectorShapeType={OneWay:0,TwoWay:1,BothWay:2},e.common.ConnectorStyleType={Extra:0,Regular:1,Highlight:2},e.common.ConnectorType={Squared:0,Angular:1,Curved:2},e.orgdiagram.ConnectorType=e.common.ConnectorType,e.common.ElbowType={None:0,Dot:1,Bevel:2,Round:3},e.common.Enabled={Auto:0,True:1,False:2},e.common.GraphicsType={SVG:0,Canvas:1},e.common.GroupByType={None:0,Parents:1,Children:2},e.common.HorizontalAlignmentType={Center:0,Left:1,Right:2},e.orgdiagram.ItemType={Regular:0,Adviser:2,Assistant:1,SubAssistant:4,SubAdviser:5,GeneralPartner:6,LimitedPartner:7,AdviserPartner:8},e.common.LabelType={Regular:0,Dummy:1,Fixed:2,None:3},e.common.Layers={BackgroundAnnotation:2,BackgroundAnnotations:3,BackgroundConnectorAnnotation:4,BackgroundHighlightPathAnnotations:5,Connector:6,ForegroundHighlightPathAnnotations:7,Highlight:8,Marker:9,Label:10,Cursor:11,Item:12,ForegroundAnnotations:13,ForegroundConnectorAnnotation:14,Annotation:15,Controls:16},e.common.LineType={Solid:0,Dotted:1,Dashed:2},e.common.LoopsLayoutMode={Optimized:0,KeepItemsOrder:1},e.common.NavigationMode={Default:0,CursorOnly:1,HighlightOnly:3,Inactive:2},e.common.NeighboursSelectionMode={ParentsAndChildren:0,ParentsChildrenSiblingsAndSpouses:1},e.common.OrientationType={Top:0,Bottom:1,Left:2,Right:3,None:4},e.orgdiagram.OrientationType=e.common.OrientationType,e.common.PageFitMode={None:0,PageWidth:1,PageHeight:2,FitToPage:3,AutoSize:5,SelectionOnly:6},e.orgdiagram.PageFitMode=e.common.PageFitMode,e.common.PlacementType={Auto:0,TopLeft:8,Top:1,TopRight:2,RightTop:11,Right:3,RightBottom:12,BottomRight:4,Bottom:5,BottomLeft:6,LeftBottom:10,Left:7,LeftTop:9},e.common.RenderingMode={Create:0,Update:1},e.common.SegmentType={Line:0,Move:1,QuadraticArc:2,CubicArc:3,Dot:4},e.common.SelectionPathMode={None:0,FullStack:1},e.orgdiagram.SelectionPathMode=e.common.SelectionPathMode,e.common.ShapeType={Rectangle:0,Oval:1,Triangle:2,CrossOut:3,Circle:4,Rhombus:5,Wedge:7,FramedOval:8,FramedTriangle:9,FramedWedge:10,FramedRhombus:11,None:6},e.common.SideFlag={Top:1,Right:2,Bottom:4,Left:8},e.text.TextOrientationType={Horizontal:0,RotateLeft:1,RotateRight:2,Auto:3},e.common.UpdateMode={Recreate:0,Refresh:1,PositonHighlight:2},e.orgdiagram.UpdateMode=e.common.UpdateMode,e.common.VectorRelationType={None:0,Null:1,Collinear:2,Opposite:3},e.common.VerticalAlignmentType={Top:0,Middle:1,Bottom:2},e.common.Visibility={Auto:0,Normal:1,Dot:2,Line:3,Invisible:4},e.common.ZOrderType={Auto:0,Background:1,Foreground:2},e.common.RenderEventArgs=function(){this.id=null,this.element=null,this.context=null,this.templateName=null,this.renderingMode=null,this.isCursor=!1,this.isSelected=!1},e.common.BaseShape=function(){},e.common.BaseShape.prototype._getLabelPosition=function(t,n,o,i,a,r,s,l){var m=null;switch(l){case 1:m=new e.common.Rect(t+o/2-a/2,n-s-r,a,r);break;case 2:m=new e.common.Rect(t+o-a,n-s-r,a,r);break;case 8:m=new e.common.Rect(t,n-s-r,a,r);break;case 3:m=new e.common.Rect(t+o+s,n+i/2-r/2,a,r);break;case 11:m=new e.common.Rect(t+o+s,n,a,r);break;case 12:m=new e.common.Rect(t+o+s,n+i-r,a,r);break;case 4:m=new e.common.Rect(t+o-a,n+i+s,a,r);break;case 6:m=new e.common.Rect(t,n+i+s,a,r);break;case 7:m=new e.common.Rect(t-a-s,n+i/2-r/2,a,r);break;case 9:m=new e.common.Rect(t-a-s,n,a,r);break;case 10:m=new e.common.Rect(t-a-s,n+i-r,a,r);break;case 0:case 5:default:m=new e.common.Rect(t+o/2-a/2,n+i+s,a,r)}return m},e.common.BaseShape.prototype._betweenPoint=function(t,n){return new e.common.Point((t.x+n.x)/2,(t.y+n.y)/2)},e.common.BaseShape.prototype._offsetPoint=function(t,n,o){var i=t.distanceTo(n);return 0===i||0===o?new e.common.Point(t):new e.common.Point(t.x+(n.x-t.x)/i*o,t.y+(n.y-t.y)/i*o)},e.common.Callout=function(e){this.m_graphics=e,this.pointerPlacement=0,this.cornerRadius="10%",this.offset=0,this.opacity=1,this.lineWidth=1,this.pointerWidth="10%",this.borderColor="#000000",this.lineType=0,this.fillColor="#d3d3d3",this.m_map=[[8,7,6],[1,null,5],[2,3,4]]},e.common.Callout.prototype=new e.common.BaseShape,e.common.Callout.prototype.draw=function(t,n){n=new e.common.Rect(n).offset(this.offset);var o,i,a,r,s,l,m,c=new e.common.Point(n.x,n.y),h=new e.common.Point(n.right(),n.y),u=new e.common.Point(n.right(),n.bottom()),d=[null,null,null,null,null,null,null,null],g=[c,h,u,new e.common.Point(n.left(),n.bottom())],p=this.m_graphics.getPxSize(this.cornerRadius,Math.min(c.distanceTo(h),h.distanceTo(u)));for(r={},null!==this.fillColor&&(r.fillColor=this.fillColor,r.opacity=this.opacity),null!==this.lineColor&&(r.lineColor=this.borderColor),r.lineWidth=this.lineWidth,r.lineType=this.lineType,s=new e.common.PaletteItem(r),m=(l=new e.common.PolylinesBuffer).getPolyline(s),null!==t&&null!==(o=0===this.pointerPlacement?this._getPlacement(t,c,u):this.pointerPlacement)&&(d[o]=t),a=0;a<g.length;a+=1)this._drawSegment(m,g[0],g[1],g[2],this.pointerWidth,p,d[1],d[2]),i=g.shift(),g.push(i),i=d.shift(),d.push(i),i=d.shift(),d.push(i);this.m_graphics.polylinesBuffer(l)},e.common.Callout.prototype._getPlacement=function(e,t,n){var o=null,i=null;return o=e.x<t.x?0:e.x>n.x?2:1,i=e.y<t.y?0:e.y>n.y?2:1,this.m_map[o][i]},e.common.Callout.prototype._drawSegment=function(t,n,o,i,a,r,s,l){var m,c,h,u=this._offsetPoint(n,o,r),d=this._offsetPoint(o,n,r),g=this._offsetPoint(o,i,r);a=this.m_graphics.getPxSize(a,n.distanceTo(o)/2),0===t.length()&&t.addSegment(new e.common.MoveSegment(u)),null!==s&&(m=this._betweenPoint(n,o),c=this._offsetPoint(m,n,a),h=this._offsetPoint(m,o,a),t.addSegment(new e.common.LineSegment(c)),t.addSegment(new e.common.LineSegment(s)),t.addSegment(new e.common.LineSegment(h))),t.addSegment(new e.common.LineSegment(d)),null!==l?(t.addSegment(new e.common.LineSegment(l)),t.addSegment(new e.common.LineSegment(g))):t.addSegment(new e.common.QuadraticArcSegment(o,g))},e.common.ConnectorOffbeat=function(){},e.common.ConnectorOffbeat.prototype=new e.common.BaseShape,e.common.ConnectorOffbeat.prototype.draw=function(t,n,o,i,a,r,s,l,m,c,h,u,d,g,p){var f,T,y,k,v,w,C,b,P,O,S,I,x,A=0,L=0,M=null;switch(I=t.getPolyline(n),b=[],m){case 1:b=[-a/2,a/2],x=!1;break;case 0:b=[0],x=!1;break;case 2:b=[0],x=!0}if(f=Math.max(u?s.width:0,5*a),o.right()+f<i.left()||o.left()>i.right()+f)if(o.left()>i.right()?(y=new e.common.Point(o.left(),o.verticalCenter()),k=new e.common.Point(i.right(),i.verticalCenter())):(y=new e.common.Point(o.right(),o.verticalCenter()),k=new e.common.Point(i.left(),i.verticalCenter())),u&&(o.left()>i.right()?(A=7,L=3):(A=3,L=7)),T=new e.common.Rect(y,k),S=y.y<=k.y,O=y.x<k.x,T.height<T.width){for(T.height<2*a&&T.offset(0,S?2*a:0,0,S?0:2*a),w=0,C=b.length;w<C;w+=1)P=b[w],t.addInverted((function(o){var i=o.getPolyline(n);i.addSegment(new e.common.MoveSegment(y.x,y.y+P)),i.addSegment(new e.common.QuadraticArcSegment(T.horizontalCenter(),(S?T.top():T.bottom())+P,k.x,k.y+P)),x&&i.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}))}),w||0==m),I.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}));u&&(v=s.width<T.width/5*2?e.common.QuadraticArcSegment.prototype.offsetPoint(y.x,y.y,T.horizontalCenter(),S?T.top():T.bottom(),k.x,k.y,.5):new e.common.Point(y.x,S?T.top():T.bottom()),M=new e.common.Rect(v.x+(O?a:-s.width-a),S?v.y-s.height-a:v.y+a,s.width,s.height))}else{for(w=0,C=b.length;w<C;w+=1)P=b[w],t.addInverted((function(o){var i=o.getPolyline(n);i.addSegment(new e.common.MoveSegment(y.x,y.y+P)),i.addSegment(new e.common.QuadraticArcSegment(T.horizontalCenter()+P*(S!=O?1:-1),(S?T.top():T.bottom())+P,T.horizontalCenter()+P*(S!=O?1:-1),T.verticalCenter()+P)),i.addSegment(new e.common.QuadraticArcSegment(T.horizontalCenter()+P*(S!=O?1:-1),(S?T.bottom():T.top())+P,k.x,k.y+P)),x&&i.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}))}),w||0==m),I.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}));u&&(M=new e.common.Rect(T.horizontalCenter()+(S!=O?a:-(a+s.width)),T.verticalCenter()-s.height/2,s.width,s.height))}else if(o.verticalCenter()<i.top()||o.verticalCenter()>i.bottom()){for(O=o.x<l.width/2,y=new e.common.Point(O?o.right():o.left(),o.verticalCenter()),k=new e.common.Point(O?i.right():i.left(),i.verticalCenter()),(T=new e.common.Rect(y,k)).offset(10*a,0,10*a,0),S=y.y<=k.y,w=0,C=b.length;w<C;w+=1)P=b[w],t.addInverted((function(o){var a=o.getPolyline(n);a.addSegment(new e.common.MoveSegment(y.x,y.y+P)),a.addSegment(new e.common.QuadraticArcSegment(O?T.right()+P*(S?-1:1):T.left()-P*(S?-1:1),T.verticalCenter(),O?i.right():i.left(),i.verticalCenter()-P)),x&&a.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}))}),w||0==m),I.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}));u&&(L=A=O?3:7,v=e.common.QuadraticArcSegment.prototype.offsetPoint(y.x,y.y,O?T.right():T.left(),T.verticalCenter(),k.x,k.y,.5),M=new e.common.Rect(v.x+(O?a/2:-a/2-s.width),v.y-s.height/2,s.width,s.height))}else{for(y=new e.common.Point(o.horizontalCenter(),o.top()),k=new e.common.Point(i.horizontalCenter(),i.top()),(T=new e.common.Rect(y,k)).offset(0,7*a,0,0),O=y.x<k.x,w=0,C=b.length;w<C;w+=1)P=b[w],t.addInverted((function(o){var a=o.getPolyline(n);a.addSegment(new e.common.MoveSegment(y.x+P,y.y)),a.addSegment(new e.common.QuadraticArcSegment(T.horizontalCenter(),T.top()-P*(O?-1:1),i.horizontalCenter()-P,i.top())),x&&a.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}))}),w||0==m),I.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}));u&&(A=1,L=1,v=e.common.QuadraticArcSegment.prototype.offsetPoint(y.x,y.y,T.horizontalCenter(),T.top(),k.x,k.y,.5),M=new e.common.Rect(v.x-s.width/2,v.y-(c+s.height),s.width,s.height))}if(u)switch(h){case 0:M=this._getLabelPosition(o.x,o.y,o.width,o.height,M.width,M.height,c,A);break;case 2:M=this._getLabelPosition(i.x,i.y,i.width,i.height,M.width,M.height,c,L)}null!=g&&g(M,p)},e.common.ConnectorStraight=function(){},e.common.ConnectorStraight.prototype=new e.common.BaseShape,e.common.ConnectorStraight.prototype.draw=function(t,n,o,i,a,r,s,l,m,c,h,u,d,g,p){var f,T,y,k,v,w=a/2,C=null,b=0,P=0,O=this;if(k=new e.common.Vector(o.centerPoint(),i.centerPoint()),o.loopEdges((function(e,t){return f=e.getIntersectionPoint(k,!0,1),b=t,null!=f})),i.loopEdges((function(e,t){return T=e.getIntersectionPoint(k,!0,1),P=t,null!=T})),null!=f&&null!=T){var S=new e.common.Vector(f,T);d.getOffset(S,(function(o,i,a){var l=(o*r-(i-1)*r/2)*a;switch(S.offset(l),f=S.from,T=S.to,m){case 1:(v=new e.common.Vector(T.clone(),f.clone())).offset(w),O._drawLine(t,n,v.from,v.to,!1),(v=new e.common.Vector(f.clone(),T.clone())).offset(w),O._drawLine(t,n,v.from,v.to,!1);break;case 0:O._drawLine(t,n,f,T,!1);break;case 2:O._drawLine(t,n,f,T,!0)}if(u){switch(h){case 0:C=O._getLabelPositionBySnapPoint(f.x,f.y,s.width,s.height,c,b);break;case 1:y=O._betweenPoint(f,T),C=O._getLabelPositionBySnapPoint(y.x,y.y,s.width,s.height,c,3);break;case 2:C=O._getLabelPositionBySnapPoint(T.x,T.y,s.width,s.height,c,P)}null!=g&&g.call(this,C,p)}}))}},e.common.ConnectorStraight.prototype._drawLine=function(t,n,o,i,a){var r;t.addInverted((function(a){(r=a.getPolyline(n)).addSegment(new e.common.MoveSegment(o)),r.addSegment(new e.common.LineSegment(i)),r.addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}))}),!1),a&&(r=t.getPolyline(n)).addArrow(n.lineWidth,(function(e){e.mergeTo(t.getPolyline(e.paletteItem))}))},e.common.ConnectorStraight.prototype._getLabelPositionBySnapPoint=function(t,n,o,i,a,r){var s=null;switch(r){case 0:case 1:s=new e.common.Rect(t-o/2,n-a-i,o,i);break;case 3:s=new e.common.Rect(t+a,n-i/2,o,i);break;case 5:s=new e.common.Rect(t-o/2,n+a,o,i);break;case 7:s=new e.common.Rect(t-o-a,n-i/2,o,i)}return s},e.common.Marker=function(){},e.common.Marker.Markers={},e.common.Marker.DrawCircle=function(t,n){var o=Math.min(n.width/2,n.height/2);n=new e.common.Rect(n.horizontalCenter()-o,n.verticalCenter()-o,2*o,2*o),e.common.Marker.DrawOval(t,n)},e.common.Marker.DrawRectangle=function(t,n){t.addSegment(new e.common.MoveSegment(n.x,n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.x,n.y)),t.addSegment(new e.common.LineSegment(n.right(),n.y)),t.addSegment(new e.common.LineSegment(n.right(),n.bottom())),t.addSegment(new e.common.LineSegment(n.x,n.bottom())),t.addSegment(new e.common.LineSegment(n.x,n.verticalCenter()))},e.common.Marker.DrawOval=function(t,n){var o,i;o=n.width/2*.5522848,i=n.height/2*.5522848,t.addSegment(new e.common.MoveSegment(n.x,n.verticalCenter())),t.addSegment(new e.common.CubicArcSegment(n.x,n.verticalCenter()-i,n.horizontalCenter()-o,n.y,n.horizontalCenter(),n.y)),t.addSegment(new e.common.CubicArcSegment(n.horizontalCenter()+o,n.y,n.right(),n.verticalCenter()-i,n.right(),n.verticalCenter())),t.addSegment(new e.common.CubicArcSegment(n.right(),n.verticalCenter()+i,n.horizontalCenter()+o,n.bottom(),n.horizontalCenter(),n.bottom())),t.addSegment(new e.common.CubicArcSegment(n.horizontalCenter()-o,n.bottom(),n.x,n.verticalCenter()+i,n.x,n.verticalCenter()))},e.common.Marker.DrawTriangle=function(t,n){t.addSegment(new e.common.MoveSegment(n.left(),n.bottom())),t.addSegment(new e.common.LineSegment(n.horizontalCenter(),n.y)),t.addSegment(new e.common.LineSegment(n.right(),n.bottom())),t.addSegment(new e.common.LineSegment(n.left(),n.bottom()))},e.common.Marker.DrawCrossOut=function(t,n){t.addSegment(new e.common.MoveSegment(n.horizontalCenter(),n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.x,n.y)),t.addSegment(new e.common.MoveSegment(n.horizontalCenter(),n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.right(),n.bottom())),t.addSegment(new e.common.MoveSegment(n.horizontalCenter(),n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.right(),n.y)),t.addSegment(new e.common.MoveSegment(n.horizontalCenter(),n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.left(),n.bottom()))},e.common.Marker.DrawRhombus=function(t,n){t.addSegment(new e.common.MoveSegment(n.horizontalCenter(),n.bottom())),t.addSegment(new e.common.LineSegment(n.left(),n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.horizontalCenter(),n.y)),t.addSegment(new e.common.LineSegment(n.right(),n.verticalCenter())),t.addSegment(new e.common.LineSegment(n.horizontalCenter(),n.bottom()))},e.common.Marker.DrawWedge=function(t,n){t.addSegment(new e.common.MoveSegment(n.horizontalCenter(),n.y)),t.addSegment(new e.common.LineSegment(n.right(),n.y)),t.addSegment(new e.common.LineSegment(n.horizontalCenter(),n.bottom())),t.addSegment(new e.common.LineSegment(n.left(),n.y)),t.addSegment(new e.common.LineSegment(n.horizontalCenter(),n.y))},e.common.Marker.DrawFramedOval=function(t,n){e.common.Marker.DrawRectangle(t,n),e.common.Marker.DrawOval(t,n)},e.common.Marker.DrawFramedTriangle=function(t,n){e.common.Marker.DrawRectangle(t,n),e.common.Marker.DrawTriangle(t,n)},e.common.Marker.DrawFramedWedge=function(t,n){e.common.Marker.DrawRectangle(t,n),e.common.Marker.DrawWedge(t,n)},e.common.Marker.DrawFramedRhombus=function(t,n){e.common.Marker.DrawRectangle(t,n),e.common.Marker.DrawRhombus(t,n)},e.common.Marker.DrawNone=function(e,t){},e.common.Marker.Markers[4]=e.common.Marker.DrawCircle,e.common.Marker.Markers[0]=e.common.Marker.DrawRectangle,e.common.Marker.Markers[1]=e.common.Marker.DrawOval,e.common.Marker.Markers[2]=e.common.Marker.DrawTriangle,e.common.Marker.Markers[3]=e.common.Marker.DrawCrossOut,e.common.Marker.Markers[5]=e.common.Marker.DrawRhombus,e.common.Marker.Markers[7]=e.common.Marker.DrawWedge,e.common.Marker.Markers[8]=e.common.Marker.DrawFramedOval,e.common.Marker.Markers[9]=e.common.Marker.DrawFramedTriangle,e.common.Marker.Markers[10]=e.common.Marker.DrawFramedWedge,e.common.Marker.Markers[11]=e.common.Marker.DrawFramedRhombus,e.common.Marker.Markers[6]=e.common.Marker.DrawNone,e.common.Marker.prototype.draw=function(t,n,o,i){var a;a=t.getPolyline(i),e.common.Marker.Markers[n](a,o)},e.common.MergedRectangles=function(e){this.graphics=e,this.transform=null,this.lineWidth=1,this.opacity=1,this.fillColor=null,this.lineType=0,this.borderColor=null},e.common.MergedRectangles.prototype=new e.common.BaseShape,e.common.MergedRectangles.prototype.draw=function(t){var n=new e.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,fillColor:this.fillColor,lineType:this.lineType,opacity:this.opacity}),o=new e.common.Polyline(n);this.lineWidth,e.common.getMergedRectangles(this,t,(function(t){for(var n=0,i=t.length;n<i;n+=1){var a=t[n];0==n?o.addSegment(new e.common.MoveSegment(a.x,a.y)):o.addSegment(new e.common.LineSegment(a.x,a.y))}})),o.transform(this.transform,!0),this.graphics.polyline(o)},e.common.Shape=function(t){this.m_graphics=t,this.transform=null,this.orientationType=0,this.panelSize=null,this.shapeType=0,this.offset=new e.common.Thickness(0,0,0,0),this.lineWidth=1,this.labelOffset=4,this.cornerRadius="10%",this.opacity=1,this.fillColor=null,this.labelSize=new e.common.Size(60,30),this.lineType=0,this.borderColor=null,this.hasLabel=!1,this.labelTemplate=null,this.labelPlacement=0},e.common.Shape.prototype=new e.common.BaseShape,e.common.Shape.prototype.draw=function(t,n){var o,i,a,r,s;switch(t=new e.common.Rect(t).offset(this.offset),this.transform=new e.common.Transform,this.transform.size=this.panelSize,this.transform.setOrientation(this.orientationType),this.hasLabel&&(o=this._getLabelPosition(t.x,t.y,t.width,t.height,this.labelSize.width,this.labelSize.height,this.labelOffset,this.labelPlacement)),this.shapeType){case 0:(i=new e.common.Callout(this.m_graphics)).cornerRadius=this.cornerRadius,i.opacity=this.opacity,i.lineWidth=this.lineWidth,i.lineType=this.lineType,i.borderColor=this.borderColor,i.fillColor=this.fillColor,i.draw(null,t);break;default:a=new e.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,lineType:this.lineType,fillColor:this.fillColor,opacity:this.opacity}),this.transform.transformRect(t.x,t.y,t.width,t.height,!1,this,(function(n,o,i,a){t=new e.common.Rect(n,o,i,a)})),s=new e.common.Marker,r=new e.common.PolylinesBuffer,s.draw(r,this.shapeType,t,a),r.transform(this.transform,!0),this.m_graphics.polylinesBuffer(r)}this.hasLabel&&this.m_graphics.template(o.x,o.y,0,0,0,0,o.width,o.height,this.labelTemplate.template(),this.labelTemplate.getHashCode(),this.labelTemplate.render,n,null)},e.common.Point=function(e,t){switch(this.x=null,this.y=null,this.context=null,arguments.length){case 1:this.x=e.x,this.y=e.y,this.context=e.context;break;case 2:this.x=e,this.y=t}},e.common.Point.prototype.scale=function(e){return this.x=this.x*e,this.y=this.y*e,this},e.common.Point.prototype.distanceTo=function(e,t){var n,o,i=0,a=0;switch(arguments.length){case 1:i=e.x,a=e.y;break;case 2:i=e,a=t}return n=this.x-i,o=this.y-a,Math.sqrt(n*n+o*o)},e.common.Point.prototype.equalTo=function(e){return this.x==e.x&&this.y==e.y},e.common.Point.prototype.swap=function(e){var t=e.x,n=e.y;e.x=this.x,e.y=this.y,this.x=t,this.y=n},e.common.Point.prototype.clone=function(){return new e.common.Point(this)},e.common.Point.prototype.toString=function(e){var t="";return e=void 0!==e?e:"px",t+="left:"+this.x+e+";",t+="top:"+this.y+e+";"},e.common.Point.prototype.getCSS=function(e){return e=void 0!==e?e:"px",{left:this.x+e,top:this.y+e}},e.common.Rect=function(e,t,n,o){switch(this.x=null,this.y=null,this.width=null,this.height=null,this.context=null,arguments.length){case 1:this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height;break;case 2:this.x=Math.min(e.x,t.x),this.y=Math.min(e.y,t.y),this.width=Math.abs(t.x-e.x),this.height=Math.abs(t.y-e.y);break;case 4:this.x=e,this.y=t,this.width=n,this.height=o}},e.common.Rect.prototype.left=function(){return this.x},e.common.Rect.prototype.top=function(){return this.y},e.common.Rect.prototype.right=function(){return this.x+this.width},e.common.Rect.prototype.bottom=function(){return this.y+this.height},e.common.Rect.prototype.verticalCenter=function(){return this.y+this.height/2},e.common.Rect.prototype.horizontalCenter=function(){return this.x+this.width/2},e.common.Rect.prototype.centerPoint=function(){return new e.common.Point(this.horizontalCenter(),this.verticalCenter())},e.common.Rect.prototype.isEmpty=function(){return null===this.x||null===this.y||null===this.width||null===this.height||this.width<0||this.height<0},e.common.Rect.prototype.offset=function(e,t,n,o){switch(arguments.length){case 1:null!==e&&"object"==typeof e?(this.x=this.x-e.left,this.y=this.y-e.top,this.width=this.width+e.left+e.right,this.height=this.height+e.top+e.bottom):(this.x=this.x-e,this.y=this.y-e,this.width=this.width+2*e,this.height=this.height+2*e);break;case 4:this.x=this.x-e,this.y=this.y-t,this.width=this.width+e+n,this.height=this.height+t+o}return this},e.common.Rect.prototype.scale=function(e){return this.x=this.x*e,this.y=this.y*e,this.width=this.width*e,this.height=this.height*e,this},e.common.Rect.prototype.translate=function(e,t){return this.x=this.x+e,this.y=this.y+t,this},e.common.Rect.prototype.invert=function(){var e=this.width,t=this.x;return this.width=this.height,this.height=e,this.x=this.y,this.y=t,this},e.common.Rect.prototype.loopEdges=function(t){var n=[new e.common.Point(this.left(),this.top()),new e.common.Point(this.right(),this.top()),new e.common.Point(this.right(),this.bottom()),new e.common.Point(this.left(),this.bottom())],o=[1,3,5,7];if(n.push(n[0]),null!=t)for(var i=1,a=n.length;i<a&&!t(new e.common.Vector(n[i-1],n[i]),o[i-1]);i+=1);return this},e.common.Rect.prototype.contains=function(e,t){switch(arguments.length){case 1:return this.x<=e.x&&e.x<=this.x+this.width&&this.y<=e.y&&e.y<=this.y+this.height;case 2:return this.x<=e&&e<=this.x+this.width&&this.y<=t&&t<=this.y+this.height;default:return!1}},e.common.Rect.prototype.cropByRect=function(e){return this.x<e.x&&(this.width-=e.x-this.x,this.x=e.x),this.right()>e.right()&&(this.width-=this.right()-e.right()),this.y<e.y&&(this.height-=e.y-this.y,this.y=e.y),this.bottom()>e.bottom()&&(this.height-=this.bottom()-e.bottom()),this.isEmpty()&&(this.x=null,this.y=null,this.width=null,this.height=null),this},e.common.Rect.prototype.overlaps=function(e){var t=!0;return(this.x+this.width<e.x||e.x+e.width<this.x||this.y+this.height<e.y||e.y+e.height<this.y)&&(t=!1),t},e.common.Rect.prototype.addRect=function(e,t,n,o){var i,a;switch(arguments.length){case 1:e.isEmpty()||(this.isEmpty()?(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):(i=Math.max(this.right(),e.right()),a=Math.max(this.bottom(),e.bottom()),this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.width=i-this.x,this.height=a-this.y));break;case 2:this.isEmpty()?(this.x=e,this.y=t,this.width=0,this.height=0):(i=Math.max(this.right(),e),a=Math.max(this.bottom(),t),this.x=Math.min(this.x,e),this.y=Math.min(this.y,t),this.width=i-this.x,this.height=a-this.y);break;case 4:this.isEmpty()?(this.x=e,this.y=t,this.width=n,this.height=o):(i=Math.max(this.right(),e+n),a=Math.max(this.bottom(),t+o),this.x=Math.min(this.x,e),this.y=Math.min(this.y,t),this.width=i-this.x,this.height=a-this.y)}return this},e.common.Rect.prototype.getCSS=function(e){return e=void 0!==e?e:"px",{left:this.x+e,top:this.y+e,width:this.width+e,height:this.height+e}},e.common.Rect.prototype.toString=function(e){var t="";return e=void 0!==e?e:"px",t+="left:"+this.x+e+";",t+="top:"+this.y+e+";",t+="width:"+this.width+e+";",t+="height:"+this.height+e+";"},e.common.Rect.prototype.validate=function(){if(isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height))throw"Invalid rect position."},e.common.Rect.prototype.equalTo=function(e){return this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height},e.common.MoveSegment=function(){this.parent=e.common.Point.prototype,this.parent.constructor.apply(this,arguments),this.segmentType=1},e.common.MoveSegment.prototype=new e.common.Point,e.common.MoveSegment.prototype.clone=function(){return new e.common.MoveSegment(this)},e.common.MoveSegment.prototype.loop=function(e,t){null!=t&&t.call(e,this.x,this.y,0)},e.common.MoveSegment.prototype.setPoint=function(e,t){this.x=e.x,this.y=e.y},e.common.MoveSegment.prototype.getEndPoint=function(){return this},e.common.MoveSegment.prototype.invert=function(e){this.x=e.x,this.y=e.y},e.common.MoveSegment.prototype.transform=function(e,t){var n=this;e.transformPoint(n.x,n.y,t,n,(function(e,t){n.x=e,n.y=t}))},e.common.CubicArcSegment=function(t,n,o,i,a,r){switch(this.parent=e.common.Point.prototype,this.x=null,this.y=null,this.cpX1=null,this.cpY1=null,this.cpX2=null,this.cpY2=null,arguments.length){case 3:this.parent.constructor.apply(this,[o.x,o.y]),this.cpX1=t.x,this.cpY1=t.y,this.cpX2=n.x,this.cpY2=n.y;break;case 6:this.parent.constructor.apply(this,[a,r]),this.cpX1=t,this.cpY1=n,this.cpX2=o,this.cpY2=i}this.segmentType=3},e.common.CubicArcSegment.prototype=new e.common.Point,e.common.CubicArcSegment.prototype.clone=function(){return new e.common.CubicArcSegment(this.cpX1,this.cpY1,this.cpX2,this.cpY2,this.x,this.y)},e.common.CubicArcSegment.prototype.loop=function(e,t){null!=t&&(t.call(e,this.cpX1,this.cpY1,0),t.call(e,this.cpX2,this.cpY2,1),t.call(e,this.x,this.y,2))},e.common.CubicArcSegment.prototype.setPoint=function(e,t){switch(t){case 0:this.cpX1=e.x,this.cpY1=e.y;break;case 1:this.cpX2=e.x,this.cpY2=e.y;break;case 2:this.x=e.x,this.y=e.y}},e.common.CubicArcSegment.prototype.getEndPoint=function(){return this},e.common.CubicArcSegment.prototype.invert=function(e){var t=this.cpX1,n=this.cpY1;this.x=e.x,this.y=e.y,this.cpX1=this.cpX2,this.cpY1=this.cpY2,this.cpX2=t,this.cpY2=n},e.common.CubicArcSegment.prototype.transform=function(e,t){var n=this;e.transform3Points(n.x,n.y,n.cpX1,n.cpY1,n.cpX2,n.cpY2,t,n,(function(e,t,o,i,a,r){n.x=e,n.y=t,n.cpX1=o,n.cpY1=i,n.cpX2=a,n.cpY2=r}))},e.common.CubicArcSegment.prototype.trim=function(e,t){var n=.5,o=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,e.x,e.y,n),i=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,e.x,e.y,.1);return n=t*(n/o.distanceTo(this.x,this.y)+.1/i.distanceTo(this.x,this.y))/2,o=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,e.x,e.y,n),this.x=o.x,this.y=o.y,this},e.common.CubicArcSegment.prototype.offsetPoint=function(t,n,o,i,a,r,s,l,m){return new e.common.Point((1-m)*(1-m)*(1-m)*t+3*(1-m)*(1-m)*m*o+3*(1-m)*m*m*a+m*m*m*s,(1-m)*(1-m)*(1-m)*n+3*(1-m)*(1-m)*m*i+3*(1-m)*m*m*r+m*m*m*l)},e.common.DotSegment=function(e,t,n,o,i){this.segmentType=4,this.x=e,this.y=t,this.width=n,this.height=o,this.cornerRadius=i},e.common.Label=function(){this.text=null,this.position=null,this.weight=0,this.isActive=!0,this.labelType=0,this.labelOrientation=0,this.horizontalAlignmentType=0,this.verticalAlignmentType=2,this.parent=e.common.Rect.prototype,this.parent.constructor.apply(this,arguments)},e.common.Label.prototype=new e.common.Rect,e.common.LineSegment=function(){this.parent=e.common.MoveSegment.prototype,this.parent.constructor.apply(this,arguments),this.segmentType=0},e.common.LineSegment.prototype=new e.common.MoveSegment,e.common.LineSegment.prototype.clone=function(){return new e.common.LineSegment(this)},e.common.LineSegment.prototype.trim=function(e,t){var n=this.offsetPoint(this,e,t);return this.x=n.x,this.y=n.y,this},e.common.LineSegment.prototype.offsetPoint=function(t,n,o){var i=t.distanceTo(n);return 0===i||0===o?new e.common.Point(t):new e.common.Point(t.x+(n.x-t.x)/i*o,t.y+(n.y-t.y)/i*o)},e.common.Matrix=function(e,t,n,o){switch(this.a1=null,this.b1=null,this.a2=null,this.b2=null,arguments.length){case 1:this.a1=e.a1,this.b1=e.b1,this.a2=e.a2,this.b2=e.b2;break;case 4:this.a1=e,this.b1=t,this.a2=n,this.b2=o}},e.common.Matrix.prototype.determinant=function(){return this.a1*this.b2-this.b1*this.a2},e.common.PaletteItem=function(t){var n,o,i,a;for(this.lineColor="#c0c0c0",this.lineWidth=1,this.lineType=0,this.fillColor=null,this.opacity=null,this._key="",i=0,a=(o=["lineColor","lineWidth","lineType","fillColor","opacity"]).length;i<a;i+=1)n=o[i],null!=t&&t.hasOwnProperty(n)&&(this[n]=t[n]),this._key+=(e.common.isNullOrEmpty(this._key)?"":", ")+n+":"+this[n]},e.common.PaletteItem.prototype.toAttr=function(){var e={lineWidth:this.lineWidth,lineType:this.lineType};return null!==this.fillColor&&(e.fillColor=this.fillColor),null!==this.opacity&&(e.opacity=this.opacity),null!==this.lineColor&&(e.borderColor=this.lineColor),e},e.common.PaletteItem.prototype.toString=function(){return this._key},e.common.PaletteManager=function(t,n){var o,i;if(this.palette=[],this.cursor=0,0===n.length)this.palette=[new e.common.PaletteItem({lineColor:t.linesColor,lineWidth:t.linesWidth,lineType:t.linesType})],this.paletteLength=this.palette.length,this.regularIndex=0;else{for(o=0,i=n.length;o<i;o+=1)this.palette.push(new e.common.PaletteItem(n[o]));this.paletteLength=this.palette.length,this.palette.push(new e.common.PaletteItem({lineColor:t.linesColor,lineWidth:t.linesWidth,lineType:t.linesType})),this.regularIndex=this.palette.length-1}this.palette.push(new e.common.PaletteItem({lineColor:t.highlightLinesColor,lineWidth:t.highlightLinesWidth,lineType:t.highlightLinesType})),this.highlightIndex=this.palette.length-1},e.common.PaletteManager.prototype.selectPalette=function(e){this.cursor=e%this.paletteLength},e.common.PaletteManager.prototype.getPalette=function(e){var t=null;switch(e){case 1:t=this.regularIndex;break;case 2:t=this.highlightIndex;break;case 0:t=this.cursor}return this.palette[t]},e.common.Polyline=function(t){var n,o,i=new e.common.PaletteItem,a=[];switch(arguments.length){case 1:i=t}function r(){var e=null;return a.length>0&&(e=a[0].getEndPoint()),e}function s(){var e=null;return a.length>0&&(e=a[a.length-1].getEndPoint()),e}function l(e){a.push(e)}function m(e){var t,n;for(t=0,n=e.length;t<n;t+=1)a.push(e[t])}function c(e){e.addSegments(a)}function h(){var t,n,o,r=new e.common.Polyline(i),s=[];for(t=0,n=a.length;t<n;t+=1)o=a[t],s.push(o.clone());return r.addSegments(s),r}function u(){return a.length}function d(e,t){var n,o,i;if(null!=t)for(n=0,o=a.length;n<o&&(!(i=a[n])||!t.call(e,i,n));n+=1);}function g(e,t){var n,o;if(null!=t)for(n=a.length-1;n>=0&&(!(o=a[n])||!t.call(e,o,n));n-=1);}function p(e,t){d(this,(function(n){null!=n.transform&&n.transform(e,t)}))}function f(){return e.common.isNullOrEmpty(i.fillColor)}function T(t){var o=!1,i=[];f()?t.loopReversed(this,(function(t,n){4!=t.segmentType&&(o||(a.push(new e.common.MoveSegment(t.getEndPoint())),o=!0),i.unshift(t),i.length>1&&(i[1].invert(i[0].getEndPoint()),a.push(i[1]),i.length=1))})):t.mergeTo(n)}function y(t,n,i,a,r,s){var l,m,c,h,u,d=new e.common.Polyline(o),g=[new e.common.Point(r,-s/2),new e.common.Point(0,0),new e.common.Point(r,s/2),new e.common.Point(r/4*3,0)],p=Math.atan2(n-a,t-i);for(l=0,m=g.length;l<m;l+=1)h=(c=g[l]).x*Math.cos(p)-c.y*Math.sin(p),u=c.x*Math.sin(p)+c.y*Math.cos(p),c.x=h+i,c.y=u+a;return d.addSegment(new e.common.MoveSegment(g[0].x,g[0].y)),d.addSegment(new e.common.LineSegment(g[1].x,g[1].y)),d.addSegment(new e.common.LineSegment(g[2].x,g[2].y)),d.addSegment(new e.common.QuadraticArcSegment(g[3].x,g[3].y,g[0].x,g[0].y)),d}function k(t,n,o,i,r){var s,l,m,c,h,u,d,g,p=a.length,f=3*n,T=2*n;switch(n){case 1:f=8,T=6;break;case 2:f=12,T=8;break;case 3:f=16,T=10}null!=r&&p>1&&(s=a[p-2].getEndPoint(),null!=(m=a[p-1]).offsetPoint&&(l=new e.common.Point(m.getEndPoint()),(g=s.distanceTo(l))>i&&(d=g*o,t?(c=m.offsetPoint(s,l,d),u=y(s.x,s.y,c.x,c.y,f,T)):(h=m.offsetPoint(l,s,d),u=y(l.x,l.y,h.x,h.y,f,T)),r(u))))}function v(t,n){var o,i,r,s,l=a.length,m=3*t,c=2*t;switch(t){case 1:m=8,c=6;break;case 2:m=12,c=8;break;case 3:m=16,c=10}null!=n&&l>1&&(o=a[l-2].getEndPoint(),null!=(r=a[l-1]).trim&&(i=new e.common.Point(r.getEndPoint())).distanceTo(o)>m&&n(y((s=r.trim(o,m)).x,s.y,i.x,i.y,m,c),s))}function w(){var e,t,n,o,i,r,s,l={},m=[],c=[];for(e=0,t=a.length;e<t-1;e+=1)switch(r=a[e],s=a[e+1],r.segmentType){case 0:case 2:case 3:switch(s.segmentType){case 1:case 4:o=r.x+"&"+r.y,l.hasOwnProperty(o)||(l[o]=e)}break;case 1:o=r.x+"&"+r.y,l.hasOwnProperty(o)&&!m[l[o]]&&(m[l[o]]=e+1,c[e]=!0)}for(i=[],e=0;e<t;e+=1)if(!c[e]&&(r=a[e],i.push(r),c[e]=!0,m[e]>0))for(n=m[e];n<t&&!c[n];)r=a[n],i.push(r),c[n]=!0,m[n]>0?n=m[n]:n+=1;a=i}function C(){return i.toString()}function b(e,t){this.segment=e,this.pointIndex=t}function P(t,n,o,i,a){var r,s,l,m=t.relateTo(n),c=a?0:o;2==m?n.offset(c):3==m&&0===n.from.context.pointIndex?(r=new e.common.LineSegment(n.from),i.addSegment(r),n.offset(c),(l=n.from.clone()).context=new b(r,0),s=new e.common.Vector(t.to.clone(),l),a||(n.from=l.clone()),s.offset(o),s.intersect(t),s.from.context.pushToSegment(s.from),n.intersect(s),a&&s.to.context.pushToSegment(s.to)):(n.offset(c),n.intersect(t)),n.from.context.pushToSegment(n.from)}function O(e,t,n,o){var i=e[0],a=i.to.context.segment.getEndPoint().toString();t.hasOwnProperty(a)&&(P(i,t[a],n,o,!0),delete t[a]),i.to.context.pushToSegment(i.to),e.length=0}function S(t){var n=new e.common.Polyline(i),o={},a=[],r=[];return d(this,(function(i){var s,l=i.clone();switch(l.segmentType){case 4:case 1:r.length>0&&O(r,o,t,n),a.length=0,1==l.segmentType&&((s=new e.common.Point(l)).context=new b(l,0),a.push(s));break;default:l.loop(this,(function(i,s,m){var c,h,u=new e.common.Point(i,s);switch(u.context=new b(l,m),a.unshift(u),a.length>1&&(r.unshift(new e.common.Vector(a[1].clone(),a[0].clone())),a.length=1),r.length){case 1:h=(c=r[0]).from.toString(),o[h]=c,c.offset(t),c.from.context.pushToSegment(c.from);break;case 2:P(r[1],c=r[0],t,n,!1),r.length=1}}))}n.addSegment(l)})),r.length>0&&O(r,o,t,n),n}return o=new e.common.PaletteItem({lineColor:i.lineColor,lineWidth:0,fillColor:i.lineColor,opacity:i.opacity||1}),b.prototype.pushToSegment=function(e){this.segment.setPoint(e,this.pointIndex)},n={paletteItem:i,arrowPaletteItem:o,addSegment:l,addSegments:m,mergeTo:c,length:u,loop:d,loopReversed:g,transform:p,isInvertable:f,addInverted:T,addArrow:v,addOffsetArrow:k,optimizeMoveSegments:w,getOffsetPolyine:S,toString:C,getStartPoint:r,getEndPoint:s,clone:h}},e.common.PolylinesBuffer=function(){var t={};function n(t,n){return t[n.toString()]||(t[n.toString()]=new e.common.Polyline(n)),t[n.toString()]}function o(e,n){var o,i;if(null!=n)for(o in t)if(t.hasOwnProperty(o)&&(i=t[o])&&(i.optimizeMoveSegments(),n.call(e,i)))break}return{getPolyline:function(e){return n(t,e)},loop:o,addInverted:function(e,i){var a,r;a=t,t={},null!=e&&e(this),o(this,(function(e){r=n(a,e.paletteItem),i?e.mergeTo(r):r.addInverted(e)})),t=a},transform:function(e,t){o(this,(function(n){n.transform(e,t)}))}}},e.common.QuadraticArcSegment=function(e,t,n,o){switch(this.x=null,this.y=null,this.cpX=null,this.cpY=null,arguments.length){case 2:this.x=t.x,this.y=t.y,this.cpX=e.x,this.cpY=e.y;break;case 4:this.cpX=e,this.cpY=t,this.x=n,this.y=o}this.segmentType=2},e.common.QuadraticArcSegment.prototype.clone=function(){return new e.common.QuadraticArcSegment(this.cpX,this.cpY,this.x,this.y)},e.common.QuadraticArcSegment.prototype.loop=function(e,t){null!=t&&(t.call(e,this.cpX,this.cpY,0),t.call(e,this.x,this.y,1))},e.common.QuadraticArcSegment.prototype.setPoint=function(e,t){switch(t){case 0:this.cpX=e.x,this.cpY=e.y;break;case 1:this.x=e.x,this.y=e.y}},e.common.QuadraticArcSegment.prototype.getEndPoint=function(){return this},e.common.QuadraticArcSegment.prototype.invert=function(e){this.x=e.x,this.y=e.y},e.common.QuadraticArcSegment.prototype.transform=function(e,t){var n=this;e.transformPoints(n.x,n.y,n.cpX,n.cpY,t,n,(function(e,t,o,i){n.x=e,n.y=t,n.cpX=o,n.cpY=i}))},e.common.QuadraticArcSegment.prototype.trim=function(e,t){var n=.5,o=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,e.x,e.y,n),i=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,e.x,e.y,.1);return n=t*(n/o.distanceTo(this.x,this.y)+.1/i.distanceTo(this.x,this.y))/2,o=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,e.x,e.y,n),this.x=o.x,this.y=o.y,this},e.common.QuadraticArcSegment.prototype.offsetPoint=function(t,n,o,i,a,r,s){return new e.common.Point((1-s)*(1-s)*t+2*(1-s)*s*o+s*s*a,(1-s)*(1-s)*n+2*(1-s)*s*i+s*s*r)},e.common.Size=function(e,t){switch(this.width=0,this.height=0,arguments.length){case 1:this.width=e.width,this.height=e.height;break;case 2:this.width=e,this.height=t}},e.common.Size.prototype.invert=function(){var e=this.width;return this.width=this.height,this.height=e,this},e.common.Size.prototype.scale=function(e){return this.width=this.width*e,this.height=this.height*e,this},e.common.Size.prototype.getCSS=function(e){return e=void 0!==e?e:"px",{left:this.x+e,top:this.y+e,width:this.width+e,height:this.height+e}},e.common.Size.prototype.cropBySize=function(e){return this.width=Math.min(this.width,e.width),this.height=Math.min(this.height,e.height),this},e.common.Size.prototype.addSize=function(e){return this.width=Math.max(this.width,e.width),this.height=Math.max(this.height,e.height),this},e.common.Size.prototype.validate=function(){if(isNaN(this.width)||isNaN(this.height))throw"Invalid size."},e.common.Thickness=function(e,t,n,o){this.left=e,this.top=t,this.right=n,this.bottom=o},e.common.Thickness.prototype.isEmpty=function(){return 0===this.left&&0===this.top&&0===this.right&&0===this.bottom},e.common.Thickness.prototype.toString=function(e){return e=void 0!==e?e:"px",this.left+e+", "+this.top+e+", "+this.right+e+", "+this.bottom+e},e.common.Vector=function(e,t){switch(this.from=null,this.to=null,this.context=null,arguments.length){case 1:this.from=e.from,this.to=e.to;break;case 2:this.from=e,this.to=t}},e.common.Vector.prototype.isNull=function(){return this.from.x==this.to&&this.from.y==this.to.y},e.common.Vector.prototype.length=function(){return this.from.distanceTo(this.to)},e.common.Vector.prototype.equalTo=function(e){return this.from.equalTo(e.from)&&this.to.equalTo(e.to)},e.common.Vector.prototype.getMiddlePoint=function(){return new e.common.Point((this.from.x+this.to.x)/2,(this.from.y+this.to.y)/2)},e.common.Vector.prototype.relateTo=function(e){var t=0,n=this.to.x-this.from.x,o=this.to.y-this.from.y,i=e.to.x-e.from.x,a=e.to.y-e.from.y;switch((n?8:0)+(o?4:0)+(i?2:0)+(a?1:0)){case 0:case 1:case 2:case 3:case 4:case 8:case 12:t=1;break;case 5:t=o*a>0?2:3;break;case 10:t=n*i>0?2:3;break;case 15:n/i==o/a&&(t=n/i>0?2:3)}return t},e.common.Vector.prototype.offset=function(e){var t=this.length(),n=(this.to.y-this.from.y)*e/t,o=-(this.to.x-this.from.x)*e/t;this.from.x+=n,this.from.y+=o,this.to.x+=n,this.to.y+=o},e.common.Vector.prototype.getLine=function(){var e=this.from.x,t=this.from.y,n=this.to.x,o=this.to.y;return[o-t,e-n,e*(t-o)+t*(n-e)]},e.common.Vector.prototype.getLineKey=function(){var e=this.getLine(),t=e[0],n=e[1],o=e[2],i=1e4;return(e=0!==n?[Math.floor(t/n*i),1,Math.floor(o/n*i)]:[1,0,Math.floor(o/t*i)]).toString()},e.common.Vector.prototype.intersect=function(t){var n,o,i=this.getLine(),a=t.getLine(),r=new e.common.Matrix(i[0],i[1],a[0],a[1]).determinant(),s=!1;return 0!==r&&(n=new e.common.Matrix(-i[2],i[1],-a[2],a[1]).determinant()/r,o=new e.common.Matrix(i[0],-i[2],a[0],-a[2]).determinant()/r,t.to.x=n,t.to.y=o,this.from.x=n,this.from.y=o,s=!0),s},e.common.Vector.prototype.getIntersectionPoint=function(t,n,o){var i,a,r=this.getLine(),s=t.getLine(),l=new e.common.Matrix(r[0],r[1],s[0],s[1]).determinant(),m=null;return 0!==l&&(i=new e.common.Matrix(-r[2],r[1],-s[2],s[1]).determinant()/l,a=new e.common.Matrix(r[0],-r[2],s[0],-s[2]).determinant()/l,n?t._contains(i,a,o)&&this._contains(i,a,o)&&(m=new e.common.Point(i,a)):m=new e.common.Point(i,a)),m},e.common.Vector.prototype._contains=function(e,t,n){var o=Math.min(this.from.x,this.to.x),i=Math.min(this.from.y,this.to.y),a=Math.max(this.from.x,this.to.x),r=Math.max(this.from.y,this.to.y);return o-n<=e&&e<=a+n&&i-n<=t&&t<=r+n},e.common.Graphics=function(t){this.m_element=t,this.m_placeholders={},this.m_activePlaceholder=null,this.m_cache=new e.common.Cache,this.graphicsType=null,this.hasGraphics=!1,this.debug=!1,this.layerNames={},e.common.loop(this,e.common.Layers,(function(e,t){this.layerNames[t]=e}))},e.common.Graphics.prototype.clean=function(){var e,t,n,o;for(e in this.m_cache.clear(),this.m_cache=null,this.m_element=null,this.m_placeholders)if(this.m_placeholders.hasOwnProperty(e)){for(n in(t=this.m_placeholders[e]).layers)t.layers.hasOwnProperty(n)&&((o=t.layers[n]).canvas.parentNode.removeChild(o.canvas),o.canvas=null);t.layers.length=0,t.activeLayer=null,t.size=null,t.rect=null,t.div=null}this.m_placeholders.length=0,this.m_activePlaceholder=null},e.common.Graphics.prototype.resize=function(e,t,n){var o=this.m_placeholders[e];null!=o&&this.resizePlaceholder(o,0,0,t,n)},e.common.Graphics.prototype.position=function(e,t,n,o,i){var a=this.m_placeholders[e];null!=a&&this.resizePlaceholder(a,t,n,o,i)},e.common.Graphics.prototype.show=function(t){var n=this.m_placeholders[t];null!=n&&e.common.JsonML.applyStyles(n.div,{display:"inherit",visibility:"inherit"})},e.common.Graphics.prototype.hide=function(t){var n=this.m_placeholders[t];null!=n&&e.common.JsonML.applyStyles(n.div,{display:"none",visibility:"hidden"})},e.common.Graphics.prototype.resizePlaceholder=function(t,n,o,i,a){var r,s;for(r in t.size=new e.common.Size(i,a),t.rect=new e.common.Rect(n,o,i,a),e.common.JsonML.applyStyles(t.div,t.rect.getCSS()),t.layers)t.layers.hasOwnProperty(r)&&-1!==(s=t.layers[r]).name&&e.common.JsonML.applyStyles(s.canvas,{position:"absolute",width:"0px",height:"0px"})},e.common.Graphics.prototype.begin=function(){this.m_cache.begin()},e.common.Graphics.prototype.end=function(){this.m_cache.end()},e.common.Graphics.prototype.reset=function(e,t){var n="none",o=-1;switch(arguments.length){case 1:"string"==typeof e?n=e:o=e;break;case 2:n=e,o=t}this.m_cache.reset(n,o)},e.common.Graphics.prototype.activate=function(e,t){switch(arguments.length){case 1:"string"==typeof e?(this._activatePlaceholder(e),this._activateLayer(-1)):(this._activatePlaceholder("none"),this._activateLayer(e));break;case 2:this._activatePlaceholder(e),this._activateLayer(t)}return this.m_activePlaceholder},e.common.Graphics.prototype._activatePlaceholder=function(t){var n,o,i=this.m_placeholders[t];void 0===i&&(n=null,n="none"===t?this.m_element:(o=this.m_element.getElementsByClassName(t)).length>0?o[0]:this.m_element,(i=new e.common.Placeholder(t)).div=n,i.size=e.common.getInnerSize(n),i.rect=new e.common.Rect(0,0,i.size.width,i.size.height),this.m_placeholders[t]=i),this.m_activePlaceholder=i},e.common.Graphics.prototype._activateLayer=function(t){var n,o,i,a,r=this.m_activePlaceholder.layers[t];if(void 0===r){if(n=this.m_activePlaceholder,-1===t)(r=new e.common.Layer(t)).canvas=n.div;else{for(a in o=e.common.JsonML.toHTML(["div",{style:{position:"absolute",width:"0px",height:"0px"},class:["Layer"+t,"Layer"+this.layerNames[t]]}]),i=null,n.layers)n.layers.hasOwnProperty(a)&&(r=n.layers[a]).name<t&&(i=null!==i?Math.max(i,r.name):r.name);(r=new e.common.Layer(t)).canvas=o,null===i?this.prepend(n.div,r.canvas):this.insertAfter(n.layers[i].canvas,r.canvas)}n.layers[t]=r}this.m_activePlaceholder.activeLayer=r},e.common.Graphics.prototype.prepend=function(e,t){null==e.firstChild?e.appendChild(t):e.insertBefore(t,e.firstChild)},e.common.Graphics.prototype.insertAfter=function(e,t){var n=e.parentNode;n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling)},e.common.Graphics.prototype.text=function(t,n,o,i,a,r,s,l,m){var c,h,u=this.m_activePlaceholder,d={position:"absolute",padding:0,margin:0,textAlign:this._getTextAlign(s),fontSize:m.fontSize,fontFamily:m.fontFamily,fontWeight:m.fontWeight,fontStyle:m.fontStyle,color:m.fontColor,lineHeight:1},g="";switch(r){case 0:case 3:d.left=t+"px",d.top=n+"px",d.width=o+"px",d.height=i+"px";break;case 1:d.left=t+Math.round(o/2-i/2)+"px",d.top=n+Math.round(i/2-o/2)+"px",d.width=i+"px",d.height=o+"px",g="rotate(-90deg)";break;case 2:d.left=t+Math.round(o/2-i/2)+"px",d.top=n+Math.round(i/2-o/2)+"px",d.width=i+"px",d.height=o+"px",g="rotate(90deg)"}switch(d["-webkit-transform-origin"]="center center",d["-moz-transform-origin"]="center center",d["-o-transform-origin"]="center center",d["-ms-transform-origin"]="center center",d["-webkit-transform"]=g,d["-moz-transform"]=g,d["-o-transform"]=g,d["-ms-transform"]=g,d.transform=g,d.maxWidth=d.width,d.maxHeight=d.height,a=a.replace(new RegExp("\n","g"),"<br/>"),l){case 0:this.debug&&(d.border="solid 1px black"),null===(c=this.m_cache.get(u.name,u.activeLayer.name,"text"))?(c=e.common.JsonML.toHTML(["div",{style:d,$:function(e){e.innerHTML=a}}]),u.activeLayer.canvas.appendChild(c),this.m_cache.put(u.name,u.activeLayer.name,"text",c)):(e.common.JsonML.applyStyles(c,d),c.innerHTML=a);break;default:if(d.borderCollapse="collapse",h={verticalAlign:this._getVerticalAlignment(l),padding:0},this.debug&&(h.border="solid 1px black"),null===(c=this.m_cache.get(u.name,u.activeLayer.name,"textintable")))c=e.common.JsonML.toHTML(["table",{style:d},["tbody",["tr",["td",{style:h,$:function(e){e.innerHTML=a}}]]]]),u.activeLayer.canvas.appendChild(c),this.m_cache.put(u.name,u.activeLayer.name,"textintable",c);else{e.common.JsonML.applyStyles(c,d);var p=c.getElementsByTagName("td")[0];e.common.JsonML.applyStyles(p,h),p.innerHTML=a}}},e.common.Graphics.prototype._getTextAlign=function(e){var t=null;switch(e){case 0:t="center";break;case 1:t="left";break;case 2:t="right"}return t},e.common.Graphics.prototype._getVerticalAlignment=function(e){var t=null;switch(e){case 1:t="middle";break;case 0:t="top";break;case 2:t="bottom"}return t},e.common.Graphics.prototype.polylinesBuffer=function(e){e.loop(this,(function(e){e.length()>0&&this.polyline(e)}))},e.common.Graphics.prototype.polyline=function(e){var t=null,n=null,o=e.paletteItem.toAttr();e.loop(this,(function(e){switch(e.segmentType){case 1:t=Math.round(e.x)+.5,n=Math.round(e.y)+.5;break;case 0:this.rightAngleLine(t,n,Math.round(e.x)+.5,Math.round(e.y)+.5,o),t=Math.round(e.x)+.5,n=Math.round(e.y)+.5;break;case 4:this.dot(e.x,e.y,e.width,e.height,e.cornerRadius,o)}}))},e.common.Graphics.prototype.dot=function(t,n,o,i,a,r){var s=this.m_activePlaceholder,l=this.m_cache.get(s.name,s.activeLayer.name,"dot"),m=void 0!==r.lineWidth&&void 0!==r.borderColor,c={position:"absolute",width:o-(m?1:0),top:Math.round(n),left:Math.round(t),padding:0,margin:0,lineHeight:"0px",overflow:"hidden",height:i-(m?1:0),background:r.fillColor,MozBorderRadius:a,WebkitBorderRadius:a,"-khtml-border-radius":a,borderRadius:a,fontSize:"0px",borderStyle:m?"Solid":"None",borderWidth:m?"1px":"0px",borderColor:m?r.borderColor:""};null===l?(l=e.common.JsonML.toHTML(["div",{style:c}]),s.activeLayer.canvas.appendChild(l),this.m_cache.put(s.name,s.activeLayer.name,"dot",l)):e.common.JsonML.applyStyles(l,c)},e.common.Graphics.prototype.rightAngleLine=function(t,n,o,i,a){var r,s=this.m_activePlaceholder,l=Math.abs(i-n)>Math.abs(o-t),m=a.lineWidth,c={position:"absolute",top:Math.round(Math.min(n,i)-(l?0:m/2)),left:Math.round(Math.min(t,o)-(l?m/2:0)),padding:0,margin:0,opacity:.5,lineHeight:"0px",overflow:"hidden",background:a.borderColor,fontSize:"0px"};l?(c.width=m,c.height=Math.abs(Math.round(i-n))):(c.width=Math.abs(Math.round(o-t)),c.height=m),null===(r=this.m_cache.get(s.name,s.activeLayer.name,"rect"))?(r=e.common.JsonML.toHTML(["div",{style:c}]),s.activeLayer.canvas.appendChild(r),this.m_cache.put(s.name,s.activeLayer.name,"rect",r)):e.common.JsonML.applyStyles(r,c)},e.common.Graphics.prototype.template=function(t,n,o,i,a,r,s,l,m,c,h,u,d){var g,p,f=this.m_activePlaceholder,T="template"+(null!==c?c:e.common.hashCode(m)),y=0;return g=this.m_cache.get(f.name,f.activeLayer.name,T),null!==d&&void 0!==d.borderWidth&&(y=this.getPxSize(d.borderWidth)),p={width:s-y+"px",height:l-y+"px",top:n+r+"px",left:t+a+"px"},e.common.mergeObjects(p,d),null==u&&(u=new e.common.RenderEventArgs),u.x=t+a,u.y=n+r,u.width=s-y,u.height=l-y,null==g?(g=this.getElementByTemplate(m),p=e.common.mergeObjects(p,{position:"absolute",padding:"0px",margin:"0px"},d),e.common.JsonML.applyStyles(g,p),u.element=g,u.renderingMode=0,null!==h&&h(null,u),f.activeLayer.canvas.appendChild(g),this.m_cache.put(f.name,f.activeLayer.name,T,g)):(u.element=g,u.renderingMode=1,e.common.JsonML.applyStyles(g,p),null!==h&&h(null,u)),g},e.common.Graphics.prototype.getElementByTemplate=function(t){var n=null;if(e.common.isArray(t))n=e.common.JsonML.toHTML(t);else{var o=document.createElement("div");o.innerHTML=t,n=o.firstChild}return n},e.common.Graphics.prototype.getPxSize=function(e,t){var n=e;return"string"==typeof e&&(n=e.indexOf("pt")>0?96*parseInt(e,10)/72:e.indexOf("%")>0?parseFloat(e)/100*t:parseInt(e,10)),n},e.common.Cache=function(){this.threshold=20,this.m_visible={},this.m_invisible={}},e.common.Cache.prototype.begin=function(){var e,t,n,o;for(e in this.m_visible)if(this.m_visible.hasOwnProperty(e))for(t in this.m_visible[e])if(this.m_visible[e].hasOwnProperty(t)){for(n=this.m_visible[e][t].length-1;n>=0;n-=1)(o=this.m_visible[e][t][n]).style.visibility="hidden",this.m_invisible[e][t].push(o);this.m_visible[e][t].length=0}},e.common.Cache.prototype.end=function(){var e,t,n;for(e in this.m_visible)if(this.m_visible.hasOwnProperty(e))for(t in this.m_visible[e])if(this.m_visible[e].hasOwnProperty(t)&&(n=null,this.m_invisible[e][t].length>this.threshold))for(;void 0!==(n=this.m_invisible[e][t].pop());)n.parentNode.removeChild(n)},e.common.Cache.prototype.reset=function(e,t){e=e+"-"+t;var n,o,i=null;for(n in this.m_visible[e])if(this.m_visible[e].hasOwnProperty(n)){for(o=this.m_visible[e][n].length-1;o>=0;o-=1)i=this.m_visible[e][n][o],this.m_invisible[e][n].push(i),i.style.visibility="hidden";this.m_visible[e][n].length=0}},e.common.Cache.prototype.clear=function(){var e,t,n;for(e in this.m_visible)if(this.m_visible.hasOwnProperty(e))for(t in this.m_visible[e])if(this.m_visible[e].hasOwnProperty(t)){for(n=null;void 0!==(n=this.m_visible[e][t].pop());)n.parentNode.removeChild(n);for(;void 0!==(n=this.m_invisible[e][t].pop());)n.parentNode.removeChild(n)}},e.common.Cache.prototype.get=function(e,t,n){e=e+"-"+t;var o=null;return void 0===this.m_visible[e]&&(this.m_visible[e]={},this.m_invisible[e]={}),void 0===this.m_visible[e][n]&&(this.m_visible[e][n]=[],this.m_invisible[e][n]=[]),null!==(o=this.m_invisible[e][n].pop()||null)&&(this.m_visible[e][n].push(o),o.style.visibility="inherit"),o},e.common.Cache.prototype.put=function(e,t,n,o){e=e+"-"+t,this.m_visible[e][n].push(o)},e.common.CanvasGraphics=function(t){this.parent=e.common.Graphics.prototype,this.parent.constructor.apply(this,arguments),this.graphicsType=1,this.m_maximum=8e3},e.common.CanvasGraphics.prototype=new e.common.Graphics,e.common.CanvasGraphics.prototype.clean=function(){var e,t,n,o;for(e in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(e))for(n in(t=this.m_placeholders[e]).layers)t.layers.hasOwnProperty(n)&&null!==(o=t.layers[n]).canvascanvas&&(o.canvascanvas.parentNode.removeChild(o.canvascanvas),o.canvascanvas=null);this.parent.clean.apply(this,arguments)},e.common.CanvasGraphics.prototype._activatePlaceholder=function(e){var t,n,o;this.parent._activatePlaceholder.apply(this,arguments),n=(t=this.m_activePlaceholder).size.width,o=t.size.height,n>this.m_maximum||o>this.m_maximum?t.hasGraphics=!1:t.hasGraphics=!0},e.common.CanvasGraphics.prototype.resizePlaceholder=function(e,t,n,o,i){var a,r;for(a in this.parent.resizePlaceholder.apply(this,arguments),e.layers)e.layers.hasOwnProperty(a)&&null!==(r=e.layers[a]).canvascanvas&&(r.canvascanvas.width=o,r.canvascanvas.height=i)},e.common.CanvasGraphics.prototype.begin=function(){var e,t,n,o,i,a;for(e in this.parent.begin.apply(this),this.m_placeholders)if(this.m_placeholders.hasOwnProperty(e))for(n in i=(t=this.m_placeholders[e]).size.width,a=t.size.height,t.layers)t.layers.hasOwnProperty(n)&&null!==(o=t.layers[n]).canvascanvas&&o.canvascontext.clearRect(0,0,i,a)},e.common.Graphics.prototype._getContext=function(e,t){var n=e.size.width,o=e.size.height;return null===t.canvascanvas&&(t.canvascanvas=document.createElement("canvas"),t.canvascanvas.width=n,t.canvascanvas.height=o,this.prepend(e.activeLayer.canvas,t.canvascanvas),t.canvascontext=t.canvascanvas.getContext("2d")),t.canvascontext},e.common.CanvasGraphics.prototype.reset=function(e,t){var n,o,i,a,r="none",s=-1;switch(arguments.length){case 1:"string"==typeof e?r=e:s=e;break;case 2:r=e,s=t}this.parent.reset.apply(this,arguments),void 0!==(n=this.m_placeholders[r])&&(i=n.size.width,a=n.size.height,void 0!==(o=n.layers[s])&&null!==o.canvascanvas&&o.canvascontext.clearRect(0,0,i,a))},e.common.CanvasGraphics.prototype.polyline=function(e){var t,n,o,i,a,r=this.m_activePlaceholder,s=e.paletteItem.toAttr();if(r.hasGraphics){if(t=r.activeLayer,(n=this._getContext(r,t)).save(),void 0!==s.lineWidth&&void 0!==s.borderColor?(n.strokeStyle=s.borderColor,n.lineWidth=s.lineWidth):(n.lineWidth=0,n.strokeStyle="Transparent"),null!=s.lineType){switch(i=Math.round(s.lineWidth)||1,s.lineType){case 0:o=[];break;case 1:o=[i,i];break;case 2:o=[5*i,3*i]}void 0!==n.setLineDash?n.setLineDash(o):void 0!==n.webkitLineDash?n.webkitLineDash=o:void 0!==n.mozDash&&(n.mozDash=o)}n.beginPath(),e.loop(this,(function(e){switch(e.segmentType){case 1:n.moveTo(Math.round(e.x)+.5,Math.round(e.y)+.5);break;case 0:n.lineTo(Math.round(e.x)+.5,Math.round(e.y)+.5);break;case 4:e.width==e.height&&e.width/2<=e.cornerRadius?(n.moveTo(Math.round(e.x)+e.width+.5,Math.round(e.y)+e.height/2+.5),n.arc(Math.round(e.x)+e.width/2+.5,Math.round(e.y)+e.height/2+.5,Math.round(e.width/2),0,2*Math.PI,!1)):0===e.cornerRadius?(n.moveTo(Math.round(e.x)+.5,Math.round(e.y)+.5),n.lineTo(Math.round(e.x+e.width)+.5,Math.round(e.y)+.5),n.lineTo(Math.round(e.x+e.width)+.5,Math.round(e.y+e.height)+.5),n.lineTo(Math.round(e.x)+.5,Math.round(e.y+e.height)+.5),n.lineTo(Math.round(e.x)+.5,Math.round(e.y)+.5)):(a=Math.min(e.cornerRadius,Math.min(e.width/2,e.height/2)),n.moveTo(Math.round(e.x)+.5,Math.round(e.y+a)+.5),n.arc(Math.round(e.x+a)+.5,Math.round(e.y+a)+.5,Math.round(a),Math.PI,-Math.PI/2,!1),n.lineTo(Math.round(e.x+e.width-a)+.5,Math.round(e.y)+.5),n.arc(Math.round(e.x+e.width-a)+.5,Math.round(e.y+a)+.5,Math.round(a),-Math.PI/2,0,!1),n.lineTo(Math.round(e.x+e.width)+.5,Math.round(e.y+e.height-a)+.5),n.arc(Math.round(e.x+e.width-a)+.5,Math.round(e.y+e.height-a)+.5,Math.round(a),0,Math.PI/2,!1),n.lineTo(Math.round(e.x+a)+.5,Math.round(e.y+e.height)+.5),n.arc(Math.round(e.x+a)+.5,Math.round(e.y+e.height-a)+.5,Math.round(a),Math.PI/2,Math.PI,!1),n.lineTo(Math.round(e.x)+.5,Math.round(e.y+a)+.5));break;case 2:n.quadraticCurveTo(Math.round(e.cpX)+.5,Math.round(e.cpY)+.5,Math.round(e.x)+.5,Math.round(e.y)+.5);break;case 3:n.bezierCurveTo(Math.round(e.cpX1)+.5,Math.round(e.cpY1)+.5,Math.round(e.cpX2)+.5,Math.round(e.cpY2)+.5,Math.round(e.x)+.5,Math.round(e.y)+.5)}})),null!=s.opacity&&(n.globalAlpha=s.opacity),void 0!==s.lineWidth&&n.stroke(),void 0!==s.fillColor&&(n.fillStyle=s.fillColor,n.fill()),n.restore()}else this.parent.polyline.apply(this,arguments)},e.common.Element=function(e,t){switch(this.ns=null,this.name=null,this.attr={},this.style={},this.children=[],arguments.length){case 1:this.name=e;break;case 2:this.ns=e,this.name=t}},e.common.Element.prototype.setAttribute=function(e,t){this.attr[e]=t},e.common.Element.prototype.appendChild=function(e){this.children[this.children.length]=e},e.common.Element.prototype.create=function(e){var t,n,o,i=null;for(t in i=null!==this.ns?document.createElementNS(this.ns,this.name):document.createElement(this.name),this.attr)this.attr.hasOwnProperty(t)&&(void 0!==e?i[t]=this.attr[t]:i.setAttribute(t,this.attr[t]));for(t in this.style)this.style.hasOwnProperty(t)&&(i.style[t]=this.style[t]);for(o=0;o<this.children.length;o+=1)"string"==typeof(n=this.children[o])?i.appendChild(document.createTextNode(n)):i.appendChild(n.create(e));return i},e.common.Element.prototype.update=function(e,t){var n,o,i,a,r;for(n in this.style)this.style.hasOwnProperty(n)&&(r=this.style[n],e.style[n]!==r&&(e.style[n]=r));for(n in this.attr)this.attr.hasOwnProperty(n)&&(r=this.attr[n],void 0!==t?e[n]!==r&&(e[n]=r):e.getAttribute(n)!==r&&e.setAttribute(n,r));for(o=this.children.length,i=0;i<o;i+=1)"string"==typeof(a=this.children[i])?e.innerHtml!==a&&(e.innerHtml=a):this.children[i].update(e.children[i],t)},e.common.Layer=function(e){this.name=e,this.canvas=null,this.canvascanvas=null,this.svgcanvas=null},e.common.Placeholder=function(e){this.name=e,this.layers={},this.activeLayer=null,this.size=null,this.rect=null,this.div=null,this.hasGraphics=!0},e.common.SvgGraphics=function(t){this.parent=e.common.Graphics.prototype,this.parent.constructor.apply(this,arguments),this._svgxmlns="http://www.w3.org/2000/svg",this.graphicsType=0,this.hasGraphics=!0},e.common.SvgGraphics.prototype=new e.common.Graphics,e.common.SvgGraphics.prototype.clean=function(){var e,t,n,o;for(e in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(e))for(n in(t=this.m_placeholders[e]).layers)t.layers.hasOwnProperty(n)&&null!==(o=t.layers[n]).svgcanvas&&(o.svgcanvas.parentNode.removeChild(o.svgcanvas),o.svgcanvas=null);this.parent.clean.apply(this,arguments)},e.common.SvgGraphics.prototype.resizePlaceholder=function(t,n,o,i,a){var r,s;for(r in this.parent.resizePlaceholder.apply(this,arguments),t.layers)t.layers.hasOwnProperty(r)&&null!==(s=t.layers[r]).svgcanvas&&(e.common.JsonML.applyStyles(s.svgcanvas,{position:"absolute",width:i+"px",height:a+"px"}),s.svgcanvas.viewBox="0 0 "+i+" "+a)},e.common.SvgGraphics.prototype._getCanvas=function(){var t=this.m_activePlaceholder,n=t.activeLayer,o=t.rect;return null===n.svgcanvas&&(n.svgcanvas=document.createElementNS(this._svgxmlns,"svg"),n.svgcanvas.viewBox=o.x+" "+o.y+" "+o.width+" "+o.height,e.common.JsonML.applyStyles(n.svgcanvas,{width:o.width+"px",height:o.height+"px"}),this.prepend(t.activeLayer.canvas,n.svgcanvas)),n.svgcanvas},e.common.SvgGraphics.prototype.polyline=function(t){var n,o,i,a,r,s,l=this.m_activePlaceholder,m=t.paletteItem.toAttr();if(n=new e.common.Element(this._svgxmlns,"path"),void 0!==m.fillColor?(n.setAttribute("fill",m.fillColor),n.setAttribute("fill-opacity",m.opacity)):n.setAttribute("fill-opacity",0),void 0!==m.lineWidth&&void 0!==m.borderColor?(n.setAttribute("stroke",m.borderColor),n.setAttribute("stroke-width",m.lineWidth),void 0!==m.opacity?n.setAttribute("stroke-opacity",m.opacity):n.setAttribute("stroke-opacity",1)):(n.setAttribute("stroke","transparent"),n.setAttribute("stroke-width",0)),null!=m.lineType)switch(a=Math.round(m.lineWidth)||1,m.lineType){case 0:n.setAttribute("stroke-dasharray","");break;case 1:n.setAttribute("stroke-dasharray",a+","+a);break;case 2:n.setAttribute("stroke-dasharray",5*a+","+3*a)}o="",t.loop(this,(function(e){switch(e.segmentType){case 1:o+="M"+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+.5);break;case 0:o+="L"+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+.5);break;case 2:o+="Q"+(Math.round(e.cpX)+.5)+" "+(Math.round(e.cpY)+.5)+" "+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+.5);break;case 4:e.width==e.height&&e.width/2<=e.cornerRadius?(r=e.width/2,o+="M"+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+e.height/2+.5),o+="A"+r+" "+r+" 0 0 0 "+(Math.round(e.x+e.width)+.5)+" "+(Math.round(e.y)+e.height/2+.5),o+="A"+r+" "+r+" 0 0 0 "+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+e.height/2+.5)):0===e.cornerRadius?(o+="M"+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+.5),o+="L"+(Math.round(e.x+e.width)+.5)+" "+(Math.round(e.y)+.5),o+="L"+(Math.round(e.x+e.width)+.5)+" "+(Math.round(e.y+e.height)+.5),o+="L"+(Math.round(e.x)+.5)+" "+(Math.round(e.y+e.height)+.5),o+="L"+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+.5)):(s=Math.min(e.cornerRadius,Math.min(e.width/2,e.height/2)),o+="M"+(Math.round(e.x)+.5)+" "+(Math.round(e.y+s)+.5),o+="A"+Math.round(s)+" "+Math.round(s)+" 0 0 1 "+(Math.round(e.x+s)+.5)+" "+(Math.round(e.y)+.5),o+="L"+(Math.round(e.x+e.width-s)+.5)+" "+(Math.round(e.y)+.5),o+="A"+Math.round(s)+" "+Math.round(s)+" 0 0 1 "+(Math.round(e.x+e.width)+.5)+" "+(Math.round(e.y+s)+.5),o+="L"+(Math.round(e.x+e.width)+.5)+" "+(Math.round(e.y+e.height-s)+.5),o+="A"+Math.round(s)+" "+Math.round(s)+" 0 0 1 "+(Math.round(e.x+e.width-s)+.5)+" "+(Math.round(e.y+e.height)+.5),o+="L"+(Math.round(e.x+s)+.5)+" "+(Math.round(e.y+e.height)+.5),o+="A"+Math.round(s)+" "+Math.round(s)+" 0 0 1 "+(Math.round(e.x)+.5)+" "+(Math.round(e.y+e.height-s)+.5),o+="L"+(Math.round(e.x)+.5)+" "+(Math.round(e.y+s)+.5));break;case 3:o+="C"+(Math.round(e.cpX1)+.5)+" "+(Math.round(e.cpY1)+.5)+" "+(Math.round(e.cpX2)+.5)+" "+(Math.round(e.cpY2)+.5)+" "+(Math.round(e.x)+.5)+" "+(Math.round(e.y)+.5)}})),n.setAttribute("d",o),null===(i=this.m_cache.get(l.name,l.activeLayer.name,"path"))?(i=n.create(),this._getCanvas().appendChild(i),this.m_cache.put(l.name,l.activeLayer.name,"path",i)):n.update(i)},e.common.Transform=function(){this.invertArea=!1,this.invertHorizontally=!1,this.invertVertically=!1,this.size=null},e.common.Transform.prototype.setOrientation=function(e){switch(e){case 0:this.invertArea=!1,this.invertHorizontally=!1,this.invertVertically=!1;break;case 1:this.invertArea=!1,this.invertHorizontally=!1,this.invertVertically=!0;break;case 2:this.invertArea=!0,this.invertHorizontally=!1,this.invertVertically=!1;break;case 3:this.invertArea=!0,this.invertHorizontally=!0,this.invertVertically=!1}},e.common.Transform.prototype.getOrientation=function(e){var t=e;if(this.invertHorizontally)switch(e){case 2:t=3;break;case 3:t=2}if(this.invertVertically)switch(e){case 0:t=1;break;case 1:t=0}if(this.invertArea)switch(t){case 0:t=2;break;case 1:t=3;break;case 2:t=0;break;case 3:t=1}return t},e.common.Transform.prototype.transformPoint=function(e,t,n,o,i){var a;n&&this.invertArea&&(a=e,e=t,t=a),this.invertHorizontally&&(e=this.size.width-e),this.invertVertically&&(t=this.size.height-t),n||this.invertArea&&(a=e,e=t,t=a),i.call(o,e,t)},e.common.Transform.prototype.transformPoints=function(e,t,n,o,i,a,r){var s;i&&this.invertArea&&(s=e,e=t,t=s,s=n,n=o,o=s),this.invertHorizontally&&(e=this.size.width-e,n=this.size.width-n),this.invertVertically&&(t=this.size.height-t,o=this.size.height-o),i||this.invertArea&&(s=e,e=t,t=s,s=n,n=o,o=s),r.call(a,e,t,n,o)},e.common.Transform.prototype.transform3Points=function(e,t,n,o,i,a,r,s,l){var m;r&&this.invertArea&&(m=e,e=t,t=m,m=n,n=o,o=m,m=i,i=a,a=m),this.invertHorizontally&&(e=this.size.width-e,n=this.size.width-n,i=this.size.width-i),this.invertVertically&&(t=this.size.height-t,o=this.size.height-o,a=this.size.height-a),r||this.invertArea&&(m=e,e=t,t=m,m=n,n=o,o=m,m=i,i=a,a=m),l.call(s,e,t,n,o,i,a)},e.common.Transform.prototype.transformRect=function(e,t,n,o,i,a,r){var s;i&&this.invertArea&&(s=e,e=t,t=s,s=n,n=o,o=s),this.invertHorizontally&&(e=this.size.width-e-n),this.invertVertically&&(t=this.size.height-t-o),i||this.invertArea&&(s=e,e=t,t=s,s=n,n=o,o=s),r.call(a,e,t,n,o)},e.common.ArrayReader=function(t,n,o,i,a){this.itemTemplate=t,this.containsUniqueItems=n,this.uniquePropertyKey=o,this.containsPrimitiveValues=e.common.isNullOrEmpty(o),this.createSourceHash=i,this.isOrdered=a},e.common.ArrayReader.prototype.read=function(t,n,o,i){var a,r,s,l,m,c,h,u=[],d={},g={},p={},f=o+"-seq";for(n&&e.common.isArray(n)||(n=[]),a=i.hash.hasOwnProperty(o)?i.hash[o]:{},r=i.hash.hasOwnProperty(f)?i.hash[f]:{},m=0,c=n.length;m<c;m+=1)s=n[m],l=this.containsUniqueItems?this.containsPrimitiveValues?s:s[this.uniquePropertyKey]:m,d.hasOwnProperty(l)||(h=this.itemTemplate.read(a.hasOwnProperty(l)?a[l]:{},s,o+"-"+m,i),u.push(h),d[l]=h,g[m]=l,this.createSourceHash&&(p[l]=s),this.isOrdered&&r[m]!=g[m]&&(i.isChanged=!0));return i.hash[o]=d,i.hash[f]=g,this.createSourceHash&&(i.sourceHash[o]=p),null!=t&&t.length==u.length||(i.isChanged=!0),u},e.common.EnumerationReader=function(e,t,n){for(var o in this.enumeration=e,this.isNullable=t,this.defaultValue=n,this.hash={},e)this.hash[e[o]]=o},e.common.EnumerationReader.prototype.read=function(e,t,n,o){var i;return null!=t&&this.hash.hasOwnProperty(t)||(t=this.isNullable?null:this.defaultValue),i=t,e!==t&&(o.isChanged=!0),i},e.common.FunctionReader=function(){},e.common.FunctionReader.prototype.read=function(e,t,n,o){return"function"==typeof t?t:null},e.common.ObjectReader=function(e,t,n){this.dataTemplate=e,this.isNullable=t,this.defaultValue=n},e.common.ObjectReader.prototype.read=function(t,n,o,i){var a,r,s=null,l=e.common.isObject(t);if(n||(n=this.isNullable?null:this.defaultValue),e.common.isObject(n))for(a in s={},this.dataTemplate)this.dataTemplate.hasOwnProperty(a)&&(r=this.dataTemplate[a],s[a]=r.read(l?t[a]:null,n[a],o+"-"+a,i));else s=n,t!==n&&(i.isChanged=!0);return s},e.common.ValueReader=function(e,t,n){this.acceptedTypes=e,this.isNullable=t,this.defaultValue=n,this.hash={};for(var o=0;o<e.length;o+=1){var i=e[o];this.hash[i]=!0}},e.common.ValueReader.prototype.stringify=function(e){if(1==this.hash.object){var t=[];return JSON.stringify(e,(function(e,n){return"_"===e[0]?null:null!==n&&"object"==typeof n?-1==t.indexOf(n)?(t.push(n),n):null:n}))}return e},e.common.ValueReader.prototype.read=function(e,t,n,o){var i;return null!=t&&this.hash.hasOwnProperty(typeof t)||(t=this.isNullable?null:this.defaultValue),i=t,this.stringify(e)!==this.stringify(t)&&(o.isChanged=!0),i},e.famdiagram.EventArgs=function(){this.oldContext=null,this.context=null,this.parentItems=[],this.childrenItems=[],this.position=null,this.name=null,this.cancel=!1},e.famdiagram.TemplateConfig=function(){this.name=null,this.isActive=!0,this.itemSize=new e.common.Size(120,100),this.itemBorderWidth=1,this.itemTemplate=null,this.minimizedItemShapeType=null,this.minimizedItemSize=new e.common.Size(4,4),this.minimizedItemCornerRadius=null,this.minimizedItemLineWidth=1,this.minimizedItemBorderColor=null,this.minimizedItemLineType=0,this.minimizedItemFillColor=null,this.minimizedItemOpacity=1,this.highlightPadding=new e.common.Thickness(2,2,2,2),this.highlightBorderWidth=1,this.highlightTemplate=null,this.cursorPadding=new e.common.Thickness(3,3,3,3),this.cursorBorderWidth=2,this.cursorTemplate=null,this.buttons=null,this.onButtonsRender=null},e.famdiagram.BackgroundAnnotationConfig=function(t){var n;switch(this.annotationType=4,this.items=[],this.zOrderType=0,this.offset=new e.common.Thickness(18,18,18,18),this.lineWidth=2,this.opacity=1,this.borderColor=null,this.fillColor=null,this.lineType=0,this.selectItems=!1,arguments.length){case 1:if(null!==t)if(t instanceof Array)this.items=t;else if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}},e.famdiagram.ButtonConfig=function(t,n,o){this.name=t,this.icon=n,this.text=!1,this.label=null,this.tooltip=o,this.size=new e.common.Size(16,16)},e.famdiagram.Config=function(t){this.name=void 0!==t?t:"FamDiagram",this.classPrefix="famdiagram",this.navigationMode=0,this.graphicsType=0,this.pageFitMode=3,this.minimalVisibility=2,this.orientationType=0,this.verticalAlignment=1,this.loopsLayoutMode=0,this.arrowsDirection=0,this.showExtraArrows=!0,this.extraArrowsMinimumSpace=30,this.groupByType=2,this.alignBylevels=!0,this.enableMatrixLayout=!1,this.minimumMatrixSize=4,this.maximumColumnsInMatrix=6,this.hideGrandParentsConnectors=!1,this.elbowType=3,this.bevelSize=4,this.elbowDotSize=4,this.emptyDiagramMessage="Diagram is empty.",this.items=[],this.annotations=[],this.cursorItem=null,this.highlightItem=null,this.highlightGravityRadius=40,this.selectedItems=[],this.hasSelectorCheckbox=0,this.selectCheckBoxLabel="Selected",this.selectionPathMode=0,this.neighboursSelectionMode=0,this.templates=[],this.defaultTemplateName=null,this.defaultLabelAnnotationTemplate=null,this.hasButtons=0,this.buttons=[],this.onButtonsRender=null,this.onHighlightChanging=null,this.onHighlightChanged=null,this.onCursorChanging=null,this.onCursorChanged=null,this.onSelectionChanging=null,this.onSelectionChanged=null,this.onButtonClick=null,this.onMouseClick=null,this.onMouseDblClick=null,this.onItemRender=null,this.onHighlightRender=null,this.onCursorRender=null,this.normalLevelShift=20,this.dotLevelShift=20,this.lineLevelShift=10,this.normalItemsInterval=10,this.dotItemsInterval=1,this.lineItemsInterval=2,this.cousinsIntervalMultiplier=5,this.itemTitleFirstFontColor="#ffffff",this.itemTitleSecondFontColor="#000080",this.minimizedItemShapeType=6,this.linesColor="#c0c0c0",this.linesWidth=1,this.linesType=0,this.showNeigboursConnectorsHighlighted=!1,this.highlightLinesColor="#ff0000",this.highlightLinesWidth=1,this.highlightLinesType=0,this.linesPalette=[],this.showCallout=!0,this.calloutMaximumVisibility=2,this.calloutPlacementOffset=100,this.defaultCalloutTemplateName=null,this.calloutfillColor="#000000",this.calloutBorderColor=null,this.calloutOffset=4,this.calloutCornerRadius=4,this.calloutPointerWidth="10%",this.calloutLineWidth=1,this.calloutOpacity=.2,this.buttonsPanelSize=28,this.groupTitlePanelSize=24,this.checkBoxPanelSize=24,this.groupTitlePlacementType=2,this.groupTitleOrientation=2,this.groupTitleVerticalAlignment=1,this.groupTitleHorizontalAlignment=0,this.groupTitleFontSize="12px",this.groupTitleFontFamily="Arial",this.groupTitleColor="#4169e1",this.groupTitleFontWeight="normal",this.groupTitleFontStyle="normal",this.distance=3,this.scale=1,this.minimumScale=.5,this.maximumScale=1,this.showLabels=0,this.labelSize=new e.common.Size(80,24),this.labelOffset=1,this.labelOrientation=0,this.labelPlacement=1,this.labelFontSize="10px",this.labelFontFamily="Arial",this.labelColor="#000000",this.labelFontWeight="normal",this.labelFontStyle="normal",this.enablePanning=!0,this.autoSizeMinimum=new e.common.Size(800,600),this.autoSizeMaximum=new e.common.Size(1024,768)},e.famdiagram.ConnectorAnnotationConfig=function(t,n){var o;switch(this.annotationType=0,this.zOrderType=2,this.fromItem=null,this.toItem=null,this.connectorShapeType=0,this.connectorPlacementType=0,this.labelPlacementType=1,this.offset=new e.common.Thickness(0,0,0,0),this.lineWidth=2,this.color="#000000",this.lineType=0,this.selectItems=!0,this.label=null,this.labelSize=new e.common.Size(60,30),arguments.length){case 1:for(o in t)t.hasOwnProperty(o)&&(this[o]=t[o]);break;case 2:this.fromItem=t,this.toItem=n}},e.famdiagram.HighlightPathAnnotationConfig=function(e){var t;switch(this.annotationType=2,this.zOrderType=2,this.items=[],this.lineWidth=2,this.color="#ff0000",this.lineType=0,this.opacity=1,this.showArrows=!0,this.selectItems=!1,arguments.length){case 1:if(null!==e)if(e instanceof Array)this.items=e;else if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}},e.famdiagram.ItemConfig=function(e,t,n,o,i){var a;switch(this.id=null,this.parents=[],this.spouses=[],this.relativeItem=null,this.placementType=3,this.position=null,this.primaryParent=null,this.title=null,this.description=null,this.image=null,this.context=null,this.itemTitleColor="#4169e1",this.minimizedItemShapeType=null,this.groupTitle=null,this.groupTitleColor="#4169e1",this.isActive=!0,this.hasSelectorCheckbox=0,this.hasButtons=0,this.templateName=null,this.showCallout=0,this.calloutTemplateName=null,this.label=null,this.showLabel=0,this.labelSize=null,this.labelOrientation=3,this.labelPlacement=0,arguments.length){case 1:for(a in e)e.hasOwnProperty(a)&&(this[a]=e[a]);break;case 5:this.id=e,this.parents=t,this.title=n,this.description=o,this.image=i}},e.famdiagram.LabelAnnotationConfig=function(e,t){var n;switch(this.annotationType=3,this.fromItem=null,this.toItems=[],this.title=null,this.itemTitleColor="#4169e1",this.templateName=null,arguments.length){case 1:for(n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);break;case 2:this.fromItem=e,this.toItem=t}},e.famdiagram.PaletteItemConfig=function(e,t,n){var o;switch(this.lineColor="#c0c0c0",this.lineWidth=1,this.lineType=0,arguments.length){case 1:for(o in e)e.hasOwnProperty(o)&&(this[o]=e[o]);break;case 3:this.lineColor=e,this.lineWidth=t,this.lineType=n}},e.famdiagram.ShapeAnnotationConfig=function(t){var n;switch(this.annotationType=1,this.zOrderType=0,this.items=[],this.shapeType=0,this.offset=new e.common.Thickness(0,0,0,0),this.lineWidth=2,this.cornerRadius="10%",this.opacity=1,this.borderColor=null,this.fillColor=null,this.lineType=0,this.selectItems=!1,this.label=null,this.labelSize=new e.common.Size(60,30),this.labelPlacement=0,this.labelOffset=4,arguments.length){case 1:if(null!==t)if(t instanceof Array)this.items=t;else if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}},e.famdiagram.EdgeItem=function(e,t,n,o){this.values=[t,o],this[e]=0,this[n]=1},e.famdiagram.EdgeItem.prototype.getNear=function(e){return this.values[this[e]]},e.famdiagram.EdgeItem.prototype.getFar=function(e){return this.values[Math.abs(this[e]-1)]},e.famdiagram.EdgeItem.prototype.setNear=function(e,t){this.values[this[e]]=t},e.famdiagram.EdgeItem.prototype.setFar=function(e,t){this.values[Math.abs(this[e]-1)]=t},e.famdiagram.EdgeItem.prototype.toString=function(){return this.parent+","+this.child},e.famdiagram.FamilyItem=function(e){var t;switch(this.id=null,this.familyId=null,this.itemConfig=null,this.isVisible=!0,this.isActive=!0,this.isLevelNeutral=!1,this.level=null,this.levelGravity=0,this.hideParentConnection=!1,this.hideChildrenConnection=!1,arguments.length){case 1:for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}},e.famdiagram.Slot=function(e){this.itemId=e,this.position=null,this.balance=0,this.left={},this.right={},this.crossings={}},e.famdiagram.Slot.prototype.clone=function(t){var n,o=new e.famdiagram.Slot(t);for(n in this.left)this.left.hasOwnProperty(n)&&(o.left[n]=this.left[n]);for(n in this.right)this.right.hasOwnProperty(n)&&(o.right[n]=this.right[n]);for(n in this.crossings)this.crossings.hasOwnProperty(n)&&(o.crossings[n]=this.crossings[n]);return o.itemid=t,o},e.famdiagram.LabelAnnotationOptionTask=function(t,n,o){var i={annotations:[],configs:{},maximumId:null},a={},r=new e.common.ArrayReader(new e.common.ObjectReader({zOrderType:new e.common.EnumerationReader(e.common.ZOrderType,!1,o.zOrderType),fromItem:new e.common.ValueReader(["string","number"],!0),toItems:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0),title:new e.common.ValueReader(["string"],!0),itemTitleColor:new e.common.ValueReader(["string"],!1,o.itemTitleColor),templateName:new e.common.ValueReader(["string"],!0)},!1),!1,null,!0);return{process:function(){var e,o,s,l={isChanged:!1,hash:a,sourceHash:{}},m=n.getMaximumId();i.annotations=r.read(i.annotations,t.getAnnotations(3),"annotations",l),i.configs={};var c=l.sourceHash.annotations;for(e=0,o=i.annotations.length;e<o;e+=1)m+=1,(s=i.annotations[e]).id=m,i.configs[s.id]=c[e];return i.maximumId=m,l.isChanged},getAnnotations:function(){return i.annotations},getMaximumId:function(){return i.maximumId},getConfig:function(e){return i.configs[e]}}},e.famdiagram.LabelAnnotationPlacementOptionTask=function(t,n){var o={annotations:[]},i={},a=new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["number"],!0),fromItem:new e.common.ValueReader(["string","number"],!0),toItems:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0)}),!0,"id");return{process:function(){var e={isChanged:!1,hash:i};return o.annotations=a.read(o.annotations,t.getAnnotations(),"annotations",e),e.isChanged},getAnnotations:function(){return o.annotations},getMaximumId:function(){return t.getMaximumId()}}},e.famdiagram.LabelAnnotationTemplateOptionTask=function(t,n){var o={annotations:[]},i={},a=new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["number"],!0),title:new e.common.ValueReader(["string"],!0),itemTitleColor:new e.common.ValueReader(["string"],!1,n.itemTitleColor),templateName:new e.common.ValueReader(["string"],!0)}),!0,"id");return{process:function(){var e={isChanged:!1,hash:i};return o.annotations=a.read(o.annotations,t.getAnnotations(),"annotations",e),e.isChanged},getAnnotations:function(){return o.annotations}}},e.famdiagram.NeighboursSelectionModeOptionTask=function(t,n){var o={},i=new e.common.ObjectReader({neighboursSelectionMode:new e.common.EnumerationReader(e.common.NeighboursSelectionMode,!1,n.neighboursSelectionMode)});return{process:function(){var e={isChanged:!1};return o=i.read(o,t.getOptions(),"options",e),e.isChanged},getNeighboursSelectionMode:function(){return o.neighboursSelectionMode}}},e.famdiagram.HideGrandParentsConnectorsOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({hideGrandParentsConnectors:new e.common.ValueReader(["boolean"],!1,n.hideGrandParentsConnectors)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o}}},e.famdiagram.ItemsOptionTask=function(t,n){var o={},i={},a={},r=new e.common.ObjectReader({items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),parents:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0),isActive:new e.common.ValueReader(["boolean"],!1,n.isActive)}),!0,"id",!0)});return{process:function(){var e={isChanged:!1,hash:i,sourceHash:a};return o=r.read(o,t.getOptions(),"options",e),e.isChanged},getItems:function(){return o.items},getConfig:function(e){return a["options-items"][e]}}},e.famdiagram.LinePaletteOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({linesPalette:new e.common.ArrayReader(new e.common.ObjectReader({lineColor:new e.common.ValueReader(["string"],!1,n.lineColor),lineWidth:new e.common.ValueReader(["number"],!1,n.lineWidth),lineType:new e.common.EnumerationReader(e.common.LineType,!1,n.lineType)}),!1)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o}}},e.famdiagram.NormalizeOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({groupByType:new e.common.EnumerationReader(e.common.GroupByType,!1,n.groupByType),alignBylevels:new e.common.ValueReader(["boolean"],!1,n.alignBylevels)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o}}},e.famdiagram.OptionsTask=function(e){return{process:function(){return!0},getOptions:e,description:"Raw options."}},e.famdiagram.OrderFamilyNodesOptionTask=function(t,n,o){var i={},a={},r=new e.common.ObjectReader({enableMatrixLayout:new e.common.ValueReader(["boolean"],!1,n.enableMatrixLayout),minimumMatrixSize:new e.common.ValueReader(["number"],!1,n.minimumMatrixSize),maximumColumnsInMatrix:new e.common.ValueReader(["number"],!1,n.maximumColumnsInMatrix),items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),position:new e.common.ValueReader(["number"],!0),relativeItem:new e.common.ValueReader(["string","number"],!0),placementType:new e.common.EnumerationReader(e.common.AdviserPlacementType,!1,o.placementType),primaryParent:new e.common.ValueReader(["string","number"],!0)}),!0,"id")});return{process:function(){var e={isChanged:!1,hash:a};return i=r.read(i,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return i}}},e.famdiagram.RemoveLoopsOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({loopsLayoutMode:new e.common.EnumerationReader(e.common.LoopsLayoutMode,!1,n.loopsLayoutMode)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o}}},e.famdiagram.SpousesOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),spouses:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0)}),!0,"id")});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getItems:function(){return o.items}}},e.famdiagram.VisualTreeOptionTask=function(e){var t={leavesPlacementType:2,childrenPlacementType:2,maximumColumnsInMatrix:6,horizontalAlignment:0};return{process:function(){return!1},getOptions:function(){return t}}},e.famdiagram.CombinedTemplateParamsTask=function(e,t){return{process:function(){return!0},getTemplateParams:function(n){return e.getTemplateParams(n)||t.getTemplateParams(n)}}},e.famdiagram.LabelAnnotationTemplateParamsTask=function(t,n,o){var i={items:{}};return{process:function(){var a,r,s=t.getOptions(),l=n.getAnnotations();for(i.items={},a=0,r=l.length;a<r;a+=1){var m=l[a],c=new e.orgdiagram.TemplateParams,h=o.getTemplate(m.templateName,s.defaultLabelAnnotationTemplate,o.DefaultWidgetLabelAnnotationTemplateName);c.template=h,i.items[m.id]=c}return!0},getTemplateParams:function(e){return i.items[e]}}},e.famdiagram.BaseTransformer=function(e){this.debug=e},e.famdiagram.BaseTransformer.prototype.validate=function(e,t){if(!e.validate())throw"Family structure failed to pass validation!";e.loop(this,(function(n,o){e.loopChildren(this,n,(function(n,i,a){if(null===i.level||null===o.level||(t?i.level!=o.level+1:i.level<=o.level))throw"Family tree is broken. Children/Parents or levels mismatch!";return e.SKIP}))}))},e.famdiagram.FamilyBalance=function(){},e.famdiagram.FamilyBalance.prototype.balance=function(t){var n={maximumId:null,treeLevels:e.common.TreeLevels(),bundles:[],connectorStacks:[]},o={orgTree:e.common.tree(),maximumId:t.maximumId,orgPartners:{},itemByChildrenKey:{},minimumLevel:null,maximumLevel:null};this.createOrgTree(t,o);var i,a=-1;return o.orgTree.loopLevels(this,(function(e,o,r){var s=t.logicalFamily.node(e);null!=s&&(i!==r&&(i=r,a+=1),n.treeLevels.addItem(a,e,s))})),this.recalcLevelsDepth(n.bundles,n.connectorStacks,n.treeLevels,t.logicalFamily),n.maximumId=o.maximumId,n},e.famdiagram.FamilyBalance.prototype.Family=function(e){this.id=null,this.familyPriority=1,this.childFamilies=[],this.items=[],this.links=[],this.backLinks=[],1==arguments.length&&(this.id=e)},e.famdiagram.FamilyBalance.prototype.FamLink=function(e,t){this.fromItem=e,this.toItem=t},e.famdiagram.FamilyBalance.prototype.createOrgTree=function(t,n){var o,i,a,r,s,l,m,c,h,u,d,g,p,f,T,y,k,v,w,C,b,P,O,S,I,x=[],A=[];if(t.logicalFamily.hasNodes()>0){if(S={},g=0,I=[],t.logicalFamily.loopRoots(this,(function(e,o){p=new this.Family(g),this.extractOrgChart(e,t.logicalFamily,t.primaryParents,n.orgTree,n.orgPartners,n.itemByChildrenKey,S,p),A.push(p),I.push(p),g+=1})),I.sort((function(e,t){var n=e.items[0].level,o=t.items[0].level;return n!=o?n-o:t.items.length-e.items.length})),x=[],u={},A.length>0){for(s=e.common.graph(),o=0,i=A.length;o<i;o+=1)for(a=0,r=(p=A[o]).links.length;a<r;a+=1)l=p.links[a],(c=t.logicalFamily.node(l.fromItem).familyId)!=(h=t.logicalFamily.node(l.toItem).familyId)&&(s.addEdge(c,h,{weight:0}),s.edge(c,h).weight+=1),A[h].backLinks.push(new this.FamLink(l.toItem,l.fromItem));for(;x.length<A.length;)for(o=0,i=I.length;o<i;o+=1)p=I[o],u.hasOwnProperty(p.id)||(null!=(C=s.getSpanningTree(p.id,(function(e){return-e.weight}))).node(p.id)?(C.loopPostOrder(this,(function(e,t,n,o){var i=A[e],a=A[n],r=[];null!=n&&(a.familyPriority=a.familyPriority+i.familyPriority),r=[],C.loopChildren(this,e,(function(e,t,n){r.push(e)})),r.sort((function(e,t){return A[e].familyPriority-A[t].familyPriority})),C.arrangeChildren(e,r)})),C.loopPreOrder(this,(function(e,t){x.push(e),u[e]=!0}))):(x.push(p.id),u[p.id]=!0))}for(n.maximumId+=1,O=new e.famdiagram.FamilyBalanceItem(n.maximumId,null,n.minimumLevel-1),n.orgTree.add(null,O.id,O),d={},o=0,i=x.length;o<i;o+=1){for(k={},v=O,w=0,m=(p=A[x[o]]).links.concat(p.backLinks),a=0;a<m.length;a+=1)l=m[a],T=n.orgTree.node(l.toItem),n.orgTree.node(l.fromItem),!0===d[T.familyId]&&(f=p.items[0],(y=T).level>=f.level&&n.orgTree.loopParents(this,y.id,(function(e,t){if(y=t,t.level<f.level)return!0})),k.hasOwnProperty(y.id)?k[y.id]+=1:k[y.id]=1,w<k[y.id]&&(v=y,w=k[y.id]));this.attachFamilyToOrgChart(n,v,p),d[p.id]=!0}b=this.getExtraGravity(n),P=this.getGrandChildren(n),this.balanceOrgTree(n.orgTree,b,P,t.itemsPositions,t.itemsGroups)}},e.famdiagram.FamilyBalance.prototype.getGrandChildren=function(e){var t={};return e.orgTree.loopPostOrder(this,(function(n,o,i,a){var r;if(e.minimumLevel=null!=e.minimumLevel?Math.min(e.minimumLevel,o.level):o.level,e.maximumLevel=null!=e.maximumLevel?Math.max(e.maximumLevel,o.level):o.level,null!=i&&(t[i]||(t[i]={}),r=o.level-1,t[i][r]?t[i][r]+=1:t[i][r]=1,null!=t[n]))for(r in t[n])t[n].hasOwnProperty(r)&&(t[i][r]?t[i][r]+=t[n][r]:t[i][r]=t[n][r])})),t},e.famdiagram.FamilyBalance.prototype.balanceOrgTree=function(t,n,o,i,a){var r,s,l,m,c,h,u,d,g,p,f;t.loopLevels(this,(function(T,y,k){var v,w=e.common.graph(),C={},b=null;if(u=[],t.loopChildren(this,y.id,(function(e,o,i){var a;if(null==b&&(b=o),C[o.id]={},n.hasOwnProperty(o.id))for(a in h=n[o.id])if(h.hasOwnProperty(a))for(p=h[a],C[o.id][a]={},r=0,s=p.length;r<s;r+=1)c=p[r],v=c.commonParent==y.id?c.toParent:t.node(c.fromParent).childIndex<t.node(c.toParent).childIndex?"__right__":"__left__",o.id!=v&&(w.addEdge(o.id,v,{weight:0}),w.edge(o.id,v).weight+=1,null==C[o.id][a][v]&&(C[o.id][a][v]=0),C[o.id][a][v]+=1);i>0&&w.addEdge(o.id,b.id,{weight:0})})),null!=b)for(f=[],w.getTotalWeightGrowthSequence(this,(function(e){return e.weight}),(function(e){f.push(e)})),0===f.length&&(f=[b.id]),d=this.balanceItems(f,"__left__","__right__",C,o,i,a),l=0,m=d.length;l<m;l+=1)(g=t.node(d[l])).childIndex=l,u.push(g.id);t.arrangeChildren(y.id,u)}))},e.famdiagram.FamilyBalance.prototype.balanceItems=function(t,n,o,i,a,r,s){var l,m,c,h,u,d,g,p,f,T,y,k,v,w,C,b,P,O,S,I,x,A,L,M,R,z,B,D,V,F=[],H=e.common.LinkedHashItems(),N=0,E={},W={};for(g=[n,null,o],l=0;l<g.length;l+=1)d=g[l],h=N++,(u=new e.famdiagram.Slot(d)).position=l,H.add(h,u),null!==d&&(W[d]=h);for(l=0;l<t.length;l+=1)if((d=t[l])!=n&&d!=o)for(x in p=null,f=null,T=null,y=null,k=null,v=null,m=null,c=null,s.hasOwnProperty(d)&&(B=s[d],E.hasOwnProperty(B)&&(R=r[d],m=(D=E[B]).previousContext(R),c=D.nextContext(R))),H.iterate((function(e,t){var n,o,r,s;if(null==e.itemId){for(n in O=a[d],w=0,C=0,b=0,P=0,e.crossings)e.crossings.hasOwnProperty(n)&&(O&&null!=O[n]&&(w+=e.crossings[n]*O[n]),P+=e.crossings[n]);for(n in i[d])if(i[d].hasOwnProperty(n))for(o in r=i[d][n])r.hasOwnProperty(o)&&W.hasOwnProperty(o)&&null!=(s=H.item(W[o]))&&(s.position<e.position?(w+=(e.left[n]||0)-(s.left[n]||0),b+=Math.abs(s.balance+1)):(w+=(e.right[n]||0)-(s.right[n]||0),b+=Math.abs(s.balance-1)),C+=Math.abs(s.position-e.position));(null==T||T>w||T==w&&(y>C||y==C&&(k>b||k==b&&v>P)))&&(p=t,T=w,f=e,y=C,k=b,v=P)}}),m,c),H.insertBefore(p,N++,f.clone(null)),W[d]=N,I=N,S=f.clone(d),r.hasOwnProperty(d)&&(B=s[d],E.hasOwnProperty(B)||(E[B]=e.common.SortedList()),(D=E[B]).add(r[d],N)),H.insertBefore(p,N++,S),S.position=0,z=0,H.iterate((function(e,t){var n,o;if(t!=I){for(n in o=a[d])o.hasOwnProperty(n)&&(e.left[n]?e.left[n]+=o[n]:e.left[n]=o[n]);z+=1,e.position=z}}),I),z=0,H.iterateBack((function(e,t){var n,o;if(t!=I){for(n in o=a[d],a[d])a[d].hasOwnProperty(n)&&(e.right[n]?e.right[n]+=o[n]:e.right[n]=o[n]);z-=1,e.position=z}}),I),i[d])if(i[d].hasOwnProperty(x))for(L in A=i[d][x])A.hasOwnProperty(L)&&W.hasOwnProperty(L)&&(V=W[L],null!=(M=H.item(V))&&(M.position<0?(M.balance+=1,S.balance-=1,H.iterateBack((function(e,t){t!=I&&t!=V&&(e.crossings[x]?e.crossings[x]+=A[L]:e.crossings[x]=A[L])}),I,V)):(M.balance-=1,S.balance+=1,H.iterate((function(e,t){t!=I&&t!=V&&(e.crossings[x]?e.crossings[x]+=A[L]:e.crossings[x]=A[L])}),I,V))));return H.iterate((function(e){var t=e.itemId;null!=t&&t!=n&&t!=o&&F.push(t)})),F},e.famdiagram.FamilyBalance.prototype.ExtraGravity=function(e){this.commonParent=null,this.fromParent=null,this.toParent=null,this.level=e},e.famdiagram.FamilyBalance.prototype.getExtraGravity=function(e){var t,n,o,i,a,r,s={};for(t in e.orgPartners)if(e.orgPartners.hasOwnProperty(t))for(n=e.orgTree.node(t),o=0,i=(a=e.orgPartners[t]).length;o<i;o+=1)r=e.orgTree.node(a[o]),this.addExtraGravitiesForConnection(e.orgTree,s,r,n);return s},e.famdiagram.FamilyBalance.prototype.addExtraGravitiesForConnection=function(e,t,n,o){var i=new this.ExtraGravity(n.level),a=new this.ExtraGravity(o.level);e.zipUp(this,n.id,o.id,(function(e,n,o,r){if(this.addExtraGravityForItem(t,e,i),this.addExtraGravityForItem(t,o,a),n==r)return i.commonParent=n,i.fromParent=e,i.toParent=o,a.commonParent=n,a.fromParent=o,a.toParent=e,!0}))},e.famdiagram.FamilyBalance.prototype.addExtraGravityForItem=function(e,t,n){e.hasOwnProperty(t)||(e[t]={}),null==e[t][n.level]&&(e[t][n.level]=[]),e[t][n.level].push(n)},e.famdiagram.FamilyBalance.prototype.attachFamilyToOrgChart=function(t,n,o){var i,a=o.items[0],r=null,s=n;for(i=n.level+1;i<a.level;i+=1)t.maximumId+=1,r=new e.famdiagram.FamilyBalanceItem(t.maximumId,null,i),t.orgTree.add(s.id,r.id,r),o.items.push(r),s=r;a.hideParentConnection=!0,t.orgTree.adopt(s.id,a.id,a)},e.famdiagram.FamilyBalance.prototype.extractOrgChart=function(t,n,o,i,a,r,s,l){var m,c,h,u,d,g=[],p=n.node(t);for(d=new e.famdiagram.FamilyBalanceItem(p.id,l.id,p.level),i.add(null,d.id,d),l.items.push(d),s[p.id]=p,p.familyId=l.id,g=this.extractChildren(p,n,o,i,a,r,s,l);g.length>0;){for(h=[],m=0,c=g.length;m<c;m+=1)u=g[m],h=h.concat(this.extractChildren(u,n,o,i,a,r,s,l));g=h}},e.famdiagram.FamilyBalance.prototype.extractChildren=function(t,n,o,i,a,r,s,l){var m,c=[],h=null,u=null;if(1==n.countChildren(t.id)&&(h=n.firstChild(t.id)),null!=r[h])null==a[(u=r[h]).id]&&(a[u.id]=[]),a[u.id].push(t.id),l.links.push(new this.FamLink(t.id,h));else{if(null!=h){if(o.hasOwnProperty(h)){var d=o[h];if(d!=t.id)return null==a[d]&&(a[d]=[]),a[d].push(t.id),l.links.push(new this.FamLink(t.id,h)),c}r[h]=t}n.loopChildren(this,t.id,(function(o,a,r){if(s[a.id])throw"Many to many relations should not exist at this stage";return c.push(a),m=new e.famdiagram.FamilyBalanceItem(a.id,l.id,a.level),i.add(t.id,m.id,m),l.items.push(m),s[a.id]=!0,a.familyId=l.id,n.SKIP}))}return c},e.famdiagram.FamilyBalance.prototype.recalcLevelsDepth=function(t,n,o,i){var a,r,s,l,m,c,h,u,d,g,p={};o.loopLevels(this,(function(f,T){var y=new e.orgdiagram.TreeLevelConnectorStackSize;if(n[f]=y,h=[],o.loopLevelItems(this,f,(function(n,o,a){var r=[],s=[],l=null;p.hasOwnProperty(n)||(p[n]=!0,o.hideChildrenConnection?l=n:r.push(n),i.loopChildren(this,n,(function(e,t,n){return i.loopParents(this,e,(function(e,t){return p.hasOwnProperty(e)||(p[e]=!0,t.hideChildrenConnection?l=e:r.push(e)),i.SKIP})),t.hideParentConnection?l=e:s.push(e),i.SKIP})),(r.length>1||s.length>0)&&(c=new e.common.VerticalConnectorBundle(r,s,l),t.push(c),r.length>1&&h.push(c)))})),h.length>0){for(g=e.common.pile(),a=0,r=h.length;a<r;a+=1){for(c=h[a],u=null,d=null,s=0,l=c.fromItems.length;s<l;s+=1)m=o.getItemPosition(c.fromItems[s]),u=null!=u?Math.min(u,m):m,d=null!=d?Math.max(d,m):m;g.add(u,d,c)}y.parentsStackSize=g.resolve(this,(function(e,t,n,o,i){n.fromOffset=o+1,n.fromStackSize=i}))}}))},e.famdiagram.FamilyBalanceItem=function(e,t,n){this.id=e,this.familyId=t,this.level=n,this.childIndex=0},e.famdiagram.FamilyMatrixesExtractor=function(t){this.parent=e.famdiagram.BaseTransformer.prototype,this.parent.constructor.apply(this,arguments)},e.famdiagram.FamilyMatrixesExtractor.prototype=new e.famdiagram.BaseTransformer,e.famdiagram.FamilyMatrixesExtractor.prototype.extract=function(t,n,o,i,a,r){return n.hasNodes()>0&&t.enableMatrixLayout&&n.groupBy(this,Math.max(2,t.minimumMatrixSize),(function(s,l,m,c){var h=r+=1,u=r+=1,d=n.node(m[0]),g=new e.famdiagram.FamilyItem({id:h,level:d.level,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+h,description:"This is item used as aggregator of matrixed nodes."},levelGravity:1,hideParentConnection:!0,hideChildrenConnection:!0});i[h]=u;for(var p=0,f=m.length;p<f;p+=1){var T=m[p];n.removeNode(T)}null!=s?(n.add([s],h,g),g.hideParentConnection=!1,a.push(new e.common.MatrixConnectorBundle(!0,m,h,h,this.getMatrixWidth(t.maximumColumnsInMatrix,m.length)))):n.add(null,h,g),null!=l&&(n.adopt([h],l),g.hideChildrenConnection=!1,a.push(new e.common.MatrixConnectorBundle(!1,m,h,u,this.getMatrixWidth(t.maximumColumnsInMatrix,m.length)))),o[h]=c})),r},e.famdiagram.FamilyMatrixesExtractor.prototype.getMatrixWidth=function(e,t){return Math.min(e,Math.ceil(Math.sqrt(t)))},e.famdiagram.FamilyNormalizer=function(t){this.parent=e.famdiagram.BaseTransformer.prototype,this.parent.constructor.apply(this,arguments)},e.famdiagram.FamilyNormalizer.prototype=new e.famdiagram.BaseTransformer,e.famdiagram.FamilyNormalizer.prototype.normalize=function(t,n,o){if(n.hasNodes()>0){if(n.loopLevels(this,1==t.groupByType,(function(e,t,n){t.level=n})),n.optimizeReferences((function(){return o+=1,new e.famdiagram.FamilyItem({id:o,isVisible:!1,isActive:!1,itemConfig:{title:"bundle #"+o,description:" This item was created by references optimizer."},levelGravity:2})})),this.debug&&!n.validate())throw"References are broken in family structure!";if(this.debug&&n.hasLoops())throw"Structure has loops!";if(n.eliminateManyToMany((function(){return o+=1,new e.famdiagram.FamilyItem({id:o,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+o,description:"This is item used to eliminate M:M relations."},levelGravity:2,hideParentConnection:!1,hideChildrenConnection:!1})})),this.debug&&!n.validate())throw"References are broken in family structure!";t.alignBylevels?this.resortItemsBylevels(n):n.loopLevels(this,1==t.groupByType,(function(e,t,n){t.level=n})),this.debug&&this.validate(n,!1),this.fillInItems(n,(function(t){return o+=1,new e.famdiagram.FamilyItem({id:o,levelGravity:2,isVisible:!1,isActive:!1,itemConfig:{title:"extension #"+o,description:"This is item used to fill gaps in levels."}})})),this.debug&&this.validate(n,!0)}return o},e.famdiagram.FamilyNormalizer.prototype.resortItemsBylevels=function(e){var t,n,o=[],i=null,a=null;for(e.loop(this,(function(e,t){t.originalLevel=t.level,t.level=null,null!=t.originalLevel&&(o[t.originalLevel]||(o[t.originalLevel]={}),o[t.originalLevel][e]=t,i=null!=i?Math.min(t.originalLevel,i):t.originalLevel,a=null!=a?Math.max(t.originalLevel,a):t.originalLevel)})),t=i;t<=a;t+=1)n=o[t],this.setLevelsForItems(n,e);e.loopTopo(this,(function(t,n,o){var i;1==n.levelGravity&&(i=null,e.loopParents(this,t,(function(t,n,o){return i=null==i?n.level+1:Math.max(n.level+1,i),e.SKIP})),n.level=i||n.level)}))},e.famdiagram.FamilyNormalizer.prototype.setLevelsForItems=function(t,n){var o,i,a,r=0;for(o in t)t.hasOwnProperty(o)&&n.loopParents(this,o,(function(e,t,o){return r=Math.max(t.level+1,r),n.SKIP}));for(o in t)t.hasOwnProperty(o)&&((i=t[o]).level=r);for(;!e.common.isEmptyObject(t);){for(o in a={},t)t.hasOwnProperty(o)&&(i=t[o],n.loopChildren(this,o,(function(e,t,o){return(null==t.originalLevel||t.isLevelNeutral)&&(t.level=null==t.level?i.level+1:Math.max(t.level,i.level+1),a[e]=t),n.SKIP})));t=a}},e.famdiagram.FamilyNormalizer.prototype.fillInItems=function(e,t){var n;e.loop(this,(function(o,i){for(var a,r=!0;r;)r=!1,a=[],e.loopParents(this,o,(function(t,n,o){return i.level-1>n.level&&a.push(t),e.SKIP})),a.length>1&&((n=t(i)).level=i.level-1,n.hideParentConnection=!1,n.hideChildrenConnection=!1,e.bundleParents(o,a,n.id,n),r=!0,o=n.id,i=n)})),e.loop(this,(function(o,i){for(var a,r=!0,s=!0;r;)r=!1,a=[],e.loopChildren(this,o,(function(t,n,o){return i.level+1<n.level?a.push(t):s=!1,e.SKIP})),a.length>1&&((n=t(i)).level=i.level+1,s&&(n.hideParentConnection=!1,n.hideChildrenConnection=!1),e.bundleChildren(o,a,n.id,n),r=!0,o=n.id,i=n)})),e.loop(this,(function(o,i){for(var a,r=!0;r;)r=!1,a=[],e.loopParents(this,o,(function(t,n,o){return i.level-1>n.level&&a.push(t),e.SKIP})),a.length>0&&((n=t(i)).level=i.level-1,n.hideParentConnection=!1,n.hideChildrenConnection=!1,e.bundleParents(o,a,n.id,n),r=!0,o=n.id,i=n)}))},e.famdiagram.UserDefinedNodesOrder=function(){},e.famdiagram.UserDefinedNodesOrder.prototype.getUserDefinedPositions=function(t){var n,o,i,a=e.common.tree(),r={};for(o=0,i=t.length;o<i;o+=1)null!=(n=t[o]).relativeItem&&(r[n.relativeItem]=!0),null!=n.id&&(r[n.id]=!0);for(o=0,i=t.length;o<i;o+=1)if(n=t[o],r.hasOwnProperty(n.id)){var s=n.relativeItem||null;a.add(s,n.id,n)}function l(e,t){this.position=e,this.items=t}var m={},c={},h={};a.loopPostOrder(this,(function(e,t,n,o){var i,a=[],r=c[e],s=h[e];if(null!=r)for(r.sort((function(e,t){return t.position-e.position})),i=0;i<r.length;i+=1)a=a.concat(r[i].items);if(a.push(e),null!=s)for(s.sort((function(e,t){return e.position-t.position})),i=0;i<s.length;i+=1)a=a.concat(s[i].items);null!=n?2==t.placementType?(c.hasOwnProperty(n)||(c[n]=[]),c[n].push(new l(t.position,a))):(h.hasOwnProperty(n)||(h[n]=[]),h[n].push(new l(t.position,a))):m[e]=a}));var u={},d={};for(var g in m)if(m.hasOwnProperty(g))for(t=m[g],o=0;o<t.length;o+=1){var p=t[o];u[p]=o,d[p]=g}return{position:u,group:d}},e.famdiagram.UserDefinedPrimaryParents=function(){},e.famdiagram.UserDefinedPrimaryParents.prototype.getUserDefinedPrimaryParents=function(e,t){var n,o,i={},a={};for(n=0,o=e.length;n<o;n+=1){var r=e[n];null!=r.primaryParent&&(a[r.id]=r.primaryParent)}for(var s in a)for(var l=a[s],m={},c=[s];c.length>0;){var h=[];for(n=0,o=c.length;n<o;n+=1)s=c[n],t.loopParents(this,s,(function(e,n){if(m[e]=s,e==l){for(;null!=m[e];)i[m[e]]=e,e=m[e];return h=[],t.BREAK}return 0==n.isVisible&&h.push(e),t.SKIP}));c=h}return i},e.common.BaseLayout=function(e,t){if(this._children={},null!=this.params)for(var n in this.params)this.params.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(this.params[n]=e[n]);if(null!=this.options){for(n in this.options)this.options.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(this.options[n]=t[n]);this.options.shifts=this.getShifts(this.options),this.options.intervals=this.getIntervals(this.options)}},e.common.BaseLayout.prototype.add=function(e,t){this._children[e]=t},e.common.BaseLayout.prototype.getLayout=function(e){return this._children[e]||null},e.common.BaseLayout.prototype.getShifts=function(e){var t=[];return t[1]=e.normalLevelShift,t[2]=e.dotLevelShift,t[3]=e.lineLevelShift,t[4]=e.lineLevelShift,t},e.common.BaseLayout.prototype.getIntervals=function(e){var t=[];return t[1]=e.normalItemsInterval,t[2]=e.dotItemsInterval,t[3]=e.lineItemsInterval,t[4]=e.lineItemsInterval,t},e.common.BaseLayout.prototype.getItemSize=function(t,n,o,i){var a,r,s;switch(t){case 1:if(a=o.template.templateConfig,r=new e.common.Size(a.itemSize),s=new e.common.Rect(0,0,r.width,r.height),n&&(r.height+=a.cursorPadding.top+a.cursorPadding.bottom,r.width+=a.cursorPadding.left+a.cursorPadding.right,s.x=a.cursorPadding.left,s.y=a.cursorPadding.top),o.hasSelectorCheckbox&&(r.height+=i.checkBoxPanelSize),o.hasButtons)switch(r.width+=i.buttonsPanelSize,i.groupTitlePlacementType){case 3:s.x+=i.buttonsPanelSize}if(o.hasGroupTitle)switch(r.width+=i.groupTitlePanelSize,i.groupTitlePlacementType){case 3:break;default:s.x+=i.groupTitlePanelSize}break;case 2:a=o.template.templateConfig,r=new e.common.Size(a.minimizedItemSize);break;case 3:case 4:r=new e.common.Size}switch(i.orientationType){case 2:case 3:r.invert()}return{actualSize:r,contentPosition:s}},e.famdiagram.FamilyLayout=function(t,n){this.params={logicalFamily:null,treeLevels:null,getConnectorsStacksSizes:null,isItemSelected:null,cursorItemId:null,getTemplateParams:null},this.options={verticalAlignment:1,pageFitMode:0,minimalVisibility:2,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2},this.data={treeItemsPositions:{},treeLevelsPositions:[]},this.parent=e.common.BaseLayout.prototype,this.parent.constructor.apply(this,arguments)},e.famdiagram.FamilyLayout.prototype=new e.common.BaseLayout,e.famdiagram.FamilyLayout.prototype.measure=function(t){var n,o,i=new e.common.Rect(0,0,0,0),a={treeItemsPositions:{},treeLevelsPositions:[]};switch(this.options.orientationType){case 2:case 3:t.invert()}if(!this.params.treeLevels.isEmpty())switch(this.options.pageFitMode){case 0:case e.common.PageFitMode.PrintPreview:case 5:n=[new e.orgdiagram.LevelVisibility(0,1)],i=this.setTreeLevelsVisibilityAndPositionTreeItems(a,this.params,this.options,n,0);break;default:n=this.getLevelVisibilities(this.params.treeLevels,this.options.minimalVisibility),o=this.setTreeLevelsVisibilityAndPositionTreeItems(a,this.params,this.options,n,n.length-1),this.checkDiagramSize(o,t,this.options.pageFitMode)?(o.addRect(t),o.offset(0,0,5,5),this.findOptimalSize(this,n.length-1,(function(e){return i=this.setTreeLevelsVisibilityAndPositionTreeItems(a,this.params,this.options,n,e),this.checkDiagramSize(i,o,this.options.pageFitMode)}))):i=o}return this.data=a,i},e.famdiagram.FamilyLayout.prototype.getLevelVisibilities=function(t,n){var o=[new e.orgdiagram.LevelVisibility(0,1)],i=[];switch(n){case 1:break;case 2:i.push(2);break;case 0:case 3:case 4:i.push(2),i.push(3)}return t.loopLevelsReversed(this,(function(t,n){for(var a=0;a<i.length;a+=1)o.push(new e.orgdiagram.LevelVisibility(t,i[a]))})),o},e.famdiagram.FamilyLayout.prototype.findOptimalSize=function(e,t,n){var o,i=0;if(!n.call(e,i)){for(o=t;t-i>1;)o=Math.floor((t+i)/2),n.call(e,o)?t=o:i=o;t!==o&&n.call(e,t)}},e.famdiagram.FamilyLayout.prototype.setTreeLevelsVisibilityAndPositionTreeItems=function(t,n,o,i,a){var r,s;for(t.treeLevelsPositions=[],n.treeLevels.loopLevels(this,(function(n,o){var i=new e.orgdiagram.TreeLevelPosition;i.currentvisibility=1,t.treeLevelsPositions.push(i)})),r=0;r<=a;r+=1)s=i[r],t.treeLevelsPositions[s.level].currentvisibility=s.currentvisibility;return t.treeItemsPositions={},this.recalcItemsSize(n.treeLevels,t.treeItemsPositions,t.treeLevelsPositions,n.isItemSelected,n.cursorItemId,n.getTemplateParams,o),this.setOffsets(n.treeLevels,t.treeItemsPositions,t.treeLevelsPositions,n.logicalFamily,o.intervals),this.recalcLevelsDepth(n.treeLevels,t.treeItemsPositions,t.treeLevelsPositions,o.verticalAlignment),this.shiftLevels(t.treeLevelsPositions,o.shifts[3],o.shifts,o.arrowsDirection,o.linesWidth,n.getConnectorsStacksSizes),this.getLayoutSize(n.treeLevels,t.treeItemsPositions,t.treeLevelsPositions)},e.famdiagram.FamilyLayout.prototype.checkDiagramSize=function(e,t,n){var o=!1;switch(n){case 1:t.width>=e.width&&(o=!0);break;case 2:t.height>=e.height&&(o=!0);break;case 3:t.height>=e.height&&t.width>=e.width&&(o=!0)}return o},e.famdiagram.FamilyLayout.prototype.getLayoutSize=function(t,n,o){return new e.common.Rect(0,0,Math.round(this.getLayoutWidth(t,n)),Math.round(this.getLayoutHeight(o)))},e.famdiagram.FamilyLayout.prototype.getLayoutWidth=function(e,t){var n=0;return e.loopLevels(this,(function(o,i){var a=e.getLevelLength(o);if(a>0){var r=e.getItemAtPosition(o,a-1),s=t[r];n=Math.max(n,s.offset+s.actualSize.width+s.rightPadding)}})),n},e.famdiagram.FamilyLayout.prototype.getLayoutHeight=function(e){var t=e[e.length-1];return t.shift+t.nextLevelShift},e.famdiagram.FamilyLayout.prototype.recalcItemsSize=function(t,n,o,i,a,r,s){t.loopLevels(this,(function(l,m){var c=o[l];t.loopLevelItems(this,l,(function(t,o,l){var m=new e.orgdiagram.TreeItemPosition,h=this.getLayout(t);if(null==h){var u=i(t)?1:o.isVisible?0:4,d=r(t),g=0===u?c.currentvisibility:u,p=this.getItemSize(g,a==t,d,s);m.actualVisibility=g,m.actualSize=p.actualSize,m.contentPosition=p.contentPosition}else p=h.measure(c.currentvisibility),m.actualVisibility=4,m.actualSize=p;n[t]=m}))}))},e.famdiagram.FamilyLayout.prototype.recalcLevelsDepth=function(e,t,n,o){var i,a;e.loopLevels(this,(function(r,s){var l=n[r];switch(l.shift=0,l.depth=0,l.actualVisibility=4,i=null,a=null,e.loopLevelItems(this,r,(function(e,n,o){var r=t[e];switch(l.depth=Math.max(l.depth,r.actualSize.height),r.actualVisibility){case 2:case 3:case 4:a=a?Math.min(a,r.actualSize.height):r.actualSize.height;break;default:i=i?Math.min(i,r.actualSize.height):r.actualSize.height}l.actualVisibility=Math.min(l.actualVisibility,r.actualVisibility)})),null==i&&(i=l.depth),null!=a&&a>i&&(i=a),o){case 0:l.horizontalConnectorsDepth=i/2;break;case 1:l.horizontalConnectorsDepth=l.depth/2;break;case 2:l.horizontalConnectorsDepth=l.depth-i/2}}))},e.famdiagram.FamilyLayout.prototype.shiftLevels=function(e,t,n,o,i,a){var r,s,l,m,c=0,h=0,u=8*i;switch(o){case 1:c=u,h=0;break;case 2:c=0,h=u}for(r=0,s=e.length;r<s;r+=1)l=e[r],m=a(r),t+=l.setShift(t,n[l.actualVisibility],h,c,m.parentsStackSize)},e.famdiagram.FamilyLayout.prototype.setOffsets=function(t,n,o,i,a){var r,s;for(r=0,s=o.length;r<s;r+=1)o[r].currentOffset=0;var l=i.getPlanarFamily(t),m=new e.common.FamilyAlignment(this,l,t,(function(e,t){var o=n[e],i=a[o.actualVisibility]/2;return o.leftPadding=i,o.rightPadding=i,o.leftPadding+o.actualSize.width+o.rightPadding})),c=null;t.loopLevels(this,(function(e,o){var i=t.getItemAtPosition(e,0);if(null!=i){var a=n[i],r=m.getOffset(i)-a.leftPadding-a.actualSize.width/2;c=null==c?r:Math.min(c,r)}})),t.loopLevels(this,(function(e,o){t.loopLevelItems(this,e,(function(e,t,o){var i=n[e],a=m.getOffset(e);i.offset=a-i.actualSize.width/2,i.offset-=c}))}))},e.famdiagram.FamilyLayout.prototype.arrange=function(e,t){var n=null;null!=t&&this.params.treeLevels.loopLevels(this,(function(o,i){var a=this.data.treeLevelsPositions[o];this.params.treeLevels.loopLevelItems(this,o,(function(o,i,r){var s=this.data.treeItemsPositions[o],l=this.getItemPosition(s.actualVisibility,s.offset,s.actualSize,n,a,this.options.verticalAlignment);s.actualPosition=l.position,s.horizontalConnectorsShift=l.horizontalConnectorsShift,s.topConnectorShift=l.topConnectorShift,s.topConnectorInterval=l.topConnectorInterval,s.bottomConnectorShift=l.bottomConnectorShift,s.bottomConnectorInterval=l.bottomConnectorInterval,t.call(e,o,s);var m=this.getLayout(o);null!=m&&m.arrange(e,l.position,t)})),n=a}))},e.famdiagram.FamilyLayout.prototype.getItemPosition=function(t,n,o,i,a,r){var s=0;switch(t){case 1:switch(r){case 0:s=0;break;case 1:s=(a.depth-o.height)/2;break;case 2:s=a.depth-o.height}break;case 2:case 3:case 4:s=a.horizontalConnectorsDepth-o.height/2}return{position:new e.common.Rect(n,a.shift+s,o.width,o.height),horizontalConnectorsShift:a.shift+a.horizontalConnectorsDepth,topConnectorShift:null!=i?i.shift+i.connectorShift:null,topConnectorInterval:null!=i?i.levelSpace/2:null,bottomConnectorShift:a.shift+a.connectorShift,bottomConnectorInterval:a.levelSpace/2}},e.famdiagram.MatrixLayout=function(t,n){this.params={items:[],isItemSelected:null,cursorItemId:null,getTemplateParams:null,hideParentConnection:!1,hideChildrenConnection:!1},this.options={verticalAlignment:1,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2,maximumColumnsInMatrix:6},this.data={treeItemsPositions:{},columns:[],rows:[]},this.parent=e.common.BaseLayout.prototype,this.parent.constructor.apply(this,arguments)},e.famdiagram.MatrixLayout.prototype=new e.common.BaseLayout,e.famdiagram.MatrixLayout.prototype.Column=function(){this.depth=0,this.offset=0,this.leftPadding=0,this.rightPadding=0},e.famdiagram.MatrixLayout.prototype.Row=function(){this.depth=0,this.offset=0,this.horizontalConnectorsDepth=0,this.minimalDepth=null,this.dotsDepth=null},e.famdiagram.MatrixLayout.prototype.getMatrixWidth=function(e,t){return Math.min(e,Math.ceil(Math.sqrt(t)))},e.famdiagram.MatrixLayout.prototype.measure=function(e){var t={treeItemsPositions:{},columns:[],rows:[]};return this.measureItems(t,this.params,this.options,e),this.measureColumns(t,this.params,this.options),this.measureRows(t,this.params,this.options),this.data=t,this.getLayoutSize(t)},e.famdiagram.MatrixLayout.prototype.measureItems=function(t,n,o,i){for(var a=0,r=n.items.length;a<r;a+=1){var s=n.items[a],l=s.id,m=new e.orgdiagram.TreeItemPosition,c=n.isItemSelected(l)?1:s.isVisible?0:4,h=n.getTemplateParams(l),u=0===c?i:c,d=this.getItemSize(u,n.cursorItemId==l,h,o);m.actualVisibility=u,m.actualSize=d.actualSize,m.contentPosition=d.contentPosition,t.treeItemsPositions[l]=m}},e.famdiagram.MatrixLayout.prototype.measureColumns=function(e,t,n){var o,i,a,r=this.getMatrixWidth(n.maximumColumnsInMatrix,t.items.length);for(i=0,a=t.items.length;i<a;i+=1){var s=t.items[i].id,l=e.treeItemsPositions[s],m=n.intervals[l.actualVisibility]/2;l.leftPadding=m,l.rightPadding=m;var c=i%r;null==(o=e.columns[c])&&(o=new this.Column,e.columns[c]=o);var h=l.leftPadding+l.actualSize.width+l.rightPadding;o.depth=Math.max(o.depth,h)}var u=8*n.linesWidth,d=0;for(i=0,a=e.columns.length;i<a;i+=1){if(o=e.columns[i],i%2==0)switch(n.arrowsDirection){case 1:o.leftPadding=t.hideChildrenConnection?0:u,o.rightPadding=0;break;case 2:o.leftPadding=0,o.rightPadding=t.hideParentConnection?0:u}else switch(n.arrowsDirection){case 1:o.leftPadding=0,o.rightPadding=t.hideChildrenConnection?0:u;break;case 2:o.leftPadding=t.hideParentConnection?0:u,o.rightPadding=0}o.offset=d+o.leftPadding+o.depth/2,d=o.offset+o.depth/2+o.rightPadding}},e.famdiagram.MatrixLayout.prototype.measureRows=function(e,t,n){var o,i,a,r=this.getMatrixWidth(n.maximumColumnsInMatrix,t.items.length);for(o=0,i=t.items.length;o<i;o+=1){var s=t.items[o].id,l=e.treeItemsPositions[s],m=Math.floor(o/r),c=n.shifts[l.actualVisibility]/2;switch(null==(a=e.rows[m])&&(a=new this.Row,e.rows[m]=a),a.depth=Math.max(a.depth,c+l.actualSize.height+c),l.actualVisibility){case 2:case 3:case 4:a.dotsDepth=a.dotsDepth?Math.min(a.dotsDepth,l.actualSize.height):l.actualSize.height;break;default:a.minimalDepth=a.minimalDepth?Math.min(a.minimalDepth,l.actualSize.height):l.actualSize.height}}var h=0;for(o=0,i=e.rows.length;o<i;o+=1)switch((a=e.rows[o]).offset=h+a.depth/2,h=a.offset+a.depth/2,null==a.minimalDepth&&(a.minimalDepth=a.depth),null!=a.dotsDepth&&a.dotsDepth>a.minimalDepth&&(a.minimalDepth=a.dotsDepth),n.verticalAlignment){case 0:a.horizontalConnectorsDepth=a.minimalDepth/2;break;case 1:a.horizontalConnectorsDepth=a.depth/2;break;case 2:a.horizontalConnectorsDepth=a.depth-a.minimalDepth/2}},e.famdiagram.MatrixLayout.prototype.getLayoutSize=function(t){return new e.common.Rect(0,0,Math.round(this.getLayoutWidth(t)),Math.round(this.getLayoutHeight(t)))},e.famdiagram.MatrixLayout.prototype.getLayoutWidth=function(e){var t=0,n=e.columns.length;if(n>0){var o=e.columns[n-1];t=o.offset+o.depth/2+o.rightPadding}return t},e.famdiagram.MatrixLayout.prototype.getLayoutHeight=function(e){var t=0,n=e.rows.length;if(n>0){var o=e.rows[n-1];t=o.offset+o.depth/2}return t},e.famdiagram.MatrixLayout.prototype.arrange=function(e,t,n){if(null!=n)for(var o=this.getMatrixWidth(this.options.maximumColumnsInMatrix,this.params.items.length),i=0,a=this.params.items.length;i<a;i+=1){var r=this.params.items[i].id,s=i%o,l=this.data.columns[s],m=Math.floor(i/o),c=this.data.rows[m],h=this.data.treeItemsPositions[r],u=this.getItemPosition(h.actualVisibility,l,c,h.actualSize,this.options);u.translate(t.x,t.y),h.actualPosition=u,h.horizontalConnectorsShift=t.y+c.offset-c.depth/2+c.horizontalConnectorsDepth,h.leftMedianOffset=l.depth/2+l.leftPadding,h.rightMedianOffset=l.depth/2+l.rightPadding,h.topConnectorShift=c.depth/2,h.bottomConnectorShift=c.depth/2,n.call(e,r,h)}},e.famdiagram.MatrixLayout.prototype.getItemPosition=function(t,n,o,i,a){var r=0;switch(t){case 1:switch(a.verticalAlignment){case 0:r=0;break;case 1:r=(o.depth-i.height)/2;break;case 2:r=o.depth-i.height}break;case 2:case 3:case 4:r=o.horizontalConnectorsDepth-i.height/2}return new e.common.Rect(n.offset-i.width/2,o.offset-o.depth/2+r,i.width,i.height)},e.famdiagram.CursorNeighboursTask=function(t,n,o,i){var a={items:[]},r={},s=new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0);return{process:function(){var e={isChanged:!1,hash:r},l=t.getCursorTreeItem(),m=o.getLogicalFamily(),c=n.getNeighboursSelectionMode(),h=i.getActiveItems();return a.items=s.read(a.items,function(e,t,n,o){var i=[],a={};if(null!==e)switch(t){case 0:n.loopParents(this,e,(function(e,t){if(t.isVisible&&!a.hasOwnProperty(e)&&(a[e]=!0,i.push(e)),o.hasOwnProperty(e))return n.SKIP})),n.loopChildren(this,e,(function(e,t){if(t.isVisible&&!a.hasOwnProperty(e)&&(a[e]=!0,i.push(e)),o.hasOwnProperty(e))return n.SKIP}));break;case 1:n.loopNeighbours(this,e,(function(e,t){if(t.isVisible&&!a.hasOwnProperty(e)&&(a[e]=!0,i.push(e)),o.hasOwnProperty(e))return!0}))}return i}(l,c,m,h),"items",e),e.isChanged},getItems:function(){return a.items}}},e.famdiagram.SelectionPathItemsTask=function(e,t,n,o){var i={items:[]};return{process:function(){var a=o.getSelectionPathMode(),r=e.getLogicalFamily(),s=t.getCursorTreeItem(),l=n.getItems().slice(0);return l.push(s),i.items=function(e,t,n){var o,i,a,r=[],s={};for(i=0,a=e.length;i<a;i+=1)switch(o=e[i],n){case 0:break;case 1:t.loopParents(this,o,(function(e,n){if(null!=s[e])return t.SKIP;n.isVisible&&r.push(e),s[e]=!0}))}return r}(l,r,a),!0},getItems:function(){return i.items}}},e.famdiagram.AddLabelAnnotationsTask=function(t,n){var o={logicalFamily:null,maximumId:null};function i(e,t,n,o,i){var a,r,s,l,m,c=!0,h=null,u=[];for(s=0,l=o.length;s<l;s+=1){if(r=o[s],null==(a=t.edge(n,r))){c=!1;break}if(null==h)h=a.getFar(r);else if(h!=a.getFar(r)){c=!1;break}u.push(a.getNear(r))}if(c&&(m=i(),e.bundleParents(h,u,m.id,m)?(m.levelGravity=2,c=!0):e.bundleChildren(h,u,m.id,m)?(m.levelGravity=1,c=!0):e.bundleParents(h,o,m.id,m)?(m.levelGravity=2,c=!0):e.bundleParents(h,o,m.id,m)&&(m.levelGravity=1,c=!0),c))for(s=0,l=o.length;s<l;s+=1)r=o[s],(a=t.edge(n,r)).setFar(r,m.id)}return{process:function(a){var r=n.getLogicalFamily(),s=t.getAnnotations();if(function(t,n){var o,a,r,s,l,m=e.common.graph(),c={};if(n.length>0){for(s=0,l=n.length;s<l;s+=1)a=n[s],c.hasOwnProperty(a.fromItem)?c[a.fromItem].push(a):(c[a.fromItem]=[a],t.loopChildren(this,a.fromItem,(function(n,o,i){return m.addEdge(a.fromItem,n,new e.famdiagram.EdgeItem(a.fromItem,a.fromItem,n,n)),t.SKIP})),t.loopParents(this,a.fromItem,(function(n,o,i){return m.addEdge(n,a.fromItem,new e.famdiagram.EdgeItem(n,n,a.fromItem,a.fromItem)),t.SKIP})));for(r in c)if(c.hasOwnProperty(r))for((o=c[r]).sort((function(e,t){return t.toItems.length-e.toItems.length})),s=0;s<o.length;s+=1)a=o[s],i(t,m,a.fromItem,a.toItems,(function(){return new e.famdiagram.FamilyItem({id:a.id,isVisible:!0,isLevelNeutral:!0,isActive:!1,itemConfig:a})}))}}(r=r.clone(),s),o.logicalFamily=r,o.maximumId=t.getMaximumId(),a&&!r.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return o.logicalFamily},getMaximumId:function(){return o.maximumId}}},e.famdiagram.AddSpousesTask=function(t,n){var o={logicalFamily:null,maximumId:null};return{process:function(i){var a=n.getLogicalFamily(),r=n.getMaximumId(),s=t.getItems();if(r=function(t,n,o,i){var a,r,s,l,m,c,h,u;for(s=0,l=n.length;s<l;s+=1)for(m=n[s],u=m.spouses.slice(0),c=0,h=u.length;c<h;c+=1)a=[m.id,u[c]],t.hasCommonChild(a)||(o+=1,r=new e.famdiagram.FamilyItem({id:o,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,itemConfig:{title:"fake child #"+o,description:"This is fake child keeps spouses together."},levelGravity:1}),t.add(a,r.id,r));return o}(a=a.clone(),s,r),o.logicalFamily=a,o.maximumId=r,i&&!a.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return o.logicalFamily},getMaximumId:function(){return o.maximumId}}},e.famdiagram.HideGrandParentsConnectorsTask=function(e,t){var n={maximumId:null,logicalFamily:null};return{process:function(o){var i=t.getLogicalFamily(),a=t.getMaximumId();return i=1==e.getOptions().hideGrandParentsConnectors?i.getFamilyWithoutGrandParentsRelations():i.clone(),n.logicalFamily=i,n.maximumId=a,!0},getLogicalFamily:function(){return n.logicalFamily},getMaximumId:function(){return n.maximumId}}},e.famdiagram.ItemsPositionsTask=function(t,n,o,i,a,r,s,l,m,c){var h={treeItemsPositions:{},panelSize:null};return{process:function(){var u=i.getOptions(),d=a.getOptions(),g=r.getOptions(),p={logicalFamily:s.getLogicalFamily(),treeLevels:s.getTreeLevels(),getConnectorsStacksSizes:s.getConnectorsStacksSizes,isItemSelected:c.isItemSelected,cursorItemId:m.getCursorTreeItem(),getTemplateParams:l.getTemplateParams},f={verticalAlignment:u.verticalAlignment,pageFitMode:u.pageFitMode,minimalVisibility:u.minimalVisibility,normalLevelShift:u.normalLevelShift,dotLevelShift:u.dotLevelShift,lineLevelShift:u.lineLevelShift,normalItemsInterval:u.normalItemsInterval,dotItemsInterval:u.dotItemsInterval,lineItemsInterval:u.lineItemsInterval,orientationType:o.getOptions().orientationType,arrowsDirection:d.arrowsDirection,linesWidth:d.linesWidth,checkBoxPanelSize:u.checkBoxPanelSize,buttonsPanelSize:u.buttonsPanelSize,groupTitlePanelSize:u.groupTitlePanelSize,groupTitlePlacementType:u.groupTitlePlacementType,maximumColumnsInMatrix:g.maximumColumnsInMatrix},T=t.getOptimalPanelSize(),y=n.getOptions().scale;T.scale(1/y);var k=new e.common.Rect(0,0,T.width,T.height),v=new e.famdiagram.FamilyLayout(p,f),w=s.getMatrixes();for(var C in w)if(w.hasOwnProperty(C)){var b=p.logicalFamily.node(C);v.add(C,new e.famdiagram.MatrixLayout({items:w[C],isItemSelected:p.isItemSelected,cursorItemId:p.cursorItemId,getTemplateParams:p.getTemplateParams,hideParentConnection:b.hideParentConnection,hideChildrenConnection:b.hideChildrenConnection},f))}return h.panelSize=v.measure(k),h.treeItemsPositions={},v.arrange(this,(function(e,t){h.treeItemsPositions[e]=t})),!0},getItemsPositions:function(){return h.treeItemsPositions},getItemPosition:function(e){return h.treeItemsPositions[e]},getContentSize:function(){return h.panelSize}}},e.famdiagram.LogicalFamilyTask=function(t){var n={logicalFamily:null,maximumId:null};return{process:function(o){var i,a,r,s,l,m=t.getItems(),c=e.common.family(),h=0;if(m.length>0)for(i=0,a=m.length;i<a;i+=1)null!=(r=m[i])&&(s=new e.famdiagram.FamilyItem({id:r.id,itemConfig:r,isActive:r.isActive}),c.add(r.parents,s.id,s),l=parseInt(r.id,10),h=Math.max(isNaN(l)?0:l,h));if(n.logicalFamily=c,n.maximumId=h,o&&!c.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return n.logicalFamily},getMaximumId:function(){return n.maximumId}}},e.famdiagram.NormalizeLogicalFamilyTask=function(t,n){var o={maximumId:null,logicalFamily:null},i=new e.famdiagram.FamilyNormalizer(!1);return{process:function(e){var a=n.getLogicalFamily(),r=n.getMaximumId(),s=t.getOptions(),l={groupByType:s.groupByType,alignBylevels:s.alignBylevels};return a=a.clone(),r=i.normalize(l,a,r),o.logicalFamily=a,o.maximumId=r,!0},getLogicalFamily:function(){return o.logicalFamily},getMaximumId:function(){return o.maximumId}}},e.famdiagram.OrderFamilyNodesTask=function(t,n,o){var i={maximumId:null,logicalFamily:null,matrixes:{},nestedLayoutBottomConnectorIds:{},treeLevels:null,bundles:null,connectorStacks:null},a=new e.famdiagram.FamilyBalance,r=new e.famdiagram.FamilyMatrixesExtractor(!1),s=new e.famdiagram.UserDefinedPrimaryParents,l=new e.orgdiagram.TreeLevelConnectorStackSize;return{process:function(e){var l=o.getLogicalFamily(),m=o.getMaximumId(),c={},h={},u=[],d=t.getOptions(),g={enableMatrixLayout:d.enableMatrixLayout,minimumMatrixSize:d.minimumMatrixSize,maximumColumnsInMatrix:d.maximumColumnsInMatrix};l=l.clone(),m=r.extract(g,l,c,h,u,m),i.logicalFamily=l,i.matrixes=c,i.nestedLayoutBottomConnectorIds=h,i.bundles=u;var p={logicalFamily:l,maximumId:m,itemsPositions:n.getPositions(),itemsGroups:n.getGroups(),primaryParents:s.getUserDefinedPrimaryParents(d.items,l)},f=a.balance(p);return i.maximumId=f.maximumId,i.treeLevels=f.treeLevels,i.bundles=i.bundles.concat(f.bundles),i.connectorStacks=f.connectorStacks,!0},getLogicalFamily:function(){return i.logicalFamily},getMatrixes:function(){return i.matrixes},getNestedLayoutBottomConnectorIds:function(){return i.nestedLayoutBottomConnectorIds},getMaximumId:function(){return i.maximumId},getTreeLevels:function(){return i.treeLevels},getBundles:function(){return i.bundles},getConnectorsStacksSizes:function(e){return i.connectorStacks[e]||l}}},e.famdiagram.RemoveLoopsTask=function(t,n,o){var i={logicalFamily:null,maximumId:null,loops:[]};return{process:function(a){var r=o.getLogicalFamily(),s=o.getMaximumId(),l=t.getItems(),m=function(t,n,o,i,a){var r,s,l,m,c,h,u=function(e,t){var n,o,i,a,r,s,l,m,c=[];if(n=t.clone(),t.loopTopo(this,(function(e,t,o){n.removeNode(e)})),n.hasNodes())for(o=0,i=e.length;o<i;o+=1)if(m=e[o],null!=n.node(m.id)){for(l=[],n.loopParents(this,m.id,(function(e,t,o){return l.push(e),c.push({from:e,to:m.id}),n.SKIP})),a=0,r=l.length;a<r;a+=1)n.removeRelation(l[a],m.id);for(s=[],n.loopTopo(this,(function(e,t,n){s.push(e)})),a=0,r=s.length;a<r;a+=1)n.removeNode(s[a])}return c}(n,o),d=[];u.length>1&&0==t&&(u=e.common.getFamilyLoops(o,a));var g=[],p={};for(l=0,m=u.length;l<m;l+=1){var f=u[l];p.hasOwnProperty(f.to)?p[f.to].parents.push(f.from):(p[f.to]={itemid:f.to,parents:[f.from]},g.push(p[f.to]))}var T={};if(g.length>0)for(o=o.clone(),l=0,m=g.length;l<m;l+=1){var y=g[l],k=y.parents,v=[];for(o.loopParents(this,y.itemid,(function(e,t){return v.push(e),o.SKIP})),c=0,h=v.length;c<h;c+=1)o.removeChildRelation(v[c],y.itemid);i+=1;var w=v.length<=k.length;for(s=new e.famdiagram.FamilyItem({id:i,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:w,hideChildrenConnection:w,levelGravity:2,itemConfig:{title:"fake parent #"+i,description:"This is fake parent item was created by loops reversal."}}),o.add([],s.id,s),o.adopt([s.id],y.itemid),c=0,h=k.length;c<h;c+=1){var C=k[c];null==(r=T[C])&&(i+=1,r=new e.famdiagram.FamilyItem({id:i,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,levelGravity:1,itemConfig:{title:"fake child #"+i,description:"This is fake child item was created by loops reversal."}}),T[C]=r,o.add([C],r.id,r)),o.adopt([s.id],r.id),d.push({from:s.id,to:r.id})}var b={};for(c=0,h=k.length;c<h;c+=1)b[k[c]]=!0;for(c=0,h=v.length;c<h;c+=1)b.hasOwnProperty(v[c])||o.adopt([v[c]],s.id)}return{maximumId:i,logicalFamily:o,loops:d}}(n.getOptions().loopsLayoutMode,l,r,s,a);if(i.logicalFamily=m.logicalFamily,i.maximumId=m.maximumId,i.loops=m.loops,a&&!r.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return i.logicalFamily},getMaximumId:function(){return i.maximumId},getLoops:function(){return i.loops}}},e.famdiagram.UserDefinedNodesOrderTask=function(t){var n={position:null,group:null},o=new e.famdiagram.UserDefinedNodesOrder;return{process:function(){var e=t.getOptions(),i=o.getUserDefinedPositions(e.items);return n.position=i.position,n.group=i.group,!0},getPositions:function(){return n.position},getGroups:function(){return n.group}}},e.famdiagram.Control=function(t,n){return e.orgdiagram.BaseControl(t,n,e.famdiagram.TaskManagerFactory,e.famdiagram.EventArgsFactory,{AnnotationLabelTemplate:e.common.AnnotationLabelTemplate,ButtonsTemplate:e.common.ButtonsTemplate,CheckBoxTemplate:e.common.CheckBoxTemplate,CursorTemplate:e.common.CursorTemplate,DotHighlightTemplate:e.common.DotHighlightTemplate,GroupTitleTemplate:e.common.GroupTitleTemplate,HighlightTemplate:e.common.HighlightTemplate,ItemTemplate:e.common.ItemTemplate,UserTemplate:e.common.UserTemplate,LabelAnnotationTemplate:e.common.LabelAnnotationTemplate})},e.famdiagram.EventArgsFactory=function(t,n,o,i){var a,r,s,l=new e.famdiagram.EventArgs,m=t.tasks.getTask("CombinedContextsTask"),c=t.tasks.getTask("AlignDiagramTask"),h=t.tasks.getTask("LogicalFamilyTask"),u=m.getConfig(n),d=m.getConfig(o),g=h.getLogicalFamily();return u&&null!=u.id&&(l.oldContext=u),d&&null!=d.id&&(l.context=d,g.loopParents(this,d.id,(function(e,t,n){if(n>0)return g.BREAK;l.parentItems.push(m.getConfig(e))})),g.loopChildren(this,d.id,(function(e,t,n){if(n>0)return g.BREAK;l.childrenItems.push(m.getConfig(e))})),s=e.common.getElementOffset(t.layout.mousePanel),r=e.common.getElementOffset(t.layout.element),a=c.getItemPosition(o),l.position=new e.common.Rect(a.actualPosition).translate(s.left,s.top).translate(-r.left,-r.top)),null!=i&&(l.name=i),l},e.famdiagram.getProcessDiagramConfig=function(){var t=function(){};return e.famdiagram.TaskManagerFactory(t,t,t).getProcessDiagramConfig()},e.famdiagram.TaskManagerFactory=function(t,n,o,i,a){var r=new e.common.TaskManager;return r.addDependency("options",t),r.addDependency("graphics",n),r.addDependency("getLayout",o),r.addDependency("setLayout",i),r.addDependency("templates",a),r.addDependency("defaultConfig",new e.famdiagram.Config),r.addDependency("defaultItemConfig",new e.famdiagram.ItemConfig),r.addDependency("defaultTemplateConfig",new e.famdiagram.TemplateConfig),r.addDependency("defaultButtonConfig",new e.famdiagram.ButtonConfig),r.addDependency("defaultPaletteItemConfig",new e.famdiagram.PaletteItemConfig),r.addDependency("defaultBackgroundAnnotationConfig",new e.famdiagram.BackgroundAnnotationConfig),r.addDependency("defaultConnectorAnnotationConfig",new e.famdiagram.ConnectorAnnotationConfig),r.addDependency("defaultHighlightPathAnnotationConfig",new e.famdiagram.HighlightPathAnnotationConfig),r.addDependency("defaultShapeAnnotationConfig",new e.famdiagram.ShapeAnnotationConfig),r.addDependency("defaultLabelAnnotationConfig",new e.famdiagram.LabelAnnotationConfig),r.addDependency("isFamilyChartMode",!0),r.addDependency("showElbowDots",!0),r.addDependency("null",null),r.addDependency("foreground",2),r.addDependency("background",1),r.addTask("OptionsTask",["options"],e.famdiagram.OptionsTask,"#000000"),r.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],e.orgdiagram.LayoutOptionsTask,"#000000"),r.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask"],e.orgdiagram.CurrentControlSizeTask,"#000000"),r.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],e.orgdiagram.CurrentScrollPositionTask,"#000000"),r.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.orgdiagram.CalloutOptionTask,"#000080"),r.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ConnectorsOptionTask,"#000080"),r.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],e.famdiagram.ItemsOptionTask,"#000080"),r.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],e.orgdiagram.ItemsContentOptionTask,"#000080"),r.addTask("RemoveLoopsOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.RemoveLoopsOptionTask,"#000080"),r.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],e.famdiagram.SpousesOptionTask,"#000080"),r.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],e.orgdiagram.ItemsSizesOptionTask,"#000080"),r.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.orgdiagram.LabelsOptionTask,"#000080"),r.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],e.orgdiagram.TemplatesOptionTask,"#000080"),r.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.OrientationOptionTask,"#000080"),r.addTask("VisualTreeOptionTask",["OptionsTask"],e.famdiagram.VisualTreeOptionTask,"#000080"),r.addTask("MinimizedItemsOptionTask",["OptionsTask"],e.orgdiagram.MinimizedItemsOptionTask,"#000080"),r.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.HideGrandParentsConnectorsOptionTask,"#000080"),r.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.NormalizeOptionTask,"#000080"),r.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.famdiagram.OrderFamilyNodesOptionTask,"#000080"),r.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],e.famdiagram.LinePaletteOptionTask,"#000080"),r.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.CursorItemOptionTask,"#000080"),r.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.HighlightItemOptionTask,"#000080"),r.addTask("SelectedItemsOptionTask",["OptionsTask"],e.orgdiagram.SelectedItemsOptionTask,"#000080"),r.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.CursorSelectionPathModeOptionTask,"#000080"),r.addTask("NeighboursSelectionModeOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.NeighboursSelectionModeOptionTask,"#000080"),r.addTask("SplitAnnotationsOptionTask",["OptionsTask"],e.orgdiagram.SplitAnnotationsOptionTask,"#00ffff"),r.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),r.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),r.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),r.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),r.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),r.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),r.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],e.orgdiagram.BackgroundAnnotationOptionTask,"#000080"),r.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ScaleOptionTask,"#000080"),r.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],e.famdiagram.UserDefinedNodesOrderTask,"#ff0000"),r.addTask("LogicalFamilyTask",["ItemsOptionTask"],e.famdiagram.LogicalFamilyTask,"#00ffff"),r.addTask("RemoveLoopsTask",["ItemsOptionTask","RemoveLoopsOptionTask","LogicalFamilyTask"],e.famdiagram.RemoveLoopsTask,"#ff0000"),r.addTask("LabelAnnotationOptionTask",["SplitAnnotationsOptionTask","RemoveLoopsTask","defaultLabelAnnotationConfig"],e.famdiagram.LabelAnnotationOptionTask,"#000080"),r.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],e.famdiagram.LabelAnnotationTemplateOptionTask,"#000080"),r.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],e.famdiagram.LabelAnnotationPlacementOptionTask,"#000080"),r.addTask("CombinedContextsTask",["ItemsContentOptionTask","LabelAnnotationOptionTask"],e.orgdiagram.CombinedContextsTask,"#00ffff"),r.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","RemoveLoopsTask"],e.famdiagram.AddLabelAnnotationsTask,"#ff0000"),r.addTask("AddSpousesTask",["SpousesOptionTask","AddLabelAnnotationsTask"],e.famdiagram.AddSpousesTask,"#ff0000"),r.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],e.famdiagram.HideGrandParentsConnectorsTask,"#ff0000"),r.addTask("NormalizeLogicalFamilyTask",["NormalizeOptionTask","HideGrandParentsConnectorsTask"],e.famdiagram.NormalizeLogicalFamilyTask,"#ff0000"),r.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask"],e.famdiagram.OrderFamilyNodesTask,"#ff0000"),r.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],e.orgdiagram.ReadTemplatesTask,"#00ffff"),r.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],e.orgdiagram.ActiveItemsTask,"#00ffff"),r.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],e.orgdiagram.ItemTemplateParamsTask,"#00ffff"),r.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],e.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff"),r.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],e.famdiagram.CombinedTemplateParamsTask,"#00ffff"),r.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],e.orgdiagram.GroupTitleTemplateTask,"#00ffff"),r.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],e.orgdiagram.CheckBoxTemplateTask,"#00ffff"),r.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask","templates"],e.orgdiagram.ButtonsTemplateTask,"#00ffff"),r.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],e.orgdiagram.AnnotationLabelTemplateTask,"#00ffff"),r.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","OrderFamilyNodesTask","AlignDiagramTask","RemoveLoopsTask"],e.orgdiagram.ConnectionsGraphTask,"#00ffff"),r.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],e.orgdiagram.HighlightItemTask,"#00ffff"),r.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],e.orgdiagram.CursorItemTask,"#00ffff"),r.addTask("CursorNeighboursTask",["CursorItemTask","NeighboursSelectionModeOptionTask","AddSpousesTask","ActiveItemsTask"],e.famdiagram.CursorNeighboursTask,"#00ffff"),r.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],e.orgdiagram.SelectedItemsTask,"#00ffff"),r.addTask("SelectionPathItemsTask",["AddSpousesTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],e.famdiagram.SelectionPathItemsTask,"#00ffff"),r.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff"),r.addTask("CombinedNormalVisibilityItemsTask",["ItemsSizesOptionTask","CursorItemTask","CursorNeighboursTask","SelectedItemsTask","SelectionPathItemsTask","NormalVisibilityItemsByForegroundShapeAnnotationTask","NormalVisibilityItemsByBackgroundShapeAnnotationTask","NormalVisibilityItemsByBackgroundAnnotationTask","NormalVisibilityItemsByForegroundHighlightPathAnnotationTask","NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask","NormalVisibilityItemsByForegroundConnectorAnnotationTask","NormalVisibilityItemsByBackgroundConnectorAnnotationTask"],e.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff"),r.addTask("ItemsPositionsTask",["CurrentControlSizeTask","ScaleOptionTask","OrientationOptionTask","ItemsSizesOptionTask","ConnectorsOptionTask","OrderFamilyNodesOptionTask","OrderFamilyNodesTask","CombinedTemplateParamsTask","CursorItemTask","CombinedNormalVisibilityItemsTask"],e.famdiagram.ItemsPositionsTask,"#ff0000"),r.addTask("AlignDiagramTask",["OrientationOptionTask","ItemsSizesOptionTask","VisualTreeOptionTask","ScaleOptionTask","CurrentControlSizeTask","ActiveItemsTask","ItemsPositionsTask","isFamilyChartMode"],e.orgdiagram.AlignDiagramTask,"#ff0000"),r.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],e.orgdiagram.CreateTransformTask,"#00ffff"),r.addTask("CenterOnCursorTask",["LayoutOptionsTask","CurrentControlSizeTask","CurrentScrollPositionTask","CursorItemTask","AlignDiagramTask","CreateTransformTask","ScaleOptionTask"],e.orgdiagram.CenterOnCursorTask,"#00ffff"),r.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],e.orgdiagram.PaletteManagerTask,"#00ffff"),r.addTask("ApplyLayoutChangesTask",["graphics","setLayout","ItemsSizesOptionTask","CurrentControlSizeTask","ScaleOptionTask","AlignDiagramTask"],e.orgdiagram.ApplyLayoutChangesTask,"#00ffff"),r.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),r.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),r.addTask("DrawBackgroundAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","BackgroundAnnotationOptionTask","LogicalFamilyTask","AlignDiagramTask"],e.orgdiagram.DrawBackgroundAnnotationTask,"#008000"),r.addTask("DrawForegroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),r.addTask("DrawBackgroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),r.addTask("DrawForegroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),r.addTask("DrawBackgroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),r.addTask("DrawCursorTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","CombinedTemplateParamsTask","CursorItemTask","SelectedItemsTask"],e.orgdiagram.DrawCursorTask,"#008000"),r.addTask("DrawHighlightTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","CombinedTemplateParamsTask","HighlightItemTask","CursorItemTask","SelectedItemsTask"],e.orgdiagram.DrawHighlightTask,"#008000"),r.addTask("DrawHighlightAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","ScaleOptionTask","CombinedContextsTask","CalloutOptionTask","ReadTemplatesTask","AlignDiagramTask","CenterOnCursorTask","HighlightItemTask","CursorItemTask","SelectedItemsTask"],e.orgdiagram.DrawHighlightAnnotationTask,"#008000"),r.addTask("DrawTreeItemsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","ScaleOptionTask","ItemsSizesOptionTask","CombinedContextsTask","AlignDiagramTask","CenterOnCursorTask","CombinedTemplateParamsTask","CursorItemTask","SelectedItemsTask","GroupTitleTemplateTask","CheckBoxTemplateTask","ButtonsTemplateTask"],e.orgdiagram.DrawTreeItemsTask,"#008000"),r.addTask("DrawMinimizedItemsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","MinimizedItemsOptionTask","CombinedTemplateParamsTask","AlignDiagramTask"],e.orgdiagram.DrawMinimizedItemsTask,"#008000"),r.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],e.orgdiagram.DrawConnectorsTask,"#008000"),r.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","LabelsOptionTask","AlignDiagramTask"],e.orgdiagram.DrawItemLabelsTask,"#008000"),r},e.orgdiagram.TemplateConfig=function(){this.name=null,this.isActive=!0,this.itemSize=new e.common.Size(120,100),this.itemBorderWidth=1,this.itemTemplate=null,this.minimizedItemShapeType=null,this.minimizedItemSize=new e.common.Size(4,4),this.minimizedItemCornerRadius=null,this.minimizedItemLineWidth=1,this.minimizedItemBorderColor=null,this.minimizedItemLineType=0,this.minimizedItemFillColor=null,this.minimizedItemOpacity=1,this.highlightPadding=new e.common.Thickness(2,2,2,2),this.highlightBorderWidth=1,this.highlightTemplate=null,this.cursorPadding=new e.common.Thickness(3,3,3,3),this.cursorBorderWidth=2,this.cursorTemplate=null,this.buttons=null,this.onButtonsRender=null},e.orgdiagram.BackgroundAnnotationConfig=function(t){var n;switch(this.annotationType=4,this.items=[],this.includeChildren=!1,this.zOrderType=0,this.offset=new e.common.Thickness(18,18,18,18),this.lineWidth=2,this.opacity=1,this.borderColor=null,this.fillColor=null,this.lineType=0,this.selectItems=!1,arguments.length){case 1:if(null!==t)if(t instanceof Array)this.items=t;else if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}},e.orgdiagram.ButtonConfig=function(t,n,o){this.name=t,this.icon=n,this.text=!1,this.label=null,this.tooltip=o,this.size=new e.common.Size(16,16)},e.orgdiagram.Config=function(t){this.name=void 0!==t?t:"OrgDiagram",this.classPrefix="orgdiagram",this.navigationMode=0,this.graphicsType=0,this.pageFitMode=3,this.minimalVisibility=2,this.orientationType=0,this.horizontalAlignment=0,this.verticalAlignment=1,this.arrowsDirection=0,this.showExtraArrows=!1,this.extraArrowsMinimumSpace=30,this.connectorType=0,this.bevelSize=4,this.elbowType=0,this.elbowDotSize=4,this.emptyDiagramMessage="Diagram is empty.",this.items=[],this.annotations=[],this.cursorItem=null,this.highlightItem=null,this.highlightGravityRadius=40,this.selectedItems=[],this.hasSelectorCheckbox=0,this.selectCheckBoxLabel="Selected",this.selectionPathMode=1,this.templates=[],this.defaultTemplateName=null,this.hasButtons=0,this.buttons=[],this.onButtonsRender=null,this.onHighlightChanging=null,this.onHighlightChanged=null,this.onCursorChanging=null,this.onCursorChanged=null,this.onSelectionChanging=null,this.onSelectionChanged=null,this.onButtonClick=null,this.onMouseClick=null,this.onMouseDblClick=null,this.onItemRender=null,this.onHighlightRender=null,this.onCursorRender=null,this.normalLevelShift=20,this.dotLevelShift=20,this.lineLevelShift=10,this.normalItemsInterval=10,this.dotItemsInterval=1,this.lineItemsInterval=2,this.cousinsIntervalMultiplier=5,this.itemTitleFirstFontColor="#ffffff",this.itemTitleSecondFontColor="#000080",this.minimizedItemShapeType=6,this.linesColor="#c0c0c0",this.linesWidth=1,this.linesType=0,this.highlightLinesColor="#ff0000",this.highlightLinesWidth=1,this.highlightLinesType=0,this.showCallout=!0,this.calloutMaximumVisibility=2,this.calloutPlacementOffset=100,this.defaultCalloutTemplateName=null,this.calloutfillColor="#000000",this.calloutBorderColor=null,this.calloutOffset=4,this.calloutCornerRadius=4,this.calloutPointerWidth="10%",this.calloutLineWidth=1,this.calloutOpacity=.2,this.childrenPlacementType=2,this.leavesPlacementType=2,this.placeAssistantsAboveChildren=!0,this.placeAdvisersAboveChildren=!0,this.maximumColumnsInMatrix=6,this.buttonsPanelSize=28,this.groupTitlePanelSize=24,this.checkBoxPanelSize=24,this.groupTitlePlacementType=2,this.groupTitleOrientation=2,this.groupTitleVerticalAlignment=1,this.groupTitleHorizontalAlignment=0,this.groupTitleFontSize="12px",this.groupTitleFontFamily="Arial",this.groupTitleColor="#4169e1",this.groupTitleFontWeight="normal",this.groupTitleFontStyle="normal",this.distance=3,this.scale=1,this.minimumScale=.5,this.maximumScale=2,this.showLabels=0,this.labelSize=new e.common.Size(80,24),this.labelOffset=1,this.labelOrientation=0,this.labelPlacement=1,this.labelFontSize="10px",this.labelFontFamily="Arial",this.labelColor="#000000",this.labelFontWeight="normal",this.labelFontStyle="normal",this.enablePanning=!0,this.autoSizeMinimum=new e.common.Size(800,600),this.autoSizeMaximum=new e.common.Size(1024,768)},e.orgdiagram.ConnectorAnnotationConfig=function(t,n){var o;switch(this.annotationType=0,this.zOrderType=2,this.fromItem=null,this.toItem=null,this.connectorShapeType=0,this.connectorPlacementType=0,this.labelPlacementType=1,this.offset=new e.common.Thickness(0,0,0,0),this.lineWidth=2,this.color="#000000",this.lineType=0,this.selectItems=!0,this.label=null,this.labelSize=new e.common.Size(60,30),arguments.length){case 1:for(o in t)t.hasOwnProperty(o)&&(this[o]=t[o]);break;case 2:this.fromItem=t,this.toItem=n}},e.orgdiagram.HighlightPathAnnotationConfig=function(e){var t;switch(this.annotationType=2,this.zOrderType=2,this.items=[],this.lineWidth=2,this.color="#ff0000",this.lineType=0,this.opacity=1,this.showArrows=!0,this.selectItems=!1,arguments.length){case 1:if(null!==e)if(e instanceof Array)this.items=e;else if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}},e.orgdiagram.ItemConfig=function(e,t,n,o,i){var a;switch(this.id=null,this.parent=null,this.title=null,this.description=null,this.image=null,this.context=null,this.itemTitleColor="#4169e1",this.minimizedItemShapeType=null,this.groupTitle=null,this.groupTitleColor="#4169e1",this.isVisible=!0,this.isActive=!0,this.hasSelectorCheckbox=0,this.hasButtons=0,this.itemType=0,this.levelOffset=null,this.adviserPlacementType=0,this.childrenPlacementType=0,this.placeAssistantsAboveChildren=0,this.placeAdvisersAboveChildren=0,this.templateName=null,this.showCallout=0,this.calloutTemplateName=null,this.label=null,this.showLabel=0,this.labelSize=null,this.labelOrientation=3,this.labelPlacement=0,arguments.length){case 1:for(a in e)e.hasOwnProperty(a)&&(this[a]=e[a]);break;case 5:this.id=e,this.parent=t,this.title=n,this.description=o,this.image=i}},e.orgdiagram.ShapeAnnotationConfig=function(t){var n;switch(this.annotationType=1,this.zOrderType=0,this.items=[],this.shapeType=0,this.offset=new e.common.Thickness(0,0,0,0),this.lineWidth=2,this.cornerRadius="10%",this.opacity=1,this.borderColor=null,this.fillColor=null,this.lineType=0,this.selectItems=!1,this.label=null,this.labelSize=new e.common.Size(60,30),this.labelPlacement=0,this.labelOffset=4,arguments.length){case 1:if(null!==t)if(t instanceof Array)this.items=t;else if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}},e.orgdiagram.EventArgs=function(){this.oldContext=null,this.context=null,this.parentItem=null,this.position=null,this.name=null,this.cancel=!1},e.common.BaseConnectorBundle=function(){this.NORMAL_ITEM_WEIGHT=10010,this.LINE_ITEM_WEIGHT=1e4},e.common.BaseConnectorBundle.prototype.trace=function(e,t,n){},e.common.BaseConnectorBundle.prototype.getId=function(e){var t="_"+e.nodeid;return e.nodeid+=1,t},e.common.BaseConnectorBundle.prototype.ConnectorEdge=function(e,t,n,o,i,a,r,s,l,m,c){this.polyline=n,this.from=e,this.to=t,this.weight=r||0,this.fromOffset=s||0,this.hasArrow=c||!1,this.parentsArrowId=o,this.childrenArrowId=i,this.dotId=a,this.hasMiddle=l,this.middleParent=m,this.isOppositeFlow=!1},e.common.BaseConnectorBundle.prototype.ConnectorDestination=function(e){for(var t in this.id=null,this.x=null,this.y=null,this.bundleid=null,this.hasElbow=!1,this.elbowPoint1=null,this.elbowPoint2=null,this.visibility=null,this.isSquared=!0,e)e.hasOwnProperty(t)&&(this[t]=e[t])},e.common.BaseConnectorBundle.prototype.traceFork=function(t,n,o,i,a,r,s,l,m){var c,h,u,d,g,p,f,T,y,k,v,w,C,b=[];if(r){for(b=[],c=0,u=a.length;c<u&&(d=a[c]).x<i.x&&!d.isSquared;c+=1)b.push(d);for((u=b.length)>0&&(g=(p=b[u-1]).x==i.x?i:new this.ConnectorDestination({id:p.bundleid,x:p.x,y:i.y}),this.traceAngularSegments(t,n,o,g,b,!1)),b=[],h=a.length-1;h>=c&&(d=a[h]).x>i.x&&!d.isSquared;h-=1)b.push(d);for((u=b.length)>0&&(g=(p=b[u-1]).x==i.x?i:new this.ConnectorDestination({id:p.bundleid,x:p.x,y:i.y}),this.traceAngularSegments(t,n,o,g,b,!1)),f=c;f<=h;f+=1){if(d=a[f],(y=o.bevelSize)<2&&(y=0),n.hasGraphics)switch(o.elbowType){case 2:case 3:y>0&&Math.abs(i.x-d.x)>y&&Math.abs(i.y-d.y)>y&&(d.hasElbow=!0,d.elbowPoint1=new e.common.Point(d.x,i.y+(i.y>d.y?-y:y)),d.elbowPoint2=new e.common.Point(d.x+(i.x>d.x?y:-y),i.y))}T=new e.common.Polyline,d.hasElbow?(n.transform.transform3Points(d.elbowPoint2.x,d.elbowPoint2.y,d.elbowPoint1.x,d.elbowPoint2.y,d.elbowPoint1.x,d.elbowPoint1.y,!0,this,(function(t,n,i,a,r,s){switch(o.elbowType){case 2:T.addSegment(new e.common.MoveSegment(t,n)),T.addSegment(new e.common.LineSegment(r,s));break;case 3:T.addSegment(new e.common.MoveSegment(t,n)),T.addSegment(new e.common.CubicArcSegment(t,n,i,a,r,s))}})),n.transform.transformPoints(d.elbowPoint1.x,d.elbowPoint1.y,d.x,d.y,!0,this,(function(t,n,o,i){T.addSegment(new e.common.LineSegment(o,i))}))):n.transform.transformPoints(d.x,i.y,d.x,d.y,!0,this,(function(t,n,o,i){T.addSegment(new e.common.MoveSegment(t,n)),T.addSegment(new e.common.LineSegment(o,i))}));var P=d.x==i.x?i.id:d.bundleid,O=4!==d.visibility;t.graph.addEdge(P,d.id,new this.ConnectorEdge(P,d.id,T,s?d.id:null,s?null:d.id,null,O?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,l,null,null,O))}for(c=Math.max(c-1,0),h=Math.min(h+1,a.length-1),k=i,v=i.id,f=c;f<=h;f+=1)C=(w=a[f]).bundleid,w.x>k.x&&(T=new e.common.Polyline,n.transform.transformPoints(k.x,i.y,null!=w.elbowPoint2?w.elbowPoint2.x:w.x,i.y,!0,this,(function(t,n,o,i){T.addSegment(new e.common.MoveSegment(t,n)),T.addSegment(new e.common.LineSegment(o,i))})),t.graph.addEdge(v,C,new this.ConnectorEdge(v,C,T,null,null,v,Math.abs(w.x-k.x)/1e4,l,m,s?C:v)),k=w.elbowPoint2||w,v=C);for(k=i,v=i.id,f=h;f>=c;f-=1)C=(w=a[f]).bundleid,w.x<k.x&&(T=new e.common.Polyline,n.transform.transformPoints(k.x,i.y,null!=w.elbowPoint2?w.elbowPoint2.x:w.x,i.y,!0,this,(function(t,n,o,i){T.addSegment(new e.common.MoveSegment(t,n)),T.addSegment(new e.common.LineSegment(o,i))})),t.graph.addEdge(v,C,new this.ConnectorEdge(v,C,T,null,null,v,Math.abs(w.x-k.x)/1e4,l,m,s?C:v)),k=w.elbowPoint2||w,v=C)}else this.traceAngularSegments(t,n,o,i,a,!0)},e.common.BaseConnectorBundle.prototype.traceAngularSegments=function(t,n,o,i,a,r){var s,l,m,c,h;for(s=0,l=a.length;s<l;s+=1){switch(c=a[s],h=new e.common.Polyline,n.transform.transformPoint(i.x,i.y,!0,this,(function(t,n){h.addSegment(new e.common.MoveSegment(t,n))})),o.connectorType){case 1:n.transform.transformPoint(c.x,c.y,!0,this,(function(t,n){h.addSegment(new e.common.LineSegment(t,n))}));break;case 2:m=new e.common.Rect(i,c),r?i.x>m.x?n.transform.transform3Points(m.right(),m.verticalCenter(),m.x,m.verticalCenter(),m.x,m.bottom(),!0,this,(function(t,n,o,i,a,r){h.addSegment(new e.common.CubicArcSegment(t,n,o,i,a,r))})):n.transform.transform3Points(m.x,m.verticalCenter(),m.right(),m.verticalCenter(),m.right(),m.bottom(),!0,this,(function(t,n,o,i,a,r){h.addSegment(new e.common.CubicArcSegment(t,n,o,i,a,r))})):i.x>m.x?n.transform.transformPoints(m.x,m.y,m.x,m.bottom(),!0,this,(function(t,n,o,i){h.addSegment(new e.common.QuadraticArcSegment(t,n,o,i))})):n.transform.transformPoints(m.right(),m.y,m.right(),m.bottom(),!0,this,(function(t,n,o,i){h.addSegment(new e.common.QuadraticArcSegment(t,n,o,i))}))}var u=4!==c.visibility;t.graph.addEdge(i.id,c.id,new this.ConnectorEdge(i.id,c.id,h,null,u?c.id:null,u?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,null,null,null,!0))}},e.common.HorizontalConnectorBundle=function(e,t){this.fromItem=e,this.toItem=t},e.common.HorizontalConnectorBundle.prototype=new e.common.BaseConnectorBundle,e.common.HorizontalConnectorBundle.prototype.trace=function(t,n,o){var i=this.fromItem,a=this.toItem,r=n.treeItemsPositions[i],s=n.treeItemsPositions[a],l=new e.common.Polyline;r.actualPosition.x<s.actualPosition.x?n.transform.transformPoints(r.actualPosition.right(),r.horizontalConnectorsShift,s.actualPosition.x,s.horizontalConnectorsShift,!0,this,(function(t,n,o,i){l.addSegment(new e.common.MoveSegment(t,n)),l.addSegment(new e.common.LineSegment(o,i))})):n.transform.transformPoints(r.actualPosition.x,r.horizontalConnectorsShift,s.actualPosition.right(),r.horizontalConnectorsShift,!0,this,(function(t,n,o,i){l.addSegment(new e.common.MoveSegment(t,n)),l.addSegment(new e.common.LineSegment(o,i))}));var m=4!==s.actualVisibility,c=4!==r.actualVisibility;t.graph.addEdge(i,a,new this.ConnectorEdge(i,a,l,m?a:null,c?i:null,m||c?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT),null,null,null,!0)},e.common.MatrixConnectorBundle=function(e,t,n,o,i){this.isChildren=e,this.items=t,this.len=t.length,this.matrixNodeId=n,this.connectionId=o,this.matrixWidth=i,this.blocksCount=Math.ceil(this.matrixWidth/2),this.rowsCount=Math.ceil(this.len/this.matrixWidth)},e.common.MatrixConnectorBundle.prototype=new e.common.BaseConnectorBundle,e.common.MatrixConnectorBundle.prototype.trace=function(e,t,n){this.isChildren?this.traceChildrenLayout(e,t,n):this.traceParentsLayout(e,t,n)},e.common.MatrixConnectorBundle.prototype.traceChildrenLayout=function(t,n,o){for(var i,a=[],r=0;r<this.blocksCount;r+=1){for(var s=null,l=this.rowsCount-1;l>=0;l-=1){var m=this.getNodeIndex(r,l,!0,!0),c=null,h=null;m<this.len&&(c=this.items[m],h=n.treeItemsPositions[c]);var u=this.getNodeIndex(r,l,!1,!0),d=null,g=null;u<this.len&&(d=this.items[u],g=n.treeItemsPositions[d]);var p=null;null==p&&null!=h&&(p=new this.ConnectorDestination({id:this.getId(t),x:h.actualPosition.horizontalCenter()+h.rightMedianOffset,y:h.horizontalConnectorsShift})),null==p&&null!=g&&(p=new this.ConnectorDestination({id:this.getId(t),x:g.actualPosition.horizontalCenter()-g.leftMedianOffset,y:g.horizontalConnectorsShift})),null!=h&&(i=h.actualPosition,n.transform.transformPoints(i.right(),i.verticalCenter(),p.x,p.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(c,p.id,new this.ConnectorEdge(c,p.id,r,null,c,null,10,null,null,null,!0))}))),null!=g&&(i=g.actualPosition,n.transform.transformPoints(i.left(),i.verticalCenter(),p.x,p.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(d,p.id,new this.ConnectorEdge(d,p.id,r,null,d,null,10,null,null,null,!0))}))),null!=s&&null!=p&&n.transform.transformPoints(s.x,s.y,p.x,p.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(s.id,p.id,new this.ConnectorEdge(s.id,p.id,r,null,null,null,0))})),null!=p&&(s=p)}null!=s&&a.push(new this.ConnectorDestination({id:s.id,bundleid:this.getId(t),x:s.x,y:s.y,isSquared:!0,visibility:4}))}i=n.treeItemsPositions[this.matrixNodeId].actualPosition;var f=new this.ConnectorDestination({id:this.matrixNodeId,x:i.horizontalCenter(),y:i.top()});this.traceFork(t,n,o,f,a,!0,!1,0,o.showExtraArrows)},e.common.MatrixConnectorBundle.prototype.traceParentsLayout=function(t,n,o){for(var i,a=[],r=0;r<=this.blocksCount;r+=1){for(var s=null,l=0;l<this.rowsCount;l+=1){var m=this.getNodeIndex(r,l,!0,!1),c=null,h=null;m<this.len&&(c=this.items[m],h=n.treeItemsPositions[c]);var u=this.getNodeIndex(r,l,!1,!1),d=null,g=null;u<this.len&&(d=this.items[u],g=n.treeItemsPositions[d]);var p=null;null==p&&null!=h&&(p=new this.ConnectorDestination({id:this.getId(t),x:h.actualPosition.horizontalCenter()+h.rightMedianOffset,y:h.horizontalConnectorsShift})),null==p&&null!=g&&(p=new this.ConnectorDestination({id:this.getId(t),x:g.actualPosition.horizontalCenter()-g.leftMedianOffset,y:g.horizontalConnectorsShift})),null!=h&&(i=h.actualPosition,n.transform.transformPoints(i.right(),i.verticalCenter(),p.x,p.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(c,p.id,new this.ConnectorEdge(c,p.id,r,c,null,null,10,null,null,null,!0))}))),null!=g&&(i=g.actualPosition,n.transform.transformPoints(i.left(),i.verticalCenter(),p.x,p.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(d,p.id,new this.ConnectorEdge(d,p.id,r,d,null,null,10,null,null,null,!0))}))),null!=s&&null!=p&&n.transform.transformPoints(s.x,s.y,p.x,p.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(s.id,p.id,new this.ConnectorEdge(s.id,p.id,r,null,null,null,0,null,null,null,!0))})),null!=p&&(s=p)}null!=s&&a.push(new this.ConnectorDestination({id:s.id,bundleid:this.getId(t),x:s.x,y:s.y,isSquared:!0,visibility:4}))}i=n.treeItemsPositions[this.matrixNodeId].actualPosition;var f=new this.ConnectorDestination({id:this.connectionId,x:i.horizontalCenter(),y:i.bottom()});this.traceFork(t,n,o,f,a,!0,!0,0,o.showExtraArrows)},e.common.MatrixConnectorBundle.prototype.getNodeIndex=function(e,t,n,o){var i,a=null;return o?(i=2*e+(n?0:1),this.matrixWidth>i&&(a=t*this.matrixWidth+i)):(i=2*e+(n?-1:0))>=0&&i<this.matrixWidth&&(a=t*this.matrixWidth+i),a},e.common.VerticalConnectorBundle=function(e,t,n){this.fromItems=e,this.toItems=t,this.dotId=n||null,this.fromOffset=0,this.fromStackSize=0},e.common.VerticalConnectorBundle.prototype=new e.common.BaseConnectorBundle,e.common.VerticalConnectorBundle.prototype.trace=function(t,n,o){var i,a,r,s,l,m,c,h,u,d,g,p,f,T=0===o.connectorType;if(i=[],this.fromItems.length>0){for(m=0,c=(r=this.fromItems).length;m<c;m+=1)s=r[m],l=n.treeItemsPositions[s],f=new this.ConnectorDestination({id:n.nestedLayoutBottomConnectorIds.hasOwnProperty(s)?n.nestedLayoutBottomConnectorIds[s]:s,bundleid:this.getId(t),x:l.actualPosition.horizontalCenter(),y:l.actualPosition.bottom(),isSquared:!0,visibility:l.actualVisibility}),i.push(f);i.sort((function(e,t){return e.x-t.x})),g=l.bottomConnectorShift-l.bottomConnectorInterval*(this.fromStackSize-this.fromOffset+1)}if(a=[],this.toItems.length>0){for(u=!1,r=this.toItems,m=0;m<r.length;m+=1){if(s=r[m],l=n.treeItemsPositions[s],h=!0,n.hasGraphics)switch(l.actualVisibility){case 2:case 3:h=T}f=new this.ConnectorDestination({id:s,bundleid:this.getId(t),x:l.actualPosition.horizontalCenter()+0,y:l.actualPosition.top(),isSquared:h,visibility:l.actualVisibility}),a.push(f),u=u||f.isSquared}a.sort((function(e,t){return e.x-t.x})),p=l.topConnectorShift}d=1==a.length?a[0].x:1==i.length?i[0].x:a.length>0&&i.length>0?(i[0].x+i[i.length-1].x+a[0].x+a[a.length-1].x)/4:a.length>0?(a[0].x+a[a.length-1].x)/2:(i[0].x+i[i.length-1].x)/2;var y=null;i.length>0&&(y=new this.ConnectorDestination({id:0==a.length?this.dotId:this.getId(t),x:d,y:g}),this.traceFork(t,n,o,y,i,!0,!0,this.fromOffset,o.showExtraArrows));var k=null;a.length>0&&(k=new this.ConnectorDestination({id:0==i.length?this.dotId:this.getId(t),x:d,y:p}),null!=y&&k.y==y.y&&(k=y),this.traceFork(t,n,o,k,a,u,!1,0,o.showExtraArrows)),null!=y&&null!=k&&y.id!=k.id&&n.transform.transformPoints(y.x,y.y,k.x,k.y,!0,this,(function(n,o,i,a){var r=new e.common.Polyline;r.addSegment(new e.common.MoveSegment(n,o)),r.addSegment(new e.common.LineSegment(i,a)),t.graph.addEdge(y.id,k.id,new this.ConnectorEdge(y.id,k.id,r,null,null,null,0))}))},e.orgdiagram.LevelVisibility=function(e,t){this.level=e,this.currentvisibility=t},e.orgdiagram.OrgItem=function(e){var t,n,o;this.id=null,this.isVisible=!0,this.isActive=!0,this.hasVisibleChildren=!1,this.itemType=0,this.adviserPlacementType=0,this.childrenPlacementType=0,this.placeAdvisersAboveChildren=0,this.placeAssistantsAboveChildren=0,this.levelOffset=null,this.level=null,this.hideParentConnection=!1,this.hideChildrenConnection=!1,this.childIndex=null;var i=["id","parent","isVisible","isActive","itemType","adviserPlacementType","childrenPlacementType","placeAdvisersAboveChildren","placeAssistantsAboveChildren","levelOffset"];for(t=0,n=i.length;t<n;t+=1)o=i[t],e.hasOwnProperty(o)&&(this[o]=e[o])},e.orgdiagram.Template=function(e,t,n,o,i){this.templateConfig=e,this.itemTemplate=t,this.highlightTemplate=n,this.dotHighlightTemplate=o,this.cursorTemplate=i},e.orgdiagram.TemplateParams=function(){this.template=null,this.isActive=!1,this.hasSelectorCheckbox=!1,this.hasButtons=!1,this.hasGroupTitle=!1,this.buttons=[],this.onButtonsRender=null},e.orgdiagram.TreeItem=function(){this.id=null,this.visualAggregatorId=null,this.visualDepth=1,this.partners=[],this.visibility=1,this.actualItemType=null,this.connectorPlacement=0,this.gravity=0,this.relationDegree=0},e.orgdiagram.TreeItemPosition=function(t){if(this.partnerConnectorOffset=0,this.level=null,this.levelPosition=null,this.offset=0,this.leftPadding=0,this.rightPadding=0,this.actualVisibility=1,this.actualSize=null,this.actualPosition=null,this.contentPosition=null,this.horizontalConnectorsShift=null,this.topConnectorShift=null,this.topConnectorInterval=0,this.bottomConnectorShift=null,this.bottomConnectorInterval=0,this.leftMedianOffset=null,this.rightMedianOffset=null,null!=t)for(var n in t)if(t.hasOwnProperty(n))switch(n){case"actualPosition":this.actualPosition=new e.common.Rect(t.actualPosition);break;default:this[n]=t[n]}},e.orgdiagram.TreeLevelConnectorStackSize=function(){this.parentsStackSize=0},e.orgdiagram.TreeLevelPosition=function(e){if(this.currentvisibility=1,this.actualVisibility=1,this.shift=0,this.depth=0,this.nextLevelShift=0,this.horizontalConnectorsDepth=0,this.topConnectorShift=0,this.connectorShift=0,this.levelSpace=0,this.currentOffset=0,this.labels=[],this.labelsRect=null,this.showLabels=!0,this.hasFixedLabels=!1,null!=e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},e.orgdiagram.TreeLevelPosition.prototype.setShift=function(e,t,n,o,i){return this.shift=e,this.levelSpace=t,this.topConnectorShift=-t/2-n,this.connectorShift=this.depth+o+(i+1)*(t/2),this.nextLevelShift=n+this.depth+o+t+i*t/2,this.nextLevelShift},e.orgdiagram.TreeLevelPosition.prototype.shiftDown=function(e){this.shift+=e},e.orgdiagram.TreeLevelPosition.prototype.toString=function(){return this.currentvisibility},e.orgdiagram.AlignDiagramTask=function(t,n,o,i,a,r,s,l){var m,c,h,u,d,g,p,f,T={treeItemsPositions:{},panelSize:null};function y(){if(null==p)for(var t in p=e.common.SpatialIndex(function(){var e=[],t={};for(var n in T.treeItemsPositions)if(T.treeItemsPositions.hasOwnProperty(n)){var o=T.treeItemsPositions[n];switch(o.actualVisibility){case 1:case 2:case 3:var i=o.actualPosition,a=Math.max(i.width,i.height);t.hasOwnProperty(a)||(t[a]=!0,e.push(a))}}return e}()),T.treeItemsPositions)if(T.treeItemsPositions.hasOwnProperty(t)){var n=T.treeItemsPositions[t];if(m.hasOwnProperty(t))switch(n.actualVisibility){case 1:case 2:case 3:var o=new e.common.Rect(n.actualPosition);o.context=t,p.addRect(o)}}return p}return{process:function(){var y=new e.common.Size(s.getContentSize()),k=new e.common.Size(a.getOptimalPanelSize());switch(p=null,f=null,m=null!=r?r.getActiveItems():{},c=s.getItemsPositions(),h=n.getOptions(),u=t.getOptions(),d=o.getOptions(),g=i.getOptions(),u.orientationType){case 2:case 3:k.invert()}switch(k.scale(1/g.scale),T.panelSize=k,T.treeItemsPositions=c,h.pageFitMode){case 5:T.panelSize=new e.common.Size(y);break;default:T.panelSize=new e.common.Size(y),y.width<k.width&&(T.treeItemsPositions={},function(t,n,o){var i;if(l)i=(o-n)/2;else switch(d.horizontalAlignment){case 1:i=0;break;case 2:i=o-n;break;case 0:i=(o-n)/2}!function(t,n,o){var i,a;for(i in c)c.hasOwnProperty(i)&&((a=new e.orgdiagram.TreeItemPosition(c[i])).actualPosition.translate(n,o),t[i]=a)}(t,i,0)}(T.treeItemsPositions,y.width,k.width),T.panelSize.width=k.width),y.height<k.height&&(T.panelSize.height=k.height)}switch(u.orientationType){case 2:case 3:T.panelSize.invert()}return!0},getItemPosition:function(e){return T.treeItemsPositions[e]},getItemsPositions:function(){return T.treeItemsPositions},getContentSize:function(){return T.panelSize},getTreeItemForMousePosition:function(t,n,o){var i,a,r=null,s=null,l=g.scale,m=y();return t/=l,n/=l,i=new e.common.Rect(t,n,0,0),a=new e.common.Point(t,n),i.offset(o,o,o,o),m.loopArea(this,i,(function(e){var o=e.context;if(e.contains(t,n))return r=o,!0;switch(T.treeItemsPositions[o].actualVisibility){case 2:case 3:var i=a.distanceTo(e.horizontalCenter(),e.verticalCenter());(null==s||i<s)&&(s=i,r=o)}})),r},getNextItem:function(t,n){var o,i=function(){if(null==f)for(var t in f=e.common.KeyboardNavigationManager(),T.treeItemsPositions)if(T.treeItemsPositions.hasOwnProperty(t)){var n=T.treeItemsPositions[t];if(m.hasOwnProperty(t))switch(n.actualVisibility){case 1:var o=new e.common.Rect(n.actualPosition);f.addRect(o,t)}}return f}();switch(n){case 0:o=i.getItemAbove(t);break;case 1:o=i.getItemBelow(t);break;case 2:o=i.getItemOnLeft(t);break;case 3:o=i.getItemOnRight(t)}return o}}},e.orgdiagram.ApplyLayoutChangesTask=function(t,n,o,i,a,r){var s={scrollPanelSize:null};return{process:function(){var e=t(),l=a.getOptions(),m=o.getOptions(),c=r.getContentSize(),h=i.getScrollPanelSize();return e.resize("placeholder",c.width,c.height),s.scrollPanelSize=n({scale:l.scale,contentSize:c,scrollPanelSize:h,autoSize:5==m.pageFitMode,autoSizeMaximum:m.autoSizeMaximum,autoSizeMinimum:m.autoSizeMinimum}),!0},getOptimalPanelSize:function(){return new e.common.Size(s.scrollPanelSize.width-25,s.scrollPanelSize.height-25)}}},e.orgdiagram.CenterOnCursorTask=function(t,n,o,i,a,r,s){var l,m={placeholderOffset:null};return{process:function(){var c,h,u=t.getOptions(),d=i.getCursorTreeItem(),g=a.getItemPosition(d),p=new e.common.Size(a.getContentSize()),f=s.getOptions().scale;return m.placeholderOffset=o.getPlaceholderOffset(),u.forceCenterOnCursor&&(l=r.getTransform(),null!=g&&((c=function(t){var n=!1;return l.transformRect(t.x,t.y,t.width,t.height,!0,this,(function(t,o,i,a){n=new e.common.Rect(t,o,i,a)})),n}(g.actualPosition)).scale(f),p.scale(f),h=n.getScrollPanelSize(),m.placeholderOffset=new e.common.Point(Math.max(Math.min(c.horizontalCenter()-h.width/2,p.width-h.width),0),Math.max(Math.min(c.verticalCenter()-h.height/2,p.height-h.height),0)))),!0},getPlaceholderOffset:function(){return m.placeholderOffset}}},e.orgdiagram.CreateTransformTask=function(t,n){var o={transform:null};return{process:function(){var i=t.getOptions(),a=new e.common.Size(n.getContentSize());return o.transform=new e.common.Transform,o.transform.setOrientation(i.orientationType),o.transform.size=new e.common.Size(a),!0},getTransform:function(){return o.transform},getTreeItemForMousePosition:function(e,t,i){var a=null;return o.transform.transformPoint(e,t,!1,this,(function(e,t){a=n.getTreeItemForMousePosition(e,t,i)})),a},description:"Create oordiante system tranfromation object."}},e.orgdiagram.CurrentControlSizeTask=function(t,n){var o={scrollPanelSize:null},i={},a=new e.common.ObjectReader({scrollPanelSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!0),height:new e.common.ValueReader(["number"],!0)},!0)});return{process:function(){var e={isChanged:!1,hash:i},r=t.getOptions(),s=!1,l=n.getOptions();switch(o=a.read(o,r,"layout",e),l.pageFitMode){case 1:case 2:case 3:case 0:s=e.isChanged}return s},getScrollPanelSize:function(){return o.scrollPanelSize},getOptimalPanelSize:function(){return new e.common.Size(o.scrollPanelSize.width-25,o.scrollPanelSize.height-25)}}},e.orgdiagram.CurrentScrollPositionTask=function(t){var n={placeholderOffset:null},o={},i=new e.common.ObjectReader({placeholderOffset:new e.common.ObjectReader({x:new e.common.ValueReader(["number"],!0),y:new e.common.ValueReader(["number"],!0)},!0)});return{process:function(){var e={isChanged:!1,hash:o},a=t.getOptions();return n=i.read(n,a,"layout",e),e.isChanged},getPlaceholderOffset:function(){return n.placeholderOffset}}},e.orgdiagram.BackgroundAnnotationOptionTask=function(t,n){var o=[],i={},a=new e.common.ArrayReader(new e.common.ObjectReader({items:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0),includeChildren:new e.common.ValueReader(["boolean"],!1,n.includeChildren),zOrderType:new e.common.EnumerationReader(e.common.ZOrderType,!1,n.zOrderType),offset:new e.common.ObjectReader({left:new e.common.ValueReader(["number"],!1,n.offset.left),top:new e.common.ValueReader(["number"],!1,n.offset.top),right:new e.common.ValueReader(["number"],!1,n.offset.right),bottom:new e.common.ValueReader(["number"],!1,n.offset.bottom)},!1,n.offset),lineWidth:new e.common.ValueReader(["number"],!1,n.lineWidth),opacity:new e.common.ValueReader(["number"],!1,n.opacity),borderColor:new e.common.ValueReader(["string"],!1,n.borderColor),fillColor:new e.common.ValueReader(["string"],!1,n.fillColor),lineType:new e.common.EnumerationReader(e.common.LineType,!1,n.lineType),selectItems:new e.common.ValueReader(["boolean"],!1,n.selectItems)}),!1);return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getAnnotations(4,null),"annotations",e),e.isChanged},getAnnotations:function(){return o}}},e.orgdiagram.ConnectorAnnotationOptionTask=function(t,n,o){var i=[],a={},r=new e.common.ArrayReader(new e.common.ObjectReader({zOrderType:new e.common.EnumerationReader(e.common.ZOrderType,!1,n.zOrderType),fromItem:new e.common.ValueReader(["string","number"],!0),toItem:new e.common.ValueReader(["string","number"],!0),connectorShapeType:new e.common.EnumerationReader(e.common.ShapeType,!1,n.connectorShapeType),connectorPlacementType:new e.common.EnumerationReader(e.common.ConnectorPlacementType,!1,n.connectorPlacementType),labelPlacementType:new e.common.EnumerationReader(e.common.ConnectorLabelPlacementType,!1,n.labelPlacementType),offset:new e.common.ObjectReader({left:new e.common.ValueReader(["number"],!1,n.offset.left),top:new e.common.ValueReader(["number"],!1,n.offset.top),right:new e.common.ValueReader(["number"],!1,n.offset.right),bottom:new e.common.ValueReader(["number"],!1,n.offset.bottom)},!1,n.offset),lineWidth:new e.common.ValueReader(["number"],!1,n.lineWidth),color:new e.common.ValueReader(["string"],!1,n.color),lineType:new e.common.EnumerationReader(e.common.LineType,!1,n.lineType),selectItems:new e.common.ValueReader(["boolean"],!1,n.selectItems),label:new e.common.ValueReader(["string","object"],!1,n.label),labelSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,n.labelSize.width),height:new e.common.ValueReader(["number"],!1,n.labelSize.height)},!1,n.labelSize)}),!1);return{process:function(){var e={isChanged:!1,hash:a};return i=r.read(i,t.getAnnotations(0,o),"annotations",e),e.isChanged},getAnnotations:function(){return i}}},e.orgdiagram.HighlightPathAnnotationOptionTask=function(t,n,o){var i=[],a={},r=new e.common.ArrayReader(new e.common.ObjectReader({zOrderType:new e.common.EnumerationReader(e.common.ZOrderType,!1,n.zOrderType),lineWidth:new e.common.ValueReader(["number"],!1,n.lineWidth),opacity:new e.common.ValueReader(["number"],!1,n.opacity),color:new e.common.ValueReader(["string"],!1,n.color),lineType:new e.common.EnumerationReader(e.common.LineType,!1,n.lineType),items:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!1),selectItems:new e.common.ValueReader(["boolean"],!1,n.selectItems),showArrows:new e.common.ValueReader(["boolean"],!1,n.showArrows)},!1));return{process:function(){var e={isChanged:!1,hash:a};return i=r.read(i,t.getAnnotations(2,o),"annotations",e),e.isChanged},getAnnotations:function(){return i}}},e.orgdiagram.ShapeAnnotationOptionTask=function(t,n,o){var i=[],a={},r=new e.common.ArrayReader(new e.common.ObjectReader({zOrderType:new e.common.EnumerationReader(e.common.ZOrderType,!1,n.zOrderType),items:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0),shapeType:new e.common.EnumerationReader(e.common.ShapeType,!1,n.shapeType),offset:new e.common.ObjectReader({left:new e.common.ValueReader(["number"],!1,n.offset.left),top:new e.common.ValueReader(["number"],!1,n.offset.top),right:new e.common.ValueReader(["number"],!1,n.offset.right),bottom:new e.common.ValueReader(["number"],!1,n.offset.bottom)},!1,n.offset),lineWidth:new e.common.ValueReader(["number"],!1,n.lineWidth),cornerRadius:new e.common.ValueReader(["string"],!1,n.cornerRadius),opacity:new e.common.ValueReader(["number"],!1,n.opacity),borderColor:new e.common.ValueReader(["string"],!1,n.borderColor),fillColor:new e.common.ValueReader(["string"],!1,n.fillColor),lineType:new e.common.EnumerationReader(e.common.LineType,!1,n.lineType),selectItems:new e.common.ValueReader(["boolean"],!1,n.selectItems),label:new e.common.ValueReader(["string","object"],!1,n.label),labelSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,n.labelSize.width),height:new e.common.ValueReader(["number"],!1,n.labelSize.height)},!1,n.labelSize),labelPlacement:new e.common.EnumerationReader(e.common.PlacementType,!1,n.labelPlacement),labelOffset:new e.common.ValueReader(["number"],!1,n.labelOffset)},!1));return{process:function(){var e={isChanged:!1,hash:a};return i=r.read(i,t.getAnnotations(1,o),"annotations",e),e.isChanged},getAnnotations:function(){return i}}},e.orgdiagram.SplitAnnotationsOptionTask=function(t){var n={annotations:{}};return{process:function(){var o,i,a,r,s,l,m=t.getOptions().annotations,c={};if(e.common.isArray(m))for(o=0,i=m.length;o<i;o+=1){switch(r=(a=m[o]).annotationType){case 1:case 0:case 2:switch(a.zOrderType){case 1:s=1;break;case 2:case 0:default:s=2}break;case 4:case 3:default:s=null}null!=r&&(l=1e3*r+(s||0),c.hasOwnProperty(l)||(c[l]=[]),c[l].push(a))}return n.annotations=c,!0},getAnnotations:function(e,t){var o=1e3*e+(t||0);return n.annotations[o]}}},e.orgdiagram.CursorItemOptionTask=function(t,n){var o={},i=new e.common.ObjectReader({cursorItem:new e.common.ValueReader(["string","number"],!0),navigationMode:new e.common.EnumerationReader(e.common.NavigationMode,!1,n.navigationMode)});return{process:function(){var e={isChanged:!1};return o=i.read(o,t.getOptions(),"options",e),e.isChanged},getCursorItem:function(){return o.cursorItem},hasCursorEnabled:function(){switch(o.navigationMode){case 0:case 1:return!0}return!1},description:"Checks currenct cursor item option."}},e.orgdiagram.CursorSelectionPathModeOptionTask=function(t,n){var o={},i=new e.common.ObjectReader({selectionPathMode:new e.common.EnumerationReader(e.common.SelectionPathMode,!1,n.selectionPathMode)});return{process:function(){var e={isChanged:!1};return o=i.read(o,t.getOptions(),"options",e),e.isChanged},getSelectionPathMode:function(){return o.selectionPathMode},description:"Checks cursor selection path option."}},e.orgdiagram.HighlightItemOptionTask=function(t,n){var o={},i=new e.common.ObjectReader({highlightItem:new e.common.ValueReader(["string","number"],!0),navigationMode:new e.common.EnumerationReader(e.common.NavigationMode,!1,n.navigationMode),highlightGravityRadius:new e.common.ValueReader(["number"],!1,n.highlightGravityRadius)});return{process:function(){var e={isChanged:!1};return o=i.read(o,t.getOptions(),"options",e),e.isChanged},getHighlightItem:function(){return o.highlightItem},hasHighlightEnabled:function(){switch(o.navigationMode){case 0:case 3:return!0}return!1},getGravityRadius:function(){return o.highlightGravityRadius},description:"Checks highlight item option."}},e.orgdiagram.SelectedItemsOptionTask=function(t){var n={},o={},i=new e.common.ObjectReader({selectedItems:new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0)});return{process:function(){var e={isChanged:!1,hash:o},a=t.getOptions();return n=i.read(n,a,"options",e),e.isChanged},getSelectedItems:function(){return n.selectedItems},description:"Checks user selected items option."}},e.orgdiagram.CalloutOptionTask=function(t,n,o){var i={},a={},r=new e.common.ObjectReader({calloutMaximumVisibility:new e.common.EnumerationReader(e.common.Visibility,!1,n.calloutMaximumVisibility),showCallout:new e.common.ValueReader(["boolean"],!1,n.showCallout),calloutPlacementOffset:new e.common.ValueReader(["number"],!1,n.calloutPlacementOffset),orientationType:new e.common.EnumerationReader(e.common.OrientationType,!1,n.orientationType),defaultTemplateName:new e.common.ValueReader(["string"],!0),defaultCalloutTemplateName:new e.common.ValueReader(["string"],!0),calloutfillColor:new e.common.ValueReader(["string"],!1,n.calloutfillColor),calloutBorderColor:new e.common.ValueReader(["string"],!0),calloutOffset:new e.common.ValueReader(["number"],!1,n.calloutOffset),calloutCornerRadius:new e.common.ValueReader(["string"],!1,n.calloutCornerRadius),calloutPointerWidth:new e.common.ValueReader(["string"],!1,n.calloutPointerWidth),calloutLineWidth:new e.common.ValueReader(["number"],!1,n.calloutLineWidth),calloutOpacity:new e.common.ValueReader(["number"],!1,n.calloutOpacity),items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),showCallout:new e.common.EnumerationReader(e.common.Enabled,!1,n.showCallout),calloutTemplateName:new e.common.ValueReader(["string"],!0),templateName:new e.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var e={isChanged:!1,hash:a};return i=r.read(i,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return i},getItemOptions:function(e){return a["options-items"][e]},description:"Checks item callout options."}},e.orgdiagram.ConnectorsOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({arrowsDirection:new e.common.EnumerationReader(e.common.GroupByType,!1,n.arrowsDirection),showExtraArrows:new e.common.ValueReader(["boolean"],!1,n.showExtraArrows),extraArrowsMinimumSpace:new e.common.ValueReader(["number"],!1,n.extraArrowsMinimumSpace),connectorType:new e.common.EnumerationReader(e.common.ConnectorType,!1,n.hasOwnProperty("connectorType")?n.connectorType:0),showNeigboursConnectorsHighlighted:new e.common.EnumerationReader(e.common.ConnectorType,!1,!!n.hasOwnProperty("showNeigboursConnectorsHighlighted")&&n.showNeigboursConnectorsHighlighted),elbowType:new e.common.EnumerationReader(e.common.ElbowType,!1,n.elbowType),bevelSize:new e.common.ValueReader(["number"],!1,n.bevelSize),elbowDotSize:new e.common.ValueReader(["number"],!1,n.elbowDotSize),linesColor:new e.common.ValueReader(["string"],!1,n.linesColor),linesWidth:new e.common.ValueReader(["number"],!1,n.linesWidth),linesType:new e.common.EnumerationReader(e.common.LineType,!1,n.linesType),highlightLinesColor:new e.common.ValueReader(["string"],!1,n.highlightLinesColor),highlightLinesWidth:new e.common.ValueReader(["number"],!1,n.highlightLinesWidth),highlightLinesType:new e.common.EnumerationReader(e.common.LineType,!1,n.highlightLinesType)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o},description:"Checks connector lines drawing options."}},e.orgdiagram.ItemsContentOptionTask=function(t,n){var o={},i={},a={},r=new e.common.ObjectReader({items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),title:new e.common.ValueReader(["string"],!0),description:new e.common.ValueReader(["string"],!0),image:new e.common.ValueReader(["string"],!0),context:new e.common.ValueReader(["string","number","object"],!0),itemTitleColor:new e.common.ValueReader(["string"],!1,n.itemTitleColor),groupTitle:new e.common.ValueReader(["string"],!1,n.groupTitle),groupTitleColor:new e.common.ValueReader(["string"],!1,n.groupTitleColor)}),!0,"id",!0,!0)});return{process:function(){var e={isChanged:!1,hash:i,sourceHash:a};return o=r.read(o,t.getOptions(),"options",e),e.isChanged},getItems:function(){return o.items},getConfig:function(e){return a["options-items"][e]},description:"Checks items configuration options effecting their placement in layout."}},e.orgdiagram.ItemsOptionTask=function(t,n){var o={},i={},a={},r=new e.common.ObjectReader({items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),parent:new e.common.ValueReader(["string","number"],!0),itemType:new e.common.EnumerationReader(e.orgdiagram.ItemType,!1,n.itemType),adviserPlacementType:new e.common.EnumerationReader(e.common.AdviserPlacementType,!1,n.adviserPlacementType),childrenPlacementType:new e.common.EnumerationReader(e.common.ChildrenPlacementType,!1,n.childrenPlacementType),placeAdvisersAboveChildren:new e.common.EnumerationReader(e.common.Enabled,!1,n.placeAdvisersAboveChildren),placeAssistantsAboveChildren:new e.common.EnumerationReader(e.common.Enabled,!1,n.placeAssistantsAboveChildren),isVisible:new e.common.ValueReader(["boolean"],!1,n.isVisible),isActive:new e.common.ValueReader(["boolean"],!1,n.isActive),levelOffset:new e.common.ValueReader(["number"],!0)}),!0,"id",!0,!0)});return{process:function(){var e={isChanged:!1,hash:i,sourceHash:a};return o=r.read(o,t.getOptions(),"options",e),e.isChanged},getItems:function(){return o.items},getConfig:function(e){return a["options-items"][e]},description:"Checks items configuration options effecting their placement in layout."}},e.orgdiagram.ItemsSizesOptionTask=function(t,n,o,i){var a={},r={},s=new e.common.ObjectReader({defaultTemplateName:new e.common.ValueReader(["string"],!0),defaultLabelAnnotationTemplate:new e.common.ValueReader(["string"],!0),hasSelectorCheckbox:new e.common.EnumerationReader(e.common.Enabled,!1,n.hasSelectorCheckbox),hasButtons:new e.common.EnumerationReader(e.common.Enabled,!1,n.hasButtons),buttonsPanelSize:new e.common.ValueReader(["number"],!1,n.buttonsPanelSize),groupTitlePanelSize:new e.common.ValueReader(["number"],!1,n.groupTitlePanelSize),groupTitlePlacementType:new e.common.EnumerationReader(e.common.AdviserPlacementType,!1,n.groupTitlePlacementType),checkBoxPanelSize:new e.common.ValueReader(["number"],!1,n.checkBoxPanelSize),selectCheckBoxLabel:new e.common.ValueReader(["string"],!1,n.selectCheckBoxLabel),buttons:new e.common.ArrayReader(new e.common.ObjectReader({name:new e.common.ValueReader(["string"],!0),icon:new e.common.ValueReader(["string"],!0),text:new e.common.ValueReader(["boolean"],!1,!1),tooltip:new e.common.ValueReader(["string"],!0),size:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,i.size.width),height:new e.common.ValueReader(["number"],!1,i.size.height)},!1,i.size)}),!0,"name"),onButtonsRender:new e.common.FunctionReader,pageFitMode:new e.common.EnumerationReader(e.common.PageFitMode,!1,n.pageFitMode),minimalVisibility:new e.common.EnumerationReader(e.common.Visibility,!1,n.minimalVisibility),selectionPathMode:new e.common.EnumerationReader(e.common.SelectionPathMode,!1,n.selectionPathMode),autoSizeMinimum:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,n.autoSizeMinimum.width),height:new e.common.ValueReader(["number"],!1,n.autoSizeMinimum.height)},!1,n.autoSizeMinimum),autoSizeMaximum:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,n.autoSizeMaximum.width),height:new e.common.ValueReader(["number"],!1,n.autoSizeMaximum.height)},!1,n.autoSizeMaximum),scale:new e.common.ValueReader(["number"],!1,n.scale),maximumScale:new e.common.ValueReader(["number"],!1,n.maximumScale),minimumScale:new e.common.ValueReader(["number"],!1,n.minimumScale),normalLevelShift:new e.common.ValueReader(["number"],!1,n.normalLevelShift),dotLevelShift:new e.common.ValueReader(["number"],!1,n.dotLevelShift),lineLevelShift:new e.common.ValueReader(["number"],!1,n.lineLevelShift),normalItemsInterval:new e.common.ValueReader(["number"],!1,n.normalItemsInterval),dotItemsInterval:new e.common.ValueReader(["number"],!1,n.dotItemsInterval),lineItemsInterval:new e.common.ValueReader(["number"],!1,n.lineItemsInterval),cousinsIntervalMultiplier:new e.common.ValueReader(["number"],!1,n.cousinsIntervalMultiplier),verticalAlignment:new e.common.EnumerationReader(e.common.VerticalAlignmentType,!1,n.verticalAlignment),items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),groupTitle:new e.common.ValueReader(["string","number"],!0),isVisible:new e.common.ValueReader(["boolean","number"],!1,o.isVisible),isActive:new e.common.ValueReader(["boolean","number"],!1,o.isActive),hasSelectorCheckbox:new e.common.EnumerationReader(e.common.Enabled,!1,o.hasSelectorCheckbox),hasButtons:new e.common.EnumerationReader(e.common.Enabled,!1,o.hasButtons),templateName:new e.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var e={isChanged:!1,hash:r};return a=s.read(a,t.getOptions(),"options",e),e.isChanged},getItemOptions:function(e){return r["options-items"][e]},getOptions:function(){return a},description:"Checks items size options."}},e.orgdiagram.LabelsOptionTask=function(t,n,o){var i={},a={},r=new e.common.ObjectReader({showLabels:new e.common.EnumerationReader(e.common.Enabled,!1,n.showLabels),labelOffset:new e.common.ValueReader(["number"],!1,n.labelOffset),labelFontSize:new e.common.ValueReader(["string"],!1,n.labelFontSize),labelFontFamily:new e.common.ValueReader(["string"],!1,n.labelFontFamily),labelFontStyle:new e.common.ValueReader(["string"],!1,n.labelFontStyle),labelFontWeight:new e.common.ValueReader(["string"],!1,n.labelFontWeight),labelColor:new e.common.ValueReader(["string"],!1,n.labelColor),labelSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,n.labelSize.width),height:new e.common.ValueReader(["number"],!1,n.labelSize.height)},!1,n.labelSize),labelOrientation:new e.common.EnumerationReader(e.text.TextOrientationType,!1,n.labelOrientation),labelPlacement:new e.common.EnumerationReader(e.common.PlacementType,!1,n.labelPlacement),arrowsDirection:new e.common.EnumerationReader(e.common.GroupByType,!1,n.arrowsDirection),items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),label:new e.common.ValueReader(["string","number","object"],!0),showLabel:new e.common.EnumerationReader(e.common.Enabled,!1,o.showLabel),labelSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,0),height:new e.common.ValueReader(["number"],!1,0)},!0),labelOrientation:new e.common.EnumerationReader(e.text.TextOrientationType,!1,o.labelOrientation),labelPlacement:new e.common.EnumerationReader(e.common.PlacementType,!1,o.labelPlacement)}),!0,"id")});return{process:function(){var e={isChanged:!1,hash:a};return i=r.read(i,t.getOptions(),"options",e),e.isChanged},getItemOptions:function(e){return a["options-items"][e]},getItemsOptions:function(){return a["options-items"]},getOptions:function(){return i},description:"Checks items labels options."}},e.orgdiagram.LayoutOptionsTask=function(e,t){var n={};return{process:function(){return n=e(),!0},getOptions:function(){return n},description:"Raw layout options."}},e.orgdiagram.MinimizedItemsOptionTask=function(t){var n={},o={},i=new e.common.ObjectReader({minimizedItemShapeType:new e.common.EnumerationReader(e.common.ShapeType,!0),items:new e.common.ArrayReader(new e.common.ObjectReader({id:new e.common.ValueReader(["string","number"],!0),minimizedItemShapeType:new e.common.EnumerationReader(e.common.ShapeType,!0),itemTitleColor:new e.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var e={isChanged:!1,hash:o};return n=i.read(n,t.getOptions(),"options",e),e.isChanged},getItemOptions:function(e){return o["options-items"][e]},getOptions:function(){return n},description:"Checks minimized items drawing options."}},e.orgdiagram.OptionsTask=function(e){return{process:function(){return!0},getOptions:e,description:"Raw options."}},e.orgdiagram.OrientationOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({orientationType:new e.common.EnumerationReader(e.common.OrientationType,!1,n.orientationType)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o},description:"Checks diagram orientation options."}},e.orgdiagram.ScaleOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({scale:new e.common.ValueReader(["number"],!1,n.scale),minimumScale:new e.common.ValueReader(["number"],!1,n.minimumScale),maximumScale:new e.common.ValueReader(["number"],!1,n.maximumScale)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o},description:"Checks control scale options."}},e.orgdiagram.TemplatesOptionTask=function(t,n,o,i){var a={},r={},s=new e.common.ObjectReader({groupTitleVerticalAlignment:new e.common.EnumerationReader(e.common.VerticalAlignmentType,!1,n.groupTitleVerticalAlignment),groupTitleHorizontalAlignment:new e.common.EnumerationReader(e.common.HorizontalAlignmentType,!1,n.groupTitleHorizontalAlignment),groupTitleOrientation:new e.common.EnumerationReader(e.text.TextOrientationType,!1,n.groupTitleOrientation),groupTitleFontSize:new e.common.ValueReader(["string"],!1,n.groupTitleFontSize),groupTitleFontFamily:new e.common.ValueReader(["string"],!1,n.groupTitleFontFamily),groupTitleColor:new e.common.ValueReader(["string"],!1,n.groupTitleColor),groupTitleFontWeight:new e.common.ValueReader(["string"],!1,n.groupTitleFontWeight),groupTitleFontStyle:new e.common.ValueReader(["string"],!1,n.groupTitleFontStyle),itemTitleFirstFontColor:new e.common.ValueReader(["string"],!1,n.itemTitleFirstFontColor),itemTitleSecondFontColor:new e.common.ValueReader(["string"],!1,n.itemTitleSecondFontColor),selectCheckBoxLabel:new e.common.ValueReader(["string"],!1,n.selectCheckBoxLabel),onItemRender:new e.common.FunctionReader,onCursorRender:new e.common.FunctionReader,onHighlightRender:new e.common.FunctionReader,templates:new e.common.ArrayReader(new e.common.ObjectReader({name:new e.common.ValueReader(["string"],!0),isActive:new e.common.ValueReader(["boolean"],!1,i.isActive),itemSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,i.itemSize.width),height:new e.common.ValueReader(["number"],!1,i.itemSize.height)},!1,i.itemSize),itemBorderWidth:new e.common.ValueReader(["number"],!1,i.itemBorderWidth),itemTemplate:new e.common.ValueReader(["string","object"],!0),minimizedItemShapeType:new e.common.EnumerationReader(e.common.ShapeType,!0),minimizedItemSize:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,i.minimizedItemSize.width),height:new e.common.ValueReader(["number"],!1,i.minimizedItemSize.height)},!1,i.minimizedItemSize),minimizedItemCornerRadius:new e.common.ValueReader(["number"],!0),minimizedItemLineWidth:new e.common.ValueReader(["number"],!1,i.minimizedItemLineWidth),minimizedItemBorderColor:new e.common.ValueReader(["string"],!0),minimizedItemLineType:new e.common.EnumerationReader(e.common.LineType,!1,i.minimizedItemLineType),minimizedItemFillColor:new e.common.ValueReader(["string"],!0),minimizedItemOpacity:new e.common.ValueReader(["number"],!1,i.minimizedItemOpacity),highlightPadding:new e.common.ObjectReader({left:new e.common.ValueReader(["number"],!1,i.highlightPadding.left),top:new e.common.ValueReader(["number"],!1,i.highlightPadding.top),right:new e.common.ValueReader(["number"],!1,i.highlightPadding.right),bottom:new e.common.ValueReader(["number"],!1,i.highlightPadding.bottom)},!1,i.highlightPadding),highlightBorderWidth:new e.common.ValueReader(["number"],!1,i.highlightBorderWidth),highlightTemplate:new e.common.ValueReader(["string","object"],!0),cursorPadding:new e.common.ObjectReader({left:new e.common.ValueReader(["number"],!1,i.cursorPadding.left),top:new e.common.ValueReader(["number"],!1,i.cursorPadding.top),right:new e.common.ValueReader(["number"],!1,i.cursorPadding.right),bottom:new e.common.ValueReader(["number"],!1,i.cursorPadding.bottom)},!1,i.cursorPadding),cursorBorderWidth:new e.common.ValueReader(["number"],!1,i.cursorBorderWidth),cursorTemplate:new e.common.ValueReader(["string","object"],!0),buttons:new e.common.ArrayReader(new e.common.ObjectReader({name:new e.common.ValueReader(["string"],!0),icon:new e.common.ValueReader(["string"],!0),text:new e.common.ValueReader(["boolean"],!1,!1),tooltip:new e.common.ValueReader(["string"],!0),size:new e.common.ObjectReader({width:new e.common.ValueReader(["number"],!1,o.size.width),height:new e.common.ValueReader(["number"],!1,o.size.height)},!1,o.size)}),!0,"name"),onButtonsRender:new e.common.FunctionReader}),!0,"name")});return{process:function(){var e={isChanged:!1,hash:r};return a=s.read(a,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return a},description:"Checks items template options."}},e.orgdiagram.VisualTreeOptionTask=function(t,n){var o={},i={},a=new e.common.ObjectReader({leavesPlacementType:new e.common.EnumerationReader(e.common.ChildrenPlacementType,!1,n.leavesPlacementType),childrenPlacementType:new e.common.EnumerationReader(e.common.ChildrenPlacementType,!1,n.childrenPlacementType),placeAdvisersAboveChildren:new e.common.ValueReader(["boolean"],!1,n.placeAdvisersAboveChildren),placeAssistantsAboveChildren:new e.common.ValueReader(["boolean"],!1,n.placeAssistantsAboveChildren),maximumColumnsInMatrix:new e.common.ValueReader(["number"],!1,n.maximumColumnsInMatrix),horizontalAlignment:new e.common.EnumerationReader(e.common.HorizontalAlignmentType,!1,n.horizontalAlignment)});return{process:function(){var e={isChanged:!1,hash:i};return o=a.read(o,t.getOptions(),"options",e),e.isChanged},getOptions:function(){return o},description:"Checks items layout options."}},e.orgdiagram.CollinearVectorBundle=function(){var t=new e.common.Rect,n=[],o=[];return{addVector:function(e,i){n.push(e),o.push(i),t.addRect(e.from.x,e.from.y),t.addRect(e.to.x,e.to.y)},resolve:function(){if(1==n.length)o[0](0,1,1);else{var i=e.common.pile();!function(e){var i,a,r;if(t.width>t.height)for(i=0,a=n.length;i<a;i+=1)e((r=n[i]).from.x,r.to.x,o[i]);else for(i=0,a=n.length;i<a;i+=1)e((r=n[i]).from.y,r.to.y,o[i])}((function(e,t,n){i.add(e,t,n)})),i.resolve(this,(function(e,t,n,o,i,a){n(o,i,a)}))}}}},e.orgdiagram.ConnectorAnnotationOffsetResolver=function(){var t={};return{getOffset:function(n,o){var i=n.getLineKey();t.hasOwnProperty(i)||(t[i]=new e.orgdiagram.CollinearVectorBundle),t[i].addVector(n,o)},resolve:function(){for(var e in t)t.hasOwnProperty(e)&&t[e].resolve()}}},e.orgdiagram.DrawBackgroundAnnotationTask=function(t,n,o,i,a,r){var s,l;return{process:function(){var o=i.getAnnotations();return(s=t()).reset("placeholder",2),o.length>0&&(r.getItemsPositions(),l=n.getTransform(),function(t,n,o){var i,a,m,c,h,u,d,g,p,f,T,y,k,v,w,C;for(i=0,a=t.length;i<a;i+=1)if(null!=(w=t[i]).items&&w.items.length>0){for((d=new e.common.MergedRectangles(s)).transform=l,g=new e.orgdiagram.BackgroundAnnotationConfig,h=0,u=(k=["opacity","lineWidth","borderColor","fillColor","lineType"]).length;h<u;h+=1)d[v=k[h]]=w.hasOwnProperty(v)?w[v]:g[v];for(s.activate("placeholder",2),p=[],T={},m=0,c=w.items.length;m<c;m+=1)y=w.items[m],null!=(C=r.getItemPosition(y))&&(T[y]=!0,(f=new e.common.Rect(C.actualPosition)).offset(w.offset),p.push(f),w.includeChildren&&o.loopChildren(this,y,(function(t,n){T[t]||(T[t]=!0,null!=(C=r.getItemPosition(t))&&((f=new e.common.Rect(C.actualPosition)).offset(w.offset),p.push(f)))})));d.draw(p)}}(o,0,a.getLogicalFamily())),!1}}},e.orgdiagram.DrawConnectorAnnotationTask=function(t,n,o,i,a,r,s,l){var m,c,h,u;return{process:function(){switch(m=t(),c=n.getTransform(),i.getOptions(),h=s.getTemplate(),u=new e.common.Size(r.getContentSize()),l){case 1:m.reset("placeholder",4);break;case 2:m.reset("placeholder",14)}return function(t,n){var o,i,a,r,s,d,g,p,f,T=new e.common.PolylinesBuffer,y=e.orgdiagram.ConnectorAnnotationOffsetResolver(),k=0;switch(l){case 1:m.activate("placeholder",4);break;case 2:m.activate("placeholder",14)}for(o=0,i=t.length;o<i;o+=1)p=t[o],k=Math.max(k,p.lineWidth);for(o=0,i=t.length;o<i;o+=1)if(null!=(p=t[o]).fromItem&&null!=p.toItem&&(a=n(p.fromItem),s=n(p.toItem),null!=a&&null!=s)){switch(r=a.actualPosition,d=s.actualPosition,p.connectorPlacementType){case 0:g=new e.common.ConnectorOffbeat;break;case 1:g=new e.common.ConnectorStraight}var v;c.transformRect(0,0,p.labelSize.width,p.labelSize.height,!1,this,(function(t,n,o,i){v=new e.common.Size(o,i)}));var w=null;c.transformRect(0,0,u.width,u.height,!1,this,(function(t,n,o,i){w=new e.common.Size(o,i)}));var C=new e.common.PaletteItem({lineColor:p.color,lineWidth:p.lineWidth,lineType:p.lineType}),b=!e.common.isNullOrEmpty(p.label),P=new e.common.Rect(r).offset(p.offset),O=new e.common.Rect(d).offset(p.offset),S=3*p.lineWidth,I=6*k;g.draw(T,C,P,O,S,I,v,w,p.connectorShapeType,4,p.labelPlacementType,b,y,(function(t,n){!e.common.isNullOrEmpty(n.label)&&null!=t&&(c.transformRect(t.x,t.y,t.width,t.height,!0,this,(function(n,o,i,a){t=new e.common.Rect(n,o,i,a)})),(f=new e.common.RenderEventArgs).context=n,m.template(t.x,t.y,0,0,0,0,t.width,t.height,h.template(),h.getHashCode(),h.render,f,null))}),p)}y.resolve(),T.transform(c,!0),m.polylinesBuffer(T)}(a.getAnnotations(),r.getItemPosition),!1}}},e.orgdiagram.DrawConnectorsTask=function(t,n,o,i,a){return{process:function(){var r=t(),s=n.getGraph(),l=o.getOptions(),m=a.getPaletteManager();r.reset("placeholder",6),r.activate("placeholder",6);var c=new e.common.PolylinesBuffer,h=Math.round(l.elbowDotSize/2),u={},d={};return s.loopNodes(this,null,(function(t){s.loopNodeEdges(this,t,(function(n,o){if(!u.hasOwnProperty(n)){var a=null;o.fromOffset<=1?a=m.getPalette(1):(m.selectPalette(o.fromOffset),a=m.getPalette(0));var r=c.getPolyline(a);if(i&&null!=o.dotId&&0!=l.elbowType&&!d.hasOwnProperty(o.dotId)){var s=c.getPolyline(r.arrowPaletteItem),g=o.dotId==o.from?o.polyline.getStartPoint():o.polyline.getEndPoint();s.addSegment(new e.common.DotSegment(g.x-h,g.y-h,2*h,2*h,h)),d[o.dotId]=!0}var p=null;if(o.hasArrow)switch(l.arrowsDirection){case 1:p=o.isOppositeFlow?o.childrenArrowId:o.parentsArrowId;break;case 2:p=o.isOppositeFlow?o.parentsArrowId:o.childrenArrowId}if(null==p){var f=o.polyline.clone();if(o.hasMiddle&&0!=l.arrowsDirection){var T=!0;T=o.from==o.middleParent?2==l.arrowsDirection:1==l.arrowsDirection,o.isOppositeFlow&&(T=!T),f.addOffsetArrow(T,l.linesWidth,.4,l.extraArrowsMinimumSpace,(function(e){e.mergeTo(c.getPolyline(r.arrowPaletteItem))}))}o.from==t?f.mergeTo(r):r.addInverted(f)}else p==o.to?o.polyline.clone().mergeTo(r):r.addInverted(o.polyline.clone()),r.addArrow(l.linesWidth,(function(e){e.mergeTo(c.getPolyline(e.paletteItem))}))}})),u[t]=!0})),r.polylinesBuffer(c),!1}}},e.orgdiagram.DrawCursorTask=function(t,n,o,i,a,r,s,l){var m,c;return{process:function(){var o=s.getCursorTreeItem();return(m=t()).reset("placeholder",11),null!=o&&(c=n.getTransform(),function(t){m.activate("placeholder",11);var n,o=a.getItemPosition(t);if(null!=o){var s=o.actualPosition,h=new e.common.Rect(o.contentPosition),u=r.getTemplateParams(t).template,d=u.templateConfig,g=d.cursorPadding;h.offset(g.left,g.top,g.right,g.bottom),(n=new e.common.RenderEventArgs).context=i.getConfig(t),n.isCursor=!0,n.isSelected=l.isSelected(t),n.templateName=d.name,c.transformRect(s.x,s.y,s.width,s.height,!0,this,(function(e,t,o,i){m.template(e,t,o,i,h.x,h.y,h.width,h.height,u.cursorTemplate.template(),u.cursorTemplate.getHashCode(),u.cursorTemplate.render,n,{borderWidth:d.cursorBorderWidth})}))}}(o)),!1}}},e.orgdiagram.DrawHighlightAnnotationTask=function(t,n,o,i,a,r,s,l,m,c,h,u){var d,g,p,f=new e.common.Callout(t());return{process:function(){var T=c.getHighlightTreeItem();return(d=t()).reset("calloutplaceholder",15),null!==T&&(g=n.getTransform(),p=r.getOptions(),function(t){var n,c,T,y,k,v,w=!0,C=l.getItemPosition(t),b=C.actualPosition;switch(C.actualVisibility){case 2:case 3:case 1:switch((n=r.getItemOptions(t)).showCallout){case 2:case 1:w=!1;break;default:w=p.showCallout}w?(d.activate("placeholder",12),g.transformRect(b.x,b.y,b.width,b.height,!0,this,(function(r,g,w,b){var P,O,S,I,x=new e.common.Rect(r,g,w,b),A=new e.common.Point(x.horizontalCenter(),x.verticalCenter()),L=(P=i.getOptions().scale,O=new e.common.Point(m.getPlaceholderOffset()),S=new e.common.Rect(l.getContentSize()),I=new e.common.Size(o.getOptimalPanelSize()),O.scale(1/P),I.scale(1/P),new e.common.Rect(O.x,O.y,Math.min(I.width,S.width),Math.min(I.height,S.height)));C.actualVisibility>=p.calloutMaximumVisibility&&4!=C.actualVisibility||!L.overlaps(x)?(k=e.common.isNullOrEmpty(n.calloutTemplateName)?e.common.isNullOrEmpty(n.templateName)?e.common.isNullOrEmpty(p.defaultCalloutTemplateName)?p.defaultTemplateName:p.defaultCalloutTemplateName:n.templateName:n.calloutTemplateName,v=s.getTemplate(k,s.DefaultWidgetTemplateName),T=function(t,n,o){var i=new e.common.Rect(t.x,t.y,o.width,o.height);switch(p.orientationType){case 0:case 1:i.y-=o.height/4,t.x<n.horizontalCenter()?i.x+=p.calloutPlacementOffset:i.x-=p.calloutPlacementOffset+o.width;break;default:i.x-=o.width/4,t.y<n.verticalCenter()?i.y+=p.calloutPlacementOffset:i.y-=p.calloutPlacementOffset+o.height}return i.x<n.x?i.x=n.x+5:i.right()>n.right()&&(i.x-=i.right()-n.right()+5),i.y<n.y?i.y=n.y+5:i.bottom()>n.bottom()&&(i.y-=i.bottom()-n.bottom()+5),i}(A,L,v.templateConfig.itemSize),(c=new e.common.Rect(T)).addRect(A.x,A.y),c.offset(50),A.x-=c.x,A.y-=c.y,T.x-=c.x,T.y-=c.y,(y=new e.common.RenderEventArgs).context=a.getConfig(t),y.isCursor=h.getCursorTreeItem()==t,y.isSelected=u.isSelected(t),y.templateName=v.templateConfig.name,d.show("calloutplaceholder"),d.activate("calloutplaceholder",15),d.position("calloutplaceholder",c.x,c.y,c.width,c.height),d.template(T.x,T.y,T.width,T.height,0,0,T.width,T.height,v.itemTemplate.template(),v.itemTemplate.getHashCode(),v.itemTemplate.render,y,null),f.pointerPlacement=0,f.cornerRadius=p.calloutCornerRadius,f.offset=p.calloutOffset,f.opacity=p.calloutOpacity,f.lineWidth=p.calloutLineWidth,f.pointerWidth=p.calloutPointerWidth,f.borderColor=p.calloutBorderColor,f.fillColor=p.calloutfillColor,f.draw(A,T)):d.hide("calloutplaceholder")}))):d.hide("calloutplaceholder");break;case 4:d.hide("calloutplaceholder")}}(T)),!1}}},e.orgdiagram.DrawHighlightPathAnnotationTask=function(t,n,o,i,a){return{process:function(){var r=i.getGraph(),s=n.getOptions(),l=o.getAnnotations(),m=t();switch(a){case 1:m.reset("placeholder",5);break;case 2:m.reset("placeholder",7)}return function(t,n,o,i){var r,s,l,m,c,h,u,d,g,p,f,T,y,k;if(o.length>0){switch(T=new e.common.PolylinesBuffer,a){case 1:t.activate("placeholder",5);break;case 2:t.activate("placeholder",7)}var v={};for(r=0,s=o.length;r<s;r+=1)if(null!=(f=o[r]).items&&f.items.length>0&&(g=f.items.slice(0),h=g[0],i.hasNode(h)))for(l=1,m=g.length;l<m;l+=1)u=g[l],i.hasNode(u)&&(v.hasOwnProperty(h)?v[h].push(u):v[h]=[u],h=u);var w={};for(y in v)w[y]={},v.hasOwnProperty(y)&&i.getShortestPath(this,y,v[y],(function(e,t,n){return e.weight}),(function(e,t){w[y][t]=e}));for(r=0,s=o.length;r<s;r+=1){f=o[r];var C=new e.common.PaletteItem({lineColor:null!=f.color?f.color:n.highlightLinesColor,lineWidth:null!=f.lineWidth?f.lineWidth:n.highlightLinesWidth,lineType:null!=f.lineType?f.lineType:n.highlightLinesType,fillColor:null,opacity:f.opacity}),b=T.getPolyline(C);if(null!=f.items&&f.items.length>0&&(g=f.items.slice(0),h=g[0],i.hasNode(h)))for(l=1,m=g.length;l<m;l+=1)if(u=g[l],i.hasNode(u)){for(d=w[h][u]||[],c=d.length-2;c>=0;c-=1)y=d[c+1],k=d[c],(p=i.edge(y,k)).from==y?p.polyline.clone().mergeTo(b):b.addInverted(p.polyline.clone()),f.showArrows&&(k!=p.parentsArrowId&&k!=p.childrenArrowId||b.addArrow(f.lineWidth,(function(e){e.mergeTo(T.getPolyline(e.paletteItem))})));h=u}}t.polylinesBuffer(T)}}(m,s,l,r),!1}}},e.orgdiagram.DrawHighlightTask=function(t,n,o,i,a,r,s,l,m){var c,h;return{process:function(){var o=s.getHighlightTreeItem();return(c=t()).reset("placeholder",8),null!=o&&(h=n.getTransform(),function(t){c.activate("placeholder",8);var n,o=a.getItemPosition(t),s=o.actualPosition,u=r.getTemplateParams(t).template,d=u.templateConfig,g=d.highlightPadding;(n=new e.common.RenderEventArgs).context=i.getConfig(t),n.isCursor=l.getCursorTreeItem()==t,n.isSelected=m.isSelected(t),n.templateName=d.name,h.transformRect(s.x,s.y,s.width,s.height,!0,this,(function(t,i,a,r){var s=new e.common.Rect(0,0,Math.round(a),Math.round(r));s.offset(g.left,g.top,g.right,g.bottom),1==o.actualVisibility?c.template(t,i,a,r,s.x,s.y,s.width,s.height,u.highlightTemplate.template(),u.highlightTemplate.getHashCode(),u.highlightTemplate.render,n,{borderWidth:d.highlightBorderWidth}):c.template(Math.round(t),Math.round(i),Math.round(a),Math.round(r),Math.round(s.x),Math.round(s.y),Math.round(s.width),Math.round(s.height),u.dotHighlightTemplate.template(),u.dotHighlightTemplate.getHashCode(),u.dotHighlightTemplate.render,n,{borderWidth:d.highlightBorderWidth})}))}(o)),!1}}},e.orgdiagram.DrawItemLabelsTask=function(t,n,o,i,a){function r(t,n,o,i,a,r,s){var l,m,c,h,u,d=null;if(!e.common.isNullOrEmpty(a.label)){var g=function(e,t,n){var o=3;switch(t){case 0:switch(n){case 0:switch(e){case 3:case 2:o=0}break;case 2:break;case 1:o=2}break;case 2:break;case 1:o=2}return o}(r.actualVisibility,a.showLabel,s.showLabels);switch(g){case 0:u=r.leftPadding+r.rightPadding;break;case 2:u=1e4;break;case 3:u=0}if(3!=g){c=null!=a.labelSize?a.labelSize:s.labelSize;var p=3!=a.labelOrientation?a.labelOrientation:3!=s.labelOrientation?s.labelOrientation:0;switch(h=0!=a.labelPlacement?a.labelPlacement:0!=s.labelPlacement?s.labelPlacement:1,p){case 0:l=c.width,m=c.height;break;case 1:case 2:m=c.width,l=c.height}var f=function(t,n,o,i,a,r,s,l,m){var c,h,u;switch(t){case 0:case 1:switch(c=new e.common.Rect(o+a/2-s/2,i-m-l,s,l),n){case 0:h=0,u=2;break;case 1:h=1,u=1;break;case 2:h=2,u=1}break;case 2:case 11:switch(c=new e.common.Rect(o+a+m,i-m-l,s,l),n){case 0:h=1,u=2;break;case 1:h=1,u=0;break;case 2:h=2,u=2}break;case 3:switch(c=new e.common.Rect(o+a+m,i+r/2-l/2,s,l),n){case 0:h=1,u=1;break;case 1:h=0,u=0;break;case 2:h=0,u=2}break;case 4:case 12:switch(c=new e.common.Rect(o+a+m,i+r+m,s,l),n){case 0:h=1,u=0;break;case 1:h=2,u=0;break;case 2:h=1,u=2}break;case 5:switch(c=new e.common.Rect(o+a/2-s/2,i+r+m,s,l),n){case 0:h=0,u=0;break;case 1:h=2,u=1;break;case 2:h=1,u=1}break;case 6:case 10:switch(c=new e.common.Rect(o-s-m,i+r+m,s,l),n){case 0:h=2,u=0;break;case 1:h=2,u=2;break;case 2:h=1,u=0}break;case 7:switch(c=new e.common.Rect(o-s-m,i+r/2-l/2,s,l),n){case 0:h=2,u=1;break;case 1:h=0,u=2;break;case 2:h=0,u=0}break;case 8:case 9:switch(c=new e.common.Rect(o-s-m,i-m-l,s,l),n){case 0:h=2,u=2;break;case 1:h=1,u=2;break;case 2:h=2,u=0}}return{position:c,horizontalAlignmentType:h,verticalAlignmentType:u}}(h,p,t,n,o,i,l,m,s.labelOffset);(d=new e.common.Label(f.position)).labelType=g,d.weight=u,d.text=a.label,d.labelOrientation=p,d.horizontalAlignmentType=f.horizontalAlignmentType,d.verticalAlignmentType=f.verticalAlignmentType}}return d}return{process:function(){var o=i.getOptions(),s={graphics:t(),transform:n.getTransform(),treeItemsPositions:a.getItemsPositions()},l={showLabels:o.showLabels,labelFontSize:o.labelFontSize,labelFontFamily:o.labelFontFamily,labelFontStyle:o.labelFontStyle,labelFontWeight:o.labelFontWeight,labelColor:o.labelColor,itemsOptions:i.getItemsOptions(),labelSize:o.labelSize,labelOrientation:o.labelOrientation,labelPlacement:o.labelPlacement,labelOffset:o.labelOffset};return s.graphics.reset("placeholder",10),function(t,n){var o=[];if(0==n.showLabels||1==n.showLabels)for(var i in t.treeItemsPositions)if(t.treeItemsPositions.hasOwnProperty(i)){var a=n.itemsOptions[i],s=t.treeItemsPositions[i],l=s.actualPosition;null!=a&&t.transform.transformRect(l.x,l.y,l.width,l.height,!0,this,(function(t,i,l,m){switch(s.actualVisibility){case 1:0==n.showLabels&&((c=new e.common.Label(t,i,l,m)).weight=1e4,c.labelType=1,o.push(c));break;case 2:case 3:var c=r(t,i,l,m,a,s,n);null!=c&&o.push(c)}}))}0==n.showLabels&&e.common.getCrossingRectangles(this,o,(function(e,t){if(e.isActive&&t.isActive)switch(e.labelType){case 1:switch(t.labelType){case 1:break;case 0:case 2:t.isActive=!1}break;case 2:switch(t.labelType){case 1:e.isActive=!1;break;case 0:t.isActive=!1}break;case 0:switch(t.labelType){case 1:e.isActive=!1;break;case 0:e.weight<=t.weight?e.isActive=!1:t.isActive=!1;break;case 2:e.isActive=!1}}})),t.graphics.activate("placeholder",10);for(var m={fontSize:n.labelFontSize,fontFamily:n.labelFontFamily,fontStyle:n.labelFontStyle,fontWeight:n.labelFontWeight,fontColor:n.labelColor},c=0,h=o.length;c<h;c+=1){var u=o[c];if(u.isActive)switch(u.labelType){case 0:case 2:t.graphics.text(u.x,u.y,u.width,u.height,u.text,u.labelOrientation,u.horizontalAlignmentType,u.verticalAlignmentType,m)}}}(s,l),!1}}},e.orgdiagram.DrawMinimizedItemsTask=function(t,n,o,i,a,r){var s,l,m,c;return{process:function(){return s=t(),l=n.getTransform(),m=i.getOptions(),c=r.getItemsPositions(),s.reset("placeholder",9),function(){var t,n,o,r,h,u,d,g,p,f=new e.common.PolylinesBuffer,T=new e.common.Marker;for(var y in c)c.hasOwnProperty(y)&&(h=c[y],u=h.actualPosition,d=i.getItemOptions(y),l.transformRect(u.x,u.y,u.width,u.height,!0,this,(function(i,s,l,c){switch(h.actualVisibility){case 2:g=a.getTemplateParams(y),p=g.template.templateConfig,t=null,n=null,o=null,null!=d&&(t=d.itemTitleColor,n=d.itemTitleColor,o=d.minimizedItemShapeType),t=t||p.minimizedItemBorderColor||"#000080",n=n||p.minimizedItemFillColor||"#000080",null==o&&(o=null!==p.minimizedItemShapeType?p.minimizedItemShapeType:m.minimizedItemShapeType),r=null===p.minimizedItemCornerRadius?p.minimizedItemSize.width:p.minimizedItemCornerRadius,null==o||6==o?f.getPolyline(new e.common.PaletteItem({lineColor:t,lineWidth:p.minimizedItemLineWidth,lineType:p.minimizedItemLineType,fillColor:n,opacity:p.minimizedItemOpacity})).addSegment(new e.common.DotSegment(i,s,l,c,r)):T.draw(f,o,new e.common.Rect(i,s,l,c),new e.common.PaletteItem({lineColor:t,lineWidth:p.minimizedItemLineWidth,lineType:p.minimizedItemLineType,fillColor:n,opacity:p.minimizedItemOpacity}))}})));s.activate("placeholder",9),s.polylinesBuffer(f)}(),!1}}},e.orgdiagram.DrawShapeAnnotationTask=function(t,n,o,i,a,r,s,l){var m,c,h,u;return{process:function(){switch(m=t(),c=n.getTransform(),h=i.getOptions(),u=s.getTemplate(),l){case 1:m.reset("placeholder",3);break;case 2:m.reset("placeholder",13)}return function(t,n){var o,i,a,r,s,d,g,p,f,T,y,k,v,w,C;switch(l){case 1:o=m.activate("placeholder",3);break;case 2:o=m.activate("placeholder",13)}for(i=0,a=t.length;i<a;i+=1)if(null!=(w=t[i]).items&&w.items.length>0){for(y=new e.common.Rect,r=0,s=w.items.length;r<s;r+=1)null!=(T=n(w.items[r]))&&y.addRect(T.actualPosition);if(!y.isEmpty()){for(p=new e.common.Shape(m),f=new e.orgdiagram.ShapeAnnotationConfig,d=0,g=(k=["opacity","cornerRadius","shapeType","offset","lineWidth","borderColor","fillColor","lineType","labelSize","labelOffset","labelPlacement","zOrderType"]).length;d<g;d+=1)p[v=k[d]]=w.hasOwnProperty(v)?w[v]:f[v];p.position=y,p.orientationType=h.orientationType,p.panelSize=o.size,p.labelTemplate=u,p.hasLabel=null!=w.templateName||null!=w.label,(C=new e.common.RenderEventArgs).context=w,C.templateName=p.labelTemplate,c.transformRect(y.x,y.y,y.width,y.height,!0,this,(function(t,n,o,i){var a=new e.common.Rect(t,n,o,i);p.draw(a,C)}))}}}(a.getAnnotations(),r.getItemPosition),!1}}},e.orgdiagram.DrawTreeItemsTask=function(t,n,o,i,a,r,s,l,m,c,h,u,d,g){var p,f,T,y,k,v,w;return{process:function(){return f=t(),y=a.getOptions(),p=s.getItemsPositions(),T=n.getTransform(),k=g.getTemplate(),v=d.getTemplate(),w=u.getTemplate(),f.reset("placeholder",12),f.reset("placeholder",16),function(){var t,n,a,u=c.getCursorTreeItem(),d=function(){var t=null;if(null!=l){var n=i.getOptions().scale,a=new e.common.Point(l.getPlaceholderOffset()),r=new e.common.Rect(s.getContentSize()),m=new e.common.Size(o.getOptimalPanelSize());a.scale(1/n),m.scale(1/n),t=new e.common.Rect(a.x,a.y,Math.min(m.width,r.width),Math.min(m.height,r.height))}return t}();for(var g in p)p.hasOwnProperty(g)&&(n=p[g],a=n.actualPosition,1==n.actualVisibility&&T.transformRect(a.x,a.y,a.width,a.height,!0,this,(function(o,i,a,s){var l=new e.common.Rect(o,i,a,s);if(null==d||d.overlaps(l)){var c=m.getTemplateParams(g),p=c.template;if((t=new e.common.RenderEventArgs).id=g,t.context=r.getConfig(g),t.isCursor=g==u,t.isSelected=h.isSelected(g),t.templateName=p.templateConfig.name,t.template=c.template,t.isActive=c.isActive,t.hasSelectorCheckbox=c.hasSelectorCheckbox,t.hasButtons=c.hasButtons,t.hasGroupTitle=c.hasGroupTitle,t.buttons=c.buttons,t.onButtonsRender=c.onButtonsRender,f.activate("placeholder",12),f.template(o,i,a,s,n.contentPosition.x,n.contentPosition.y,n.contentPosition.width,n.contentPosition.height,p.itemTemplate.template(),p.itemTemplate.getHashCode(),p.itemTemplate.render,t,{borderWidth:p.templateConfig.itemBorderWidth}),c.hasGroupTitle){var T=0;switch(y.groupTitlePlacementType){case 2:case 0:T=2;break;case 3:T=a-(y.groupTitlePanelSize-4)}f.template(o,i,a,s,T,n.contentPosition.y,y.groupTitlePanelSize-4,n.contentPosition.height+2,w.template(),w.getHashCode(),w.render,t,null)}if(c.hasSelectorCheckbox&&(f.activate("placeholder",16),f.template(o,i,a,s,n.contentPosition.x,s-(y.checkBoxPanelSize-4),n.contentPosition.width,y.checkBoxPanelSize-4,v.template(),v.getHashCode(),v.render,t,null)),c.hasButtons){f.activate("placeholder",16);var C=0;switch(y.groupTitlePlacementType){case 2:case 0:C=a-(y.buttonsPanelSize-4);break;case 3:C=2}f.template(o,i,a,s,C,n.contentPosition.y,y.buttonsPanelSize-4,Math.max(n.contentPosition.height,s-n.contentPosition.y),k.template(),p.templateConfig.name+k.getHashCode(),k.render,t,null)}}})))}(),!1}}},e.orgdiagram.ActiveItemsTask=function(t,n){var o={items:[]},i={},a=new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0);return{process:function(){var e={isChanged:!1,hash:i},r=t.getOptions(),s=r.items;return o.items=a.read(o.items,function(e,t){var o,i,a=[];for(o=0,i=t.length;o<i;o+=1){var r=t[o],s=n.getTemplate(r.templateName,e.defaultTemplateName,n.DefaultWidgetTemplateName).templateConfig;r.isActive&&s.isActive&&a.push(r.id)}return a}(r,s),"items",e),e.isChanged},getActiveItems:function(){return i.items}}},e.orgdiagram.AnnotationLabelTemplateTask=function(e,t){var n={template:null};return{process:function(){return!1},getTemplate:function(){return null==n.template&&(n.template=new t.AnnotationLabelTemplate),n.template}}},e.orgdiagram.ButtonsTemplateTask=function(e,t){var n={template:null};return{process:function(){return!1},getTemplate:function(){return null==n.template&&(n.template=new t.ButtonsTemplate),n.template}}},e.orgdiagram.CheckBoxTemplateTask=function(e,t){var n={template:null};return{process:function(){return n.template=null,!0},getTemplate:function(){var o;return null==n.template&&(o=e.getOptions(),n.template=new t.CheckBoxTemplate(o.selectCheckBoxLabel)),n.template}}},e.orgdiagram.GroupTitleTemplateTask=function(e,t){var n={template:null};return{process:function(){return n.template=null,!0},getTemplate:function(){var o;return null==n.template&&(o=e.getOptions(),n.template=new t.GroupTitleTemplate(o)),n.template}}},e.orgdiagram.ItemTemplateParamsTask=function(t,n,o){var i={items:{}};function a(e,t,n){var o=!1;switch(t){case 0:switch(n){case 0:o=e;break;case 1:o=!0;break;case 2:o=!1}break;case 1:o=!0;break;case 2:o=!1}return o}return{process:function(){var r,s,l=t.getOptions(),m=l.buttons.length>0||null!=l.onButtonsRender,c=n.getCursorItem(),h=l.items;for(i.items={},r=0,s=h.length;r<s;r+=1){var u=h[r],d=new e.orgdiagram.TemplateParams,g=c==u.id,p=o.getTemplate(u.templateName,l.defaultTemplateName,o.DefaultWidgetTemplateName),f=p.templateConfig,T=null!=f.buttons&&f.buttons.length>0;T=T||null!=f.onButtonsRender,d.template=p,d.isActive=u.isActive&&f.isActive,d.isActive&&(d.hasSelectorCheckbox=a(g,u.hasSelectorCheckbox,l.hasSelectorCheckbox),d.hasButtons=(m||T)&&a(g,u.hasButtons,l.hasButtons),d.hasButtons&&(d.buttons=T?f.buttons:l.buttons,d.onButtonsRender=f.onButtonsRender||l.onButtonsRender)),d.hasGroupTitle=!e.common.isNullOrEmpty(u.groupTitle),i.items[u.id]=d}return!0},getTemplateParams:function(e){return i.items[e]}}},e.common.LabelAnnotationTemplate=function(){var e=["div",{class:["bp-item","bp-label-annotation"]}];return{template:function(){return e},getHashCode:function(){return"defaultLabelAnnotationTemplate"},render:function(e,t){var n=t.context;t.element.innerHTML=n.title}}},e.orgdiagram.ReadTemplatesTask=function(t,n){var o={templates:{}};return{process:function(){var i,a,r,s,l,m=t.getOptions(),c=m.templates;for(o.templates={},r=new e.orgdiagram.TemplateConfig,o.templates.DefaultWidgetTemplate=new e.orgdiagram.Template(r,new n.ItemTemplate(m,r),new n.HighlightTemplate(m,r),new n.DotHighlightTemplate(m,r),new n.CursorTemplate(m,r)),s="DefaultWidgetLabelAnnotationTemplate",(l=new e.orgdiagram.TemplateConfig).name=s,l.isActive=!1,l.itemSize=new e.common.Size(100,20),l.minimizedItemSize=new e.common.Size(0,0),l.minimizedItemCornerRadius=l.minimizedItemSize.width/2,r=l,o.templates.DefaultWidgetLabelAnnotationTemplate=new e.orgdiagram.Template(r,new n.LabelAnnotationTemplate,null,new n.DotHighlightTemplate(m,r),null),i=0,a=c.length;i<a;i+=1)r=c[i],o.templates[r.name]=new e.orgdiagram.Template(r,e.common.isNullOrEmpty(r.itemTemplate)?new n.ItemTemplate(m,r):new n.UserTemplate(m,r.itemTemplate,m.onItemRender),e.common.isNullOrEmpty(r.highlightTemplate)?new n.HighlightTemplate(m,r):new n.UserTemplate(m,r.highlightTemplate,m.onHighlightRender),new n.DotHighlightTemplate(m,r),e.common.isNullOrEmpty(r.cursorTemplate)?new n.CursorTemplate(m,r):new n.UserTemplate(m,r.cursorTemplate,m.onCursorRender));return!0},getTemplate:function(e,t,n){return o.templates[e]||o.templates[t]||o.templates[n]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}},e.orgdiagram.CombinedNormalVisibilityItemsTask=function(t,n,o,i,a,r,s,l,m,c,h,u){var d={items:[]},g={},p=[n,o,i,a,r,s,l,m,c,h,u],f=new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0);return{process:function(){var e={isChanged:!1,hash:g},n=t.getOptions();return d.items=f.read(d.items,function(e,t){var n,o,i,a,r,s,l,m=[],c={};for(n=0,o=e.length;n<o;n+=1)for(i=e[n],s=i.getItems(),a=0,r=s.length;a<r;a+=1)l=s[a],c.hasOwnProperty(l)||(m.push(l),c[l]=!0);return m}(p),"items",e),0!=n.pageFitMode&&1!=n.minimalVisibility||(e.isChanged=!1),e.isChanged},isItemSelected:function(e){return g.items.hasOwnProperty(e)}}},e.orgdiagram.CursorItemTask=function(e,t){var n={cursorTreeItemId:null};return{process:function(){var o=e.getCursorItem(),i=null!=t?t.getActiveItems():{};return n.cursorTreeItemId=null!=o&&i.hasOwnProperty(o)?o:null,!0},getCursorTreeItem:function(){return n.cursorTreeItemId},getItems:function(){return null!=n.cursorTreeItemId?[n.cursorTreeItemId]:[]}}},e.orgdiagram.CursorNeighboursTask=function(e,t){var n={items:[]};return{process:function(){var o=t.getLogicalFamily(),i=e.getCursorTreeItem();return n.items=function(e,t){var n=[];return null!==e&&t.loopNeighbours(this,e,(function(e,t,o){return 0===t.visibility&&n.push(e),!0})),n}(i,o),!0},getItems:function(){return n.items}}},e.orgdiagram.HighlightItemTask=function(e,t){var n={highlightTreeItemId:null};return{process:function(){var o=e.getHighlightItem(),i=null!=t?t.getActiveItems():{};return n.highlightTreeItemId=null!=o&&i.hasOwnProperty(o)?o:null,!0},getHighlightTreeItem:function(){return n.highlightTreeItemId}}},e.orgdiagram.NormalVisibilityItemsByAnnotationTask=function(t){var n={items:[]},o={},i=new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0);return{process:function(){var e={isChanged:!1,hash:o},a=t.getAnnotations();return n.items=i.read(n.items,function(e){var t,n,o,i,a,r,s,l=[],m={};for(t=0,n=e.length;t<n;t+=1)if((r=e[t]).selectItems)for(a=r.items,o=0,i=a.length;o<i;o+=1)null==(s=a[o])||m.hasOwnProperty(s)||(l.push(s),m[s]=!0);return l}(a),"items",e),e.isChanged},getItems:function(){return n.items}}},e.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask=function(t){var n={items:[]},o={},i=new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0);return{process:function(){var e={isChanged:!1,hash:o},a=t.getAnnotations();return n.items=i.read(n.items,function(e){var t,n,o,i=[],a={};for(t=0,n=e.length;t<n;t+=1)(o=e[t]).selectItems&&(null==o.fromItem||a.hasOwnProperty(o.fromItem)||(i.push(o.fromItem),a[o.fromItem]=!0),null==o.toItem||a.hasOwnProperty(o.toItem)||(i.push(o.toItem),a[o.toItem]=!0));return i}(a),"items",e),e.isChanged},getItems:function(){return n.items}}},e.orgdiagram.SelectedItemsTask=function(t){var n={items:[]},o={},i=new e.common.ArrayReader(new e.common.ValueReader(["string","number"],!0),!0);return{process:function(){var e={isChanged:!1,hash:o},a=t.getSelectedItems();return n.items=i.read(n.items,function(e){var t,n,o,i=[],a={};for(t=0,n=e.length;t<n;t+=1)null==(o=e[t])||a.hasOwnProperty(o)||(i.push(o),a[o]=!0);return i}(a),"items",e),e.isChanged},getItems:function(){return n.items},isSelected:function(e){return o.items.hasOwnProperty(e)}}},e.orgdiagram.SelectionPathItemsTask=function(e,t,n,o){var i={items:[]};return{process:function(){var a=o.getSelectionPathMode(),r=e.getLogicalFamily(),s=t.getCursorTreeItem(),l=n.getItems().slice(0);return l.push(s),i.items=function(e,t,n){var o,i,a,r=[],s={};for(i=0,a=e.length;i<a;i+=1)switch(o=e[i],n){case 0:break;case 1:t.loopParents(this,o,(function(e,n){if(null!=s[e])return t.SKIP;4!=n.visibility&&r.push(e),s[e]=!0}))}return r}(l,r,a),!0},getItems:function(){return i.items}}},e.orgdiagram.CombinedContextsTask=function(e,t){return{process:function(){return!0},getConfig:function(n){return e.getConfig(n)||null!=t&&t.getConfig(n)}}},e.orgdiagram.ConnectionsGraphTask=function(t,n,o,i,a,r){var s={graph:null,nodeid:0};return{process:function(){for(var l=t().activate("placeholder",6),m=i.getBundles(),c=i.getNestedLayoutBottomConnectorIds(),h=o.getOptions(),u=null!=r?r.getLoops():[],d={graph:e.common.graph(),nodeid:0},g={treeItemsPositions:a.getItemsPositions(),nestedLayoutBottomConnectorIds:c,transform:n.getTransform(),hasGraphics:l.hasGraphics},p={connectorType:h.connectorType,showExtraArrows:h.showExtraArrows,bevelSize:h.bevelSize,elbowType:h.elbowType},f=0,T=m.length;f<T;f+=1)m[f].trace(d,g,p);return function(e,t){for(var n=0,o=t.length;n<o;n+=1){var i=t[n];e.getShortestPath(this,i.from,[i.to],(function(e,t,n){return e.weight}),(function(t,n){for(var o=0,i=t.length-1;o<i;o+=1){var a=t[o],r=t[o+1],s=e.edge(a,r);s.isOppositeFlow=!0,s.hasArrow=!0}}))}}(d.graph,u,h.extraArrowsMinimumSpace),s=d,!0},getGraph:function(){return s.graph}}},e.orgdiagram.ItemsPositionsTask=function(t,n,o,i,a,r,s,l,m,c,h){var u,d,g,p,f,T,y,k,v,w,C={treeItemsPositions:{},panelSize:null};function b(t,n){var o,i,a,r;for(d=[],u.loopLevels(this,(function(t,n){var o=new e.orgdiagram.TreeLevelPosition;o.currentvisibility=1,d.push(o)})),o=0;o<=n;o+=1)i=t[o],d[i.level].currentvisibility=i.currentvisibility;return function(){var t=c.getCursorTreeItem();C.treeItemsPositions={},u.loopLevels(this,(function(n,o){var i=d[n];u.loopLevelItems(this,n,(function(n,o,a){var r=new e.orgdiagram.TreeItemPosition,s=h.isItemSelected(n)?1:o.visibility,l=m.getTemplateParams(n),c=0===s?i.currentvisibility:s,u=function(t,n,o,i,a){var r,s,l;switch(t){case 1:if(r=o.template.templateConfig,s=new e.common.Size(r.itemSize),l=new e.common.Rect(0,0,s.width,s.height),n&&(s.height+=r.cursorPadding.top+r.cursorPadding.bottom,s.width+=r.cursorPadding.left+r.cursorPadding.right,l.x=r.cursorPadding.left,l.y=r.cursorPadding.top),o.hasSelectorCheckbox&&(s.height+=i.checkBoxPanelSize),o.hasButtons)switch(s.width+=i.buttonsPanelSize,i.groupTitlePlacementType){case 3:l.x+=i.buttonsPanelSize}if(o.hasGroupTitle)switch(s.width+=i.groupTitlePanelSize,i.groupTitlePlacementType){case 3:break;default:l.x+=i.groupTitlePanelSize}break;case 2:r=o.template.templateConfig,s=new e.common.Size(r.minimizedItemSize);break;case 3:case 4:s=new e.common.Size}switch(a){case 2:case 3:s.invert()}return{actualSize:s,contentPosition:l}}(c,t==n,l,v,T.orientationType);r.actualVisibility=c,r.actualSize=u.actualSize,r.contentPosition=u.contentPosition,C.treeItemsPositions[n]=r}))}))}(),function(){var e,t;for(e=0,t=d.length;e<t;e+=1)d[e].currentOffset=0;g.loopPostOrder(this,(function(e,t,n,o){var i,a,r,s,l,m,c,h,T,b,P,O,x,A,L,M,R=C.treeItemsPositions[e],z=R.actualVisibility,B=u.getLevelIndex(e),D=d[B],V=w[0===z?D.currentvisibility:z]/2,F=D.currentOffset>0?V*t.relationDegree*v.cousinsIntervalMultiplier:0,H=8*y.linesWidth;if(R.leftPadding=V+F,R.rightPadding=V,0!=y.arrowsDirection&&(8&t.connectorPlacement&&(R.leftPadding+=H),2&t.connectorPlacement&&(R.rightPadding+=H)),R.offset=D.currentOffset+R.leftPadding,D.currentOffset=R.offset+R.actualSize.width+R.rightPadding,g.hasChildren(e))if((r=function(e){var t,n,o,i,a,r=C.treeItemsPositions[e.id],s=r.offset+r.actualSize.width/2,l=null;if(null===e.visualAggregatorId)switch(t=null,g.loopChildren(this,e.id,(function(e,n,o){if(1&(t=n).connectorPlacement)return!0})),n=C.treeItemsPositions[t.id],o=null,g.loopChildrenReversed(this,e.id,(function(e,t,n){if(1&(o=t).connectorPlacement)return!0})),i=C.treeItemsPositions[o.id],k.horizontalAlignment){case 1:l=n.offset+n.actualSize.width/2;break;case 2:l=i.offset+i.actualSize.width/2;break;case 0:l=(n.offset+i.offset+i.actualSize.width)/2}else a=C.treeItemsPositions[e.visualAggregatorId],l=a.offset+a.actualSize.width/2;return s-l}(t))>0)I(t,r);else if(r<0&&(S(t,r=-r),s=null,l={},c=null,null!==(h=g.parent(t.id))&&(g.loopChildrenReversed(this,h.id,(function(e,n,o){if(n===t)s=[];else if(null!==s){if(m=function(e,t){var n,o,i=null,a=function(e){var t,n,o,i,a=[];for(void 0===(t=f[e.id])&&(t=[]),(t=t.slice()).splice(0,0,e.id),n=0,o=t.length;n<o;n+=1)i=C.treeItemsPositions[t[n]],a[n]=i.offset+i.actualSize.width+i.rightPadding;return a}(e),r=function(e){var t,n,o,i,a=[];for(void 0===(t=p[e.id])&&(t=[]),(t=t.slice()).splice(0,0,e.id),n=0,o=t.length;n<o;n+=1)i=C.treeItemsPositions[t[n]],a[n]=i.offset-i.leftPadding;return a}(t),s=Math.min(a.length,r.length);for(n=0;n<s&&(o=r[n]-a[n],i=null!==i?Math.min(i,o):o,!(o<=0));n+=1);return Math.floor(i)}(n,t),l[n.id]=m,!(m>0))return c=n,!0;s.splice(0,0,n)}})),s.length>0))){if(T=null,null!==c)for((b=(b=[c]).concat(s)).push(t),T=[[c]],i=1,a=b.length;i<a;i+=1)P=b[i-1],O=b[i],2==P.gravity||1==O.gravity?T[T.length-1].push(O):T.push([O]);else(T=[s.slice(0)])[T.length-1].push(t);if(T.length>0)for(i=(s=T[T.length-1]).length-2;i>=0;i-=1)M=s[i],m=l[M.id],S(M,r=Math.min(m,r)),I(M,r);for(A=r/(T.length-1),x=T.length-2;x>0;x-=1)for(i=(L=T[x]).length-1;i>=0;i-=1)M=L[i],m=l[M.id],S(M,r=Math.min(x*A,Math.min(m,r))),I(M,r)}}))}(),function(){var e,t;u.loopLevels(this,(function(n,o){var i=d[n];switch(i.shift=0,i.depth=0,i.actualVisibility=4,e=null,t=null,u.loopLevelItems(this,n,(function(n,o,a){var r=C.treeItemsPositions[n];switch(i.depth=Math.max(i.depth,r.actualSize.height),r.actualVisibility){case 2:case 3:case 4:t=t?Math.min(t,r.actualSize.height):r.actualSize.height;break;default:e=e?Math.min(e,r.actualSize.height):r.actualSize.height}i.actualVisibility=Math.min(i.actualVisibility,r.actualVisibility)})),null==e&&(e=i.depth),null!=t&&t>e&&(e=t),v.verticalAlignment){case 0:i.horizontalConnectorsDepth=e/2;break;case 1:i.horizontalConnectorsDepth=i.depth/2;break;case 2:i.horizontalConnectorsDepth=i.depth-e/2}}))}(),function(){var e,t,n,o,i=v.lineLevelShift,a=0,r=0,s=8*y.linesWidth;switch(y.arrowsDirection){case 1:a=s,r=0;break;case 2:a=0,r=s}for(e=0,t=d.length;e<t;e+=1)n=d[e],o=l.getConnectorsStacksSizes(e),i+=n.setShift(i,O(n.actualVisibility),r,a,o.parentsStackSize)}(),new e.common.Rect(0,0,Math.round(function(){var e,t,n=0;for(e=0,t=d.length;e<t;e+=1)n=Math.max(n,d[e].currentOffset);return n+=v.normalItemsInterval}()),Math.round((a=d.length,(r=d[a-1]).shift+r.nextLevelShift)))}function P(e,t){var n=!1;switch(v.pageFitMode){case 1:t.width>=e.width&&(n=!0);break;case 2:t.height>=e.height&&(n=!0);break;case 3:t.height>=e.height&&t.width>=e.width&&(n=!0)}return n}function O(e){var t=0;switch(e){case 1:t=v.normalLevelShift;break;case 2:t=v.dotLevelShift;break;case 3:case 4:t=v.lineLevelShift}return t}function S(e,t){var n=C.treeItemsPositions[e.id];n.offset+=t;var o=d[u.getLevelIndex(e.id)];o.currentOffset=Math.max(o.currentOffset,n.offset+n.actualSize.width+n.rightPadding)}function I(e,t){var n,o;g.loopLevels(this,e.id,(function(e,i,a){return(n=C.treeItemsPositions[e]).offset+=t,(o=d[u.getLevelIndex(e)]).currentOffset=Math.max(o.currentOffset,n.offset+n.actualSize.width),!0}))}return{process:function(){var m,c,h,O,S;return v=i.getOptions(),(S=[])[1]=(O=v).normalItemsInterval,S[2]=O.dotItemsInterval,S[3]=O.lineItemsInterval,S[4]=O.lineItemsInterval,w=S,T=o.getOptions(),y=a.getOptions(),k=r.getOptions(),u=l.getTreeLevels(),g=s.getVisualTree(),p=s.getLeftMargins(),f=s.getRightMargins(),d=[],C.treeItemsPositions={},m=t.getOptimalPanelSize(),h=n.getOptions().scale,m.scale(1/h),c=new e.common.Rect(0,0,m.width,m.height),C.panelSize=function(t){var n,o,i,a,r,s,l=new e.common.Rect(0,0,0,0);switch(T.orientationType){case 2:case 3:t.invert()}if(!u.isEmpty())switch(v.pageFitMode){case 0:case 5:n=[new e.orgdiagram.LevelVisibility(0,1)],l=b(n,0);break;default:switch(n=[new e.orgdiagram.LevelVisibility(0,1)],o=[],v.minimalVisibility){case 1:break;case 2:o.push(2);break;case 0:case 3:case 4:o.push(2),o.push(3)}if(u.loopLevelsReversed(this,(function(t,i){var a;for(a=0;a<o.length;a+=1)n.push(new e.orgdiagram.LevelVisibility(t,o[a]))})),(i=b(n,n.length-1)).addRect(t),i.offset(0,0,5,5),a=null,r=null,s=null,!P(l=b(n,0),i)&&(a=0,P(l=b(n,n.length-1),i))){for(r=n.length-1,s=r;r-a>1;)s=Math.floor((r+a)/2),P(l=b(n,s),i)?r=s:a=s;r!==s&&(l=b(n,r))}}return l}(c),function(){var t=null;u.loopLevels(this,(function(n,o){var i=d[n];u.loopLevelItems(this,n,(function(n,o,a){var r=C.treeItemsPositions[n],s=function(t,n,o,i,a,r){var s=0;switch(t){case 1:switch(r){case 0:s=0;break;case 1:s=(a.depth-o.height)/2;break;case 2:s=a.depth-o.height}break;case 2:case 3:case 4:s=a.horizontalConnectorsDepth-o.height/2}return{position:new e.common.Rect(n,a.shift+s,o.width,o.height),horizontalConnectorsShift:a.shift+a.horizontalConnectorsDepth,topConnectorShift:null!=i?i.shift+i.connectorShift:null,topConnectorInterval:null!=i?i.levelSpace/2:null,bottomConnectorShift:a.shift+a.connectorShift,bottomConnectorInterval:a.levelSpace/2}}(r.actualVisibility,r.offset,r.actualSize,t,i,v.verticalAlignment);r.actualPosition=s.position,r.horizontalConnectorsShift=s.horizontalConnectorsShift,r.topConnectorShift=s.topConnectorShift,r.topConnectorInterval=s.topConnectorInterval,r.bottomConnectorShift=s.bottomConnectorShift,r.bottomConnectorInterval=s.bottomConnectorInterval})),t=i}))}(),!0},getItemsPositions:function(){return C.treeItemsPositions},getItemPosition:function(e){return C.treeItemsPositions[e]},getContentSize:function(){return C.panelSize}}},e.orgdiagram.OrgTreeTask=function(t){var n={orgTree:null,maximumId:null};return{process:function(){return function(t){var o,i,a,r,s,l,m,c=0,h=e.common.tree();for(r=0,s=t.length;r<s;r+=1)null!=(a=t[r]).id&&(o=new e.orgdiagram.OrgItem(a),l=parseInt(a.id,10),c=Math.max(isNaN(l)?0:l,c),h.add(a.parent,o.id,o));c+=1,(m=new e.orgdiagram.ItemConfig).id=c,m.title="internal root",m.isVisible=!1,m.isActive=!1,(i=new e.orgdiagram.OrgItem(m)).hideParentConnection=!0,i.hideChildrenConnection=!0,h.add(null,i.id,i),h.loopLevels(this,(function(e,t,n){if(n>0)return h.BREAK;i.id!=e&&(h.adopt(i.id,e),t.itemType=0)})),function(e){e.loopLevels(this,(function(t,n,o){var i=!0;return n.isVisible?e.SKIP:(e.loopChildren(this,t,(function(e,t,n){if(0!=t.itemType)return i=!1,!0})),i?(n.hideChildrenConnection=!0,void e.loopChildren(this,t,(function(e,t,n){t.hideParentConnection=!0}))):e.SKIP)}))}(h),n.orgTree=h,n.maximumId=c}(t.getItems()),!0},getOrgTree:function(){return n.orgTree},getMaximumId:function(){return n.maximumId}}},e.orgdiagram.PaletteManagerTask=function(t,n){var o;return{process:function(){var i=[];return null!=n&&(i=n.getOptions().linesPalette),o=new e.common.PaletteManager(t.getOptions(),i),!0},getPaletteManager:function(){return o}}},e.orgdiagram.VisualTreeLevelsTask=function(t,n){var o={treeLevels:null,bundles:null,connectorStacks:null},i=new e.orgdiagram.TreeLevelConnectorStackSize;return{process:function(){var n=t.getVisualTree();return o.treeLevels=e.common.TreeLevels(),n.loopLevels(this,(function(e,t,n){o.treeLevels.addItem(n,e,t)})),o.bundles=[],o.connectorStacks=[],function(t,n,o,i,a){var r,s,l,m,c,h,u,d,g,p,f={};o.loopLevels(this,(function(a,T){var y=new e.orgdiagram.TreeLevelConnectorStackSize;if(n[a]=y,u=[],o.loopLevelItems(this,a,(function(n,a,r){var s=[];if(!f.hasOwnProperty(n)&&(4&a.connectorPlacement&&s.push(n),(s=s.concat(a.partners)).length>0)){h=new e.common.VerticalConnectorBundle(s,[]);for(var l=0,m=s.length;l<m;l+=1)f[s[l]]=h;i.loopChildren(this,n,(function(e,t,n){1&t.connectorPlacement&&h.toItems.push(e)})),s.length>1&&u.push(h),(h.fromItems.length>1||h.toItems.length>0)&&t.push(h)}8&a.connectorPlacement&&(h=new e.common.HorizontalConnectorBundle(n,o.getPrevItem(n)),t.push(h)),2&a.connectorPlacement&&(h=new e.common.HorizontalConnectorBundle(n,o.getNextItem(n)),t.push(h))})),u.length>0){for(p=e.common.pile(),r=0,s=u.length;r<s;r+=1){for(h=u[r],d=null,g=null,l=0,m=h.fromItems.length;l<m;l+=1)c=o.getItemPosition(h.fromItems[l]),d=null!=d?Math.min(d,c):c,g=null!=g?Math.max(g,c):c;p.add(d,g,h)}y.parentsStackSize=p.resolve(this,(function(e,t,n,o,i){n.fromOffset=o+1,n.fromStackSize=i}))}}))}(o.bundles,o.connectorStacks,o.treeLevels,n),!0},getTreeLevels:function(){return o.treeLevels},getBundles:function(){return o.bundles},getConnectorsStacksSizes:function(e){return o.connectorStacks[e]||i},getNestedLayoutBottomConnectorIds:function(){return{}}}},e.orgdiagram.VisualTreeTask=function(t,n,o,i){var a,r,s={visualTree:null,leftMargins:{},rightMargins:{},navigationFamily:null};function l(e,t){for(var n=t;null!=n.visualAggregatorId;)n=e.node(n.visualAggregatorId);return n}function m(e,t){var n=0;return e.loopLevels(this,t.id,(function(e,t,o){n=o+1})),n+1}function c(e,t,n,o){var i;return o%2>0&&(t===o-1?t=e.length:t===o&&(t=o-1)),(i=n*o+t)>e.length-1?null:e[i]}function h(e,t,n){var o=null,i={},a=e.parent(n.id);return e.loopChildrenReversed(this,a.id,(function(e,a,r){if(null===o)e==n.id&&(o=-1,i[n.id]=!0,t.loopChildren(this,n.id,(function(e,n,o){if(o>0)return t.BREAK;i[e]=!0})));else{if(!i.hasOwnProperty(e))return o=r,!0;t.loopChildren(this,a.id,(function(e,n,o){if(o>0)return t.BREAK;i[e]=!0}))}})),o}function u(e,t,n){var o=null,i={},a=e.parent(n.id);return e.loopChildren(this,a.id,(function(e,a,r,s){if(null===o)e==n.id&&(o=s+1,i[n.id]=!0,t.loopChildren(this,n.id,(function(e,n,o){if(o>0)return t.BREAK;i[e]=!0})));else{if(!i.hasOwnProperty(e))return o=r,!0;t.loopChildren(this,e,(function(e,n,o){if(o>0)return t.BREAK;i[e]=!0}))}})),o}function d(e,t,n){var o,i=4==t.visibility&&0===t.connectorPlacement||n;return o=g({visibility:4,visualAggregatorId:t.visualAggregatorId,connectorPlacement:i?0:5}),e.insert(t.id,o.id,o),t.visualAggregatorId=o.id,o}function g(t,n){var o,i=new e.orgdiagram.TreeItem;for(o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);return null!=n?(i.id=n.id,i.visibility=n.isVisible?0:4):(a+=1,i.id=a),i}function p(e,t,n){var o=[];n||4==e.visibility||!r.hasOwnProperty(e.id)?(n||o.push(e.id),s.navigationFamily.loopParents(this,e.id,(function(e,t,n){if(4!=t.visibility&&(o.push(e),r.hasOwnProperty(e)))return s.navigationFamily.SKIP}))):o.push(e.id),null!=s.navigationFamily.node(t.id)?s.navigationFamily.adopt(o,t.id):s.navigationFamily.add(o,t.id,t)}return{process:function(){var f=t.getOrgTree(),T=o.getOptions();return r=null!=n?n.getActiveItems():{},s.visualTree=e.common.tree(),s.navigationFamily=e.common.family(),a=t.getMaximumId(),f.hasNodes()&&function(e,t,n){var o,a,r,f,T,y,k,v,w,C,b,P,O,S,I,x,A,L,M={},R={},z={};e.loopPostOrder(this,(function(e,t,n,o){t.hasVisibleChildren=t.isVisible||t.hasVisibleChildren,null!=o&&(o.hasVisibleChildren=o.hasVisibleChildren||t.hasVisibleChildren)})),e.loopLevels(this,(function(r,m,k){var w,C,b;if(!i&&!m.hasVisibleChildren)return e.SKIP;switch((w=n.node(r))||(w=g({visibility:4,connectorPlacement:0,parentId:null,actualItemType:0},m),n.add(null,r,w)),x=0,A=0,null!=(y=n.indexOf(r))&&(x=y,A=n.countSiblings(r)-y-1),C=[],e.loopChildren(this,r,(function(e,t,l){if(i||t.hasVisibleChildren){switch(o=g({parentId:r,actualItemType:t.itemType},t),w.actualItemType){case 7:case 8:case 6:switch(o.actualItemType){case 7:case 8:case 6:o.actualItemType=2;break;case 0:o.actualItemType=1}}switch(o.actualItemType){case 5:p(w,o),o.connectorPlacement=5,b=g({visibility:4}),n.add(b.id,o.id,o),o=b;case 8:case 2:if(a=n.parent(r),2&w.connectorPlacement)f=h(n,s.navigationFamily,w),n.add(a.id,o.id,o,f+1),o.connectorPlacement=6,o.gravity=2;else if(8&w.connectorPlacement)T=u(n,s.navigationFamily,w),n.add(a.id,o.id,o,T),o.connectorPlacement=12,o.gravity=1;else switch(t.adviserPlacementType){case 2:f=h(n,s.navigationFamily,w),n.add(a.id,o.id,o,f+1),o.connectorPlacement=6,o.gravity=2;break;default:T=u(n,s.navigationFamily,w),n.add(a.id,o.id,o,T),o.connectorPlacement=12,o.gravity=1}switch(o.actualItemType){case 5:break;case 8:null!=w.parentId?p(n.node(w.parentId),o):p(w,o,!0);break;case 2:p(w,o)}break;case 4:p(w,o),o.connectorPlacement=5,b=g({visibility:4}),n.add(b.id,o.id,o),o=b;case 1:var m=function(e,t,n,o,i){var a,r=null;n=n||o;for(var s=0;s<=i;)null==(r=null==r?t:e.node(r.visualAggregatorId)).visualAggregatorId&&(a=g({visibility:4,visualAggregatorId:null,connectorPlacement:n?0:5}),e.insert(r.id,a.id,a),r.visualAggregatorId=a.id),s+=1;return r}(n,w,!1,!1,t.levelOffset||0);switch(t.adviserPlacementType){case 2:n.add(m.id,o.id,o,0),o.connectorPlacement=6,o.gravity=2;break;default:n.add(m.id,o.id,o),o.connectorPlacement=12,o.gravity=1}1==o.actualItemType&&p(w,o);break;case 0:var c=t.levelOffset||0;null==C[c]?C[c]=[o]:C[c].push(o),p(w,o);break;case 7:case 6:if(a=n.parent(r),2&w.connectorPlacement)n.add(a.id,o.id,o,x),o.connectorPlacement=6,o.gravity=2;else if(8&w.connectorPlacement)n.add(a.id,o.id,o,n.countChildren(a.id)-A),o.connectorPlacement=12,o.gravity=1;else{switch(t.adviserPlacementType){case 2:n.add(a.id,o.id,o,x),o.gravity=2;break;default:n.add(a.id,o.id,o,n.countChildren(a.id)-A),o.gravity=1}switch(o.actualItemType){case 6:o.connectorPlacement=5;break;case 7:o.connectorPlacement=4}}null!=w.parentId?p(n.node(w.parentId),o):p(w,o,!0)}}})),w.actualItemType){case 7:case 8:case 6:break;default:L=[],null!=(a=n.parent(r))&&n.loopChildrenRange(this,a.id,x,n.countChildren(a.id)-A,(function(t,n,o){if(n.id==r)L.push(n);else switch(n.actualItemType){case 7:case 8:case 6:e.parentid(n.id)==r&&L.push(n)}})),L.length>1&&(z[r]=L)}M[r]=[],R[r]=[];var P=[];if(C.length>0){a=l(n,w);for(var O=0;O<C.length-1;O+=1){var S=C[O];if(null!=S){var I=4==w.visibility&&0===w.connectorPlacement,B=d(n,a,I);P.push([B]);var D=0;switch(t.horizontalAlignment){case 0:D=Math.ceil(S.length/2)-1;break;case 1:D=-1;break;case 2:D=S.length-1}for(y=D;y>=0;y-=1)v=S[y],n.add(a.id,v.id,v,0),v.connectorPlacement=5,v.gravity=2;for(y=D+1;y<S.length;y+=1)v=S[y],n.add(a.id,v.id,v),v.connectorPlacement=5,v.gravity=1;a=B}}var V=C[C.length-1];!function(e,t,n,o,i,a,r,s){var m,h,u,d,p,f,T,y,k,v,w,C,b,P,O,S=4==o.visibility&&0===o.connectorPlacement;switch(n.horizontalAlignment){case 0:case 1:O=3;break;case 2:O=2}switch(0===a&&(a=function(e,t){var n=!1,o=!0;return e.loopChildren(this,t.id,(function(t,i,a){if(n=!0,0===i.itemType&&e.hasChildren(t))return o=!1,!0})),n&&o}(e,o)?0===n.leavesPlacementType?3:n.leavesPlacementType:0===n.childrenPlacementType?2:n.childrenPlacementType),m=l(t,o),3==a&&i.length<3&&(a=2),a){case 2:for(b=0,P=i.length;b<P;b+=1)f=i[b],T=e.node(f.id),t.add(m.id,f.id,f),f.connectorPlacement=(T.hideParentConnection?0:1)|(T.hideChildrenConnection?0:4),0===b&&(f.relationDegree=1);break;case 3:for(y=Math.min(n.maximumColumnsInMatrix,Math.ceil(Math.sqrt(i.length))),k=Math.ceil(i.length/y),v=Math.ceil(y/2),w=0;w<v;w+=1)for(h=m,C=0;C<k;C+=1)u=c(i,2*w,C,y),d=c(i,2*w+1,C,y),void 0===r[C]&&(r[C]=[],s[C]=[]),null!==u&&(0===w&&(u.relationDegree=1),t.add(h.id,u.id,u),u.connectorPlacement=4|(S?0:2),u.gravity=2,s[C].push(u)),null===u&&null===d||(p=g({visibility:4,connectorPlacement:S?0:5}),t.add(h.id,p.id,p),r[C].push(p)),null!==d&&(t.add(h.id,d.id,d),d.connectorPlacement=4|(S?0:8),d.gravity=1,s[C].push(d)),h=p;y>2&&(m.visualAggregatorId=null);break;case 1:for(b=0,P=i.length;b<P;b+=1){switch(f=i[b],p=g({visibility:4,connectorPlacement:S?0:5}),O){case 2:t.add(m.id,f.id,f),t.add(m.id,p.id,p),f.connectorPlacement=4|(S?0:2),f.gravity=2;break;case 3:t.add(m.id,p.id,p),t.add(m.id,f.id,f),f.connectorPlacement=4|(S?0:8),f.gravity=1}r[b]=[p],s[b]=[f],m=p}break;default:throw"Children placement is undefined!"}}(e,n,t,w,V,m.childrenPlacementType,M[r],R[r]),M[r]=M[r].concat(P),R[r]=R[r].concat(C.slice(0,C.length-1))}})),e.loopPostOrder(this,(function(e,o,i,a){var c,u,f,T,v=n.node(e),x=null!=z[i];if(null!=v){if(c=R[e],u=M[e],null!=a){switch(T=x,a.placeAssistantsAboveChildren){case 0:t.placeAssistantsAboveChildren&&(T=!0);break;case 1:T=!0}if(T&&(b=function(e,t){var n=0;return null!=t.visualAggregatorId&&e.loopLevels(this,t.id,(function(o,i,a){if(t.visualAggregatorId==o)return e.SKIP;n=a+1})),n}(n,v))>0&&(v.visualDepth=b+1,null!==v.visualAggregatorId))for(r=n.node(v.visualAggregatorId),f=n.hasChildren(r.id),y=0;y<b-1;y+=1)r=d(n,r,!f)}if(null!=a){switch(T=x,a.placeAdvisersAboveChildren){case 0:t.placeAdvisersAboveChildren&&(T=!0);break;case 1:T=!0}if(T&&(b=function(e,t){var n,o,i,a=0,r=e.parent(t.id);if(null!==r){for(n=e.indexOf(t.id),o=1;null!=(i=e.getChild(r.id,n+o))&&8&i.connectorPlacement;)a=Math.max(a,m(e,i)),o+=1;for(o=1;null!=(i=e.getChild(r.id,n-o))&&2&i.connectorPlacement;)a=Math.max(a,m(e,i)),o+=1}return a}(n,v))>1)for(v.visualDepth+=b-1,f=n.hasChildren(e),r=v,y=0;y<b-1;y+=1)r=d(n,r,!f)}for(P=[],y=0,k=c.length;y<k;y+=1)for(I=c[y],P[y]=0,w=0,C=I.length;w<C;w+=1)P[y]=Math.max(P[y],m(n,I[w]));for(y=0,k=P.length;y<k;y+=1)if((O=P[y])>1)for(w=0,C=u[y].length;w<C;w+=1)if(S=u[y][w],n.hasChildren(S.id))for(b=O;b>1;)S=d(n,S,!1),b-=1;null!=z[e]&&function(e,t,n){var o,i,a,r,m,c,u,f,T,y=0,k=[];for(i=0,a=n.length;i<a;i+=1)o=n[i],y=Math.max(y,o.visualDepth);for(i=0,a=n.length;i<a;i+=1){for(o=n[i],m=l(e,o),r=1,u=o;null!=u.visualAggregatorId;)(u=e.node(u.visualAggregatorId)).connectorPlacement=5,r+=1;for(;r<y;)m=d(e,m,!1),r+=1;k.push(l(e,m).id)}if(u=l(e,t),e.hasChildren(u.id)){if(m=n[Math.floor(n.length/2)],n.length>1&&n.length%2==0)for(c=e.parent(m.id),f=h(e,s.navigationFamily,m),T=e.getChild(c.id,f).gravity||e.getChild(c.id,f+1).gravity,m=g({visibility:4,connectorPlacement:10&m.connectorPlacement,gravity:T}),e.add(c.id,m.id,m,f+1),r=1;r<y;)(m=d(e,m,!1)).connectorPlacement=0,r+=1;for(i=0,a=n.length;i<a;i+=1)o=n[i],s.navigationFamily.loopChildren(this,t.id,(function(e,n,i){switch(n.actualItemType){case 5:case 2:case 4:case 1:break;default:t.id!=o.id&&p(o,n)}return s.navigationFamily.SKIP}));m=l(e,m),e.moveChildren(u.id,m.id)}m.partners=k}(n,v,z[e])}}))}(f,T,s.visualTree),s.leftMargins={},s.rightMargins={},function(e,t,n){e.loop(this,(function(e,o){t[e]=[],n[e]=[]})),e.loopPostOrder(this,(function(e,o,i,a){var r,s,l=t[i],m=n[i],c=t[e],h=n[e];if(null!=i){for(l[0]||(l[0]=e),r=0,s=c.length;r<s;r+=1)l[r+1]||(l[r+1]=c[r]);for(m[0]=e,r=0,s=h.length;r<s;r+=1)m[r+1]=h[r]}}))}(s.visualTree,s.leftMargins,s.rightMargins),!0},getVisualTree:function(){return s.visualTree},getLogicalFamily:function(){return s.navigationFamily},getConnectionsFamily:function(){return s.connectionsFamily},getLeftMargins:function(){return s.leftMargins},getRightMargins:function(){return s.rightMargins}}},e.common.AnnotationLabelTemplate=function(){var t=["div",{type:"checkbox",name:"checkbox",class:["bp-item","bp-corner-all","bp-connector-label"]}];return{template:function(){return t},getHashCode:function(){return"defaultAnnotationLabelTemplate"},render:function(t,n){var o=n.context;e.common.isArray(o.label)?(n.element.innerHTML="",n.element.appendChild(e.common.JsonML.toHTML(o.label))):n.element.innerHTML=o.label}}},e.common.ButtonsTemplate=function(t){var n=["div",{style:{position:"absolute"}}];return{template:function(){return n},getHashCode:function(){return"defaultButtonsTemplate"},render:function(t,n){n.element;var o,i,a,r=0,s=n.buttons;switch(n.renderingMode){case 0:for(a=0;a<s.length;a+=1)i=["button",{style:{position:"absolute",top:r+"px",left:"0px"},class:["orgdiagrambutton","bp-button"],"data-buttonname":(o=s[a]).name},["span",{style:{width:o.size.width+"px",height:o.size.height+"px"},class:["bp-icon",o.icon]}]],n.element.appendChild(e.common.JsonML.toHTML(i)),r+=10+o.size.height}}}},e.common.CheckBoxTemplate=function(e){var t=["div",["label",["nobr",["input",{type:"checkbox",name:"checkbox",class:"bp-selectioncheckbox"}]," ",["span",{name:"selectiontext",class:"bp-selectiontext"},e]]]];return{template:function(){return t},getHashCode:function(){return"defaultCheckBoxTemplate"},render:function(e,t){var n=t.element.firstChild.firstChild.firstChild;n.checked=t.isSelected,n.setAttribute("data-id",t.id),t.element.firstChild.firstChild.childNodes[2].setAttribute("data-id",t.id)}}},e.common.CursorTemplate=function(e,t){var n,o=["div",{style:{width:(n=t).itemSize.width+n.cursorPadding.left+n.cursorPadding.right+"px",height:n.itemSize.height+n.cursorPadding.top+n.cursorPadding.bottom+"px",borderWidth:n.cursorBorderWidth+"px"},class:["bp-item","bp-corner-all","bp-cursor-frame"]}];return{template:function(){return o},getHashCode:function(){return"defaultCursorTemplate"},render:function(e,t){}}},e.common.DotHighlightTemplate=function(e,t){var n,o,i=(null==(o=(n=t).minimizedItemCornerRadius)&&(o=Math.max(n.highlightPadding.left+n.minimizedItemSize.width+n.highlightPadding.right,n.highlightPadding.top+n.minimizedItemSize.height+n.highlightPadding.bottom)+n.highlightBorderWidth),["div",{style:{borderWidth:n.highlightBorderWidth+"px",MozBorderRadius:o+"px",WebkitBorderRadius:o+"px","-khtml-border-radius":o+"px",borderRadius:o+"px"},class:["bp-item","bp-highlight-dot-frame"]}]);return{template:function(){return i},getHashCode:function(){return"defaultDotHighlightTemplate"},render:function(e,t){}}},e.common.GroupTitleTemplate=function(t){var n=["div",{style:{fontSize:t.groupTitleFontSize,fontFamily:t.groupTitleFontFamily,fontWeight:t.groupTitleFontWeight,fontStyle:t.groupTitleFontStyle},class:["bp-item","bp-corner-all","bp-grouptitle-frame"]},o(t.groupTitleOrientation,t.groupTitleHorizontalAlignment,t.groupTitleVerticalAlignment)];function o(e,n,o){var r,s="";switch(e){case 0:case 3:break;case 1:s="rotate(-90deg)";break;case 2:s="rotate(90deg)"}var l={fontSize:t.groupTitleFontSize,fontFamily:t.groupTitleFontFamily,fontWeight:t.groupTitleFontWeight,fontStyle:t.groupTitleFontStyle,position:"absolute",padding:0,margin:0,textAlign:i(n),lineHeight:1,"-webkit-transform-origin":"center center","-moz-transform-origin":"center center","-o-transform-origin":"center center","-ms-transform-origin":"center center","-webkit-transform":s,"-moz-transform":s,"-o-transform":s,"-ms-transform":s,transform:s};switch(o){case 0:r=["div",{style:l,class:["bp-title-content","bp-item","bp-corner-all"]}];break;default:l.borderCollapse="collapse",r=["table",{style:l},["tbody",["tr",["td",{style:{verticalAlign:a(o),padding:0},class:"bp-title-content"}]]]]}return r}function i(e){var t=null;switch(e){case 0:t="center";break;case 1:t="left";break;case 2:t="right"}return t}function a(e){var t=null;switch(e){case 1:t="middle";break;case 0:t="top";break;case 2:t="bottom"}return t}return{template:function(){return n},getHashCode:function(){return"defaultGroupTitleTemplate"},render:function(n,o){var i=o.context,a=i.groupTitleColor||t.groupTitleColor,r={},s=o.width,l=o.height;r.left=Math.round(s/2-l/2)+"px",r.top=Math.round(l/2-s/2)+"px",r.width=l+"px",r.height=s+"px",r.maxWidth=r.width,r.maxHeight=r.height;var m=o.element.firstChild;e.common.JsonML.applyStyles(m,r);var c,h=i.groupTitle||"";switch(h=h.replace(new RegExp("\n","g"),"<br/>"),t.groupTitleVerticalAlignment){case 0:c=o.element.firstChild;break;default:(c=o.element.firstChild.firstChild.firstChild.firstChild).style.borderCollapse="collapse"}c.style.color=e.common.highestContrast(a,t.itemTitleSecondFontColor,t.itemTitleFirstFontColor),c.textContent=h,e.common.JsonML.applyStyles(o.element,{backgroundColor:a})}}},e.common.HighlightTemplate=function(e,t){var n=["div",{style:{borderWidth:t.highlightBorderWidth+"px"},class:["bp-item","bp-corner-all","bp-highlight-frame"]}];return{template:function(){return n},getHashCode:function(){return"defaultHighlightTemplate"},render:function(e,t){}}},e.common.ItemTemplate=function(t,n){var o,i,a=(o=n,(i=new e.common.Size(o.itemSize)).width-=2*o.itemBorderWidth,i.height-=2*o.itemBorderWidth,["div",{style:{borderWidth:o.itemBorderWidth+"px"},class:["bp-item","bp-corner-all","bt-item-frame"]},["div",{name:"titleBackground",style:{top:"2px",left:"2px",width:i.width-4+"px",height:"18px"},class:["bp-item","bp-corner-all","bp-title-frame"]},["div",{name:"title",style:{top:"1px",left:"4px",width:i.width-4-8+"px",height:"16px"},class:["bp-item","bp-title"]}]],["div",{name:"photoBorder",style:{top:"24px",left:"2px",width:"50px",height:"60px"},class:["bp-item","bp-photo-frame"]},["img",{name:"photo",alt:"",style:{width:"50px",height:"60px"}}]],["div",{name:"description",style:{top:"24px",left:"56px",width:i.width-4-56+"px",height:"74px"},class:["bp-item","bp-description"]}]]);return{template:function(){return a},getHashCode:function(){return"defaultItemTemplate"},render:function(n,o){var i=o.context,a=null!=i.itemTitleColor?i.itemTitleColor:"#4169e1",r=e.common.highestContrast(a,t.itemTitleSecondFontColor,t.itemTitleFirstFontColor),s=o.element,l=s.firstChild,m=s.childNodes[1].firstChild,c=l.firstChild,h=s.childNodes[2];e.common.JsonML.applyStyles(l,{backgroundColor:a}),m.src=i.image,m.alt=i.title,e.common.JsonML.applyStyles(c,{color:r}),c.textContent=i.title,h.textContent=i.description}}},e.common.UserTemplate=function(t,n,o){var i=e.common.hashCode(JSON.stringify(n));return{template:function(){return n},getHashCode:function(){return i},render:function(n,i){if(null!=o)o(n,i);else{var a=i.context,r=null!=a.itemTitleColor?a.itemTitleColor:"#4169e1",s=e.common.highestContrast(r,t.itemTitleSecondFontColor,t.itemTitleFirstFontColor);e.common.getElementsByName(this,i.element,"photo",(function(e){e.src=a.image,e.alt=a.title})),e.common.getElementsByName(this,i.element,"titleBackground",(function(t){e.common.JsonML.applyStyles(t,{background:r})})),e.common.getElementsByName(this,i.element,"title",(function(t){e.common.JsonML.applyStyles(t,{color:s}),t.textContent=a.title})),e.common.getElementsByName(this,i.element,"description",(function(e){e.textContent=a.description}))}}}},e.orgdiagram.BaseControl=function(t,n,o,i,a){var r,s,l,m,c,h={name:"orgdiagram",options:n,tasks:null,graphics:null,mouse:null,layout:{element:t,scrollPanel:null,mousePanel:null,placeholder:null,calloutPlaceholder:null,forceCenterOnCursor:!0}},u=null;function d(n,i){switch(null==i&&(i=!0),n){case 1:g(i,!1);break;case 2:d=!1,h.layout.forceCenterOnCursor=!1,h.tasks.process("HighlightItemOptionTask",null,d),h.graphics.end();break;default:w(h.layout),v(h.layout),r=h.layout,s=h.name,l=e.common.getInnerSize(r.element),m=new e.common.Rect(0,0,l.width,l.height),c=new e.common.Rect(m),u=e.common.getFixOfPixelALignment(t),e.common.JsonML.appendDOM(r.element,e.common.JsonML.toHTML(["div",{tabindex:0,style:{position:"relative",overflow:"auto","-webkit-overflow-scrolling":"touch",top:"0px",left:"0px",width:m.width+"px",height:m.height+"px",padding:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:u.width+"px",marginTop:u.height+"px"},class:s,$:function(e){r.scrollPanel=e}},["div",{style:e.common.mergeObjects({position:"absolute",overflow:"hidden"},c.getCSS()),class:s,$:function(e){r.mousePanel=e}},["div",{style:e.common.mergeObjects({position:"absolute",overflow:"hidden"},c.getCSS()),class:["placeholder",s],$:function(e){r.placeholder=e}},["div",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px",width:"0px",height:"0px"},class:["calloutplaceholder",s],$:function(e){r.calloutPlaceholder=e}}]]]])),function(t){t.mousePanel.addEventListener("mousemove",C),t.mousePanel.addEventListener("click",P),t.mousePanel.addEventListener("dblclick",O),t.mousePanel.addEventListener("change",b),t.scrollPanel.addEventListener("keydown",S),t.scrollPanel.addEventListener("scroll",p),h.options.enablePanning&&e.common.isChrome()&&(t.scrollPanel.draggable=!0,t.scrollPanel.addEventListener("dragstart",I),t.scrollPanel.addEventListener("drag",A),t.scrollPanel.addEventListener("dragend",A),t.scrollPanel.addEventListener("dragover",x))}(h.layout),h.tasks=o(f,T,y,k,a),h.graphics=e.common.createGraphics(h.options.graphicsType,h.layout.element),h.graphics.debug=!1,g(!0,!1)}var r,s,l,m,c,u,d}function g(t,n){var o;h.layout.forceCenterOnCursor=t,h.tasks.process("OptionsTask",null,n),h.graphics.end(),t&&(o=h.tasks.getTask("CenterOnCursorTask").getPlaceholderOffset(),h.layout.scrollPanel.scrollLeft=o.x,h.layout.scrollPanel.scrollTop=o.y);var i=e.common.getFixOfPixelALignment(h.layout.element);e.common.JsonML.applyStyles(h.layout.scrollPanel,{top:"0px",left:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:i.width+"px",marginTop:i.height+"px"})}function p(e){null==u&&(u=window.setTimeout((function(){var e;e=!1,h.layout.forceCenterOnCursor=!1,h.tasks.process("LayoutOptionsTask",null,e),h.graphics.end(),window.clearTimeout(u),u=null}),200))}function f(){return h.options}function T(){return h.graphics}function y(){var t=h.layout,n=e.common.getInnerSize(t.element),o=new e.common.Point(t.scrollPanel.scrollLeft,t.scrollPanel.scrollTop);return{forceCenterOnCursor:t.forceCenterOnCursor,scrollPanelSize:n,placeholderOffset:o}}function k(t){var n=h.layout,o=new e.common.Size(t.contentSize);o.scale(1*t.scale),e.common.JsonML.applyStyles(n.mousePanel,o.getCSS()),e.common.JsonML.applyStyles(n.placeholder,t.contentSize.getCSS());var i="scale("+t.scale+","+t.scale+")";e.common.JsonML.applyStyles(n.placeholder,{"transform-origin":"0 0",transform:i,"-ms-transform":i,"-webkit-transform":i,"-o-transform":i,"-moz-transform":i});var a=new e.common.Size(t.scrollPanelSize);return t.autoSize&&((a=new e.common.Size(o.width+25,o.height+25)).cropBySize(t.autoSizeMaximum),a.addSize(t.autoSizeMinimum),e.common.JsonML.applyStyles(n.element,a.getCSS())),e.common.JsonML.applyStyles(n.scrollPanel,a.getCSS()),a}function v(e){if(null!=h.layout.scrollPanel){var t=h.layout.scrollPanel.parentNode;null!=t&&t.removeChild(h.layout.scrollPanel)}}function w(e){null!=e.mousePanel&&(e.mousePanel.removeEventListener("mousemove",C),e.mousePanel.removeEventListener("click",P),e.mousePanel.removeEventListener("dblclick",O),e.mousePanel.removeEventListener("change",b)),null!=e.scrollPanel&&(e.scrollPanel.removeEventListener("keydown",S),e.scrollPanel.removeEventListener("scroll",p),e.scrollPanel.removeEventListener("dragstart",I),e.scrollPanel.removeEventListener("drag",A),e.scrollPanel.removeEventListener("dragend",A),e.scrollPanel.removeEventListener("dragover",x))}function C(t){var n=e.common.getElementOffset(h.layout.mousePanel),o=t.pageX-n.left,i=t.pageY-n.top,a=h.tasks.getTask("CreateTransformTask"),r=h.tasks.getTask("HighlightItemOptionTask");r.hasHighlightEnabled()&&L(t,a.getTreeItemForMousePosition(o,i,r.getGravityRadius()))}function b(t){var n=t.target,o=n.getAttribute("data-id");if(null!=o){var i=(h.options.selectedItems||[]).slice(),a=R(null,o),r=e.common.indexOf(i,o);z("onSelectionChanging",t,a),a.cancel||(r>=0?i.splice(r,1):i.push(o),h.options.selectedItems=i,r<0?n.setAttribute("checked","checked"):n.removeAttribute("checked"),z("onSelectionChanged",t,a))}}function P(t){var n,o,i=e.common.getElementOffset(h.layout.mousePanel),a=t.pageX-i.left,r=t.pageY-i.top,s=h.tasks.getTask("CreateTransformTask"),l=h.tasks.getTask("CursorItemOptionTask"),m=h.tasks.getTask("HighlightItemOptionTask"),c=s.getTreeItemForMousePosition(a,r,m.getGravityRadius());n=t.target,null!==c&&(e.common.hasClass(n,h.name+"button")||e.common.hasClass(n.parentNode,h.name+"button")?z("onButtonClick",t,o=R(null,c,(e.common.hasClass(n,h.name+"button")?n:n.parentNode).getAttribute("data-buttonname"))):"checkbox"===n.getAttribute("name")||"selectiontext"===n.getAttribute("name")||(z("onMouseClick",t,o=R(null,c)),o.cancel||l.hasCursorEnabled()&&(M(t,c),h.layout.scrollPanel.focus())))}function O(e){var t=h.tasks.getTask("HighlightItemTask").getHighlightTreeItem();null!==t&&z("onMouseDblClick",e,R(null,t))}function S(e){var t,n,o=h.tasks.getTask("HighlightItemTask"),i=h.tasks.getTask("HighlightItemOptionTask"),a=h.tasks.getTask("CursorItemTask"),r=h.tasks.getTask("CursorItemOptionTask"),s=h.tasks.getTask("AlignDiagramTask"),l=h.tasks.getTask("CreateTransformTask").getTransform(),m=null,c=null,u=h.layout;if(i.hasHighlightEnabled()&&r.hasCursorEnabled()?null===(m=o.getHighlightTreeItem())&&(m=a.getCursorTreeItem()):i.hasHighlightEnabled()?m=o.getHighlightTreeItem():r.hasCursorEnabled()&&(m=a.getCursorTreeItem()),null!=m){switch(e.which){case 13:r.hasCursorEnabled()&&(M(e,m),e.preventDefault(),u.scrollPanel.focus());break;case 40:c=1;break;case 38:c=0;break;case 37:c=2;break;case 39:c=3}if(null!=c){for(n=!1;!n;)n=!0,c=l.getOrientation(c),null!=(t=s.getNextItem(m,c))&&(e.preventDefault(),i.hasHighlightEnabled()?L(e,t):r.hasCursorEnabled()&&M(e,t));u.scrollPanel.focus()}}}function I(t){var n=h.layout.scrollPanel;r=new e.common.Point(t.clientX,t.clientY),s=new e.common.Point(n.scrollLeft,n.scrollTop),m=m||new Image,t.dataTransfer.setDragImage(m,0,0)}function x(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function A(t){l=new e.common.Point(s.x-(t.clientX-r.x),s.y-(t.clientY-r.y)),null==c&&(c=window.setTimeout((function(){var e=h.layout.scrollPanel;e.scrollLeft=l.x,e.scrollTop=l.y,window.clearTimeout(c),c=null}),50))}function L(e,t){var n,o=!0;return null!==t?t!==h.options.highlightItem&&(n=R(h.options.highlightItem,t),h.options.highlightItem=t,z("onHighlightChanging",e,n),n.cancel?o=!1:(g(!1,!1),z("onHighlightChanged",e,n))):null!==h.options.highlightItem&&(n=R(h.options.highlightItem,null),h.options.highlightItem=null,z("onHighlightChanging",e,n),n.cancel?o=!1:(g(!1,!1),z("onHighlightChanged",e,n))),o}function M(e,t){var n;t!==h.options.cursorItem&&(n=R(h.options.cursorItem,t),h.options.cursorItem=t,z("onCursorChanging",e,n),n.cancel||(g(!0,!1),z("onCursorChanged",e,n)))}function R(e,t,n){return i(h,e,t,n)}function z(e,t,n){var o=h.options[e];null!=o&&o(t,n)}return d(),{destroy:function(){w(h.layout),v(h.layout),h.tasks=null,h.graphics=null},setOptions:function(e){for(var t in e)e.hasOwnProperty(t)&&(h.options[t]=e[t])},getOptions:f,setOption:function(e,t){return h.options[e]=t},getOption:function(e){return h.options[e]},update:d}},e.orgdiagram.Control=function(t,n){return e.orgdiagram.BaseControl(t,n,e.orgdiagram.TaskManagerFactory,e.orgdiagram.EventArgsFactory,{AnnotationLabelTemplate:e.common.AnnotationLabelTemplate,ButtonsTemplate:e.common.ButtonsTemplate,CheckBoxTemplate:e.common.CheckBoxTemplate,CursorTemplate:e.common.CursorTemplate,DotHighlightTemplate:e.common.DotHighlightTemplate,GroupTitleTemplate:e.common.GroupTitleTemplate,HighlightTemplate:e.common.HighlightTemplate,ItemTemplate:e.common.ItemTemplate,UserTemplate:e.common.UserTemplate,LabelAnnotationTemplate:e.common.LabelAnnotationTemplate})},e.orgdiagram.EventArgsFactory=function(t,n,o,i){var a,r,s,l=new e.orgdiagram.EventArgs,m=t.tasks.getTask("CombinedContextsTask"),c=t.tasks.getTask("AlignDiagramTask"),h=m.getConfig(n),u=m.getConfig(o);return h&&null!=h.id&&(l.oldContext=h),u&&null!=u.id&&(l.context=u,null!==u.parent&&(l.parentItem=m.getConfig(u.parent)),s=e.common.getElementOffset(t.layout.mousePanel),r=e.common.getElementOffset(t.layout.element),a=c.getItemPosition(o),l.position=new e.common.Rect(a.actualPosition).translate(s.left,s.top).translate(-r.left,-r.top)),null!=i&&(l.name=i),l},e.orgdiagram.getProcessDiagramConfig=function(){var t=function(){};return e.orgdiagram.TaskManagerFactory(t,t,t).getProcessDiagramConfig()},e.orgdiagram.TaskManagerFactory=function(t,n,o,i,a){var r=new e.common.TaskManager;return r.addDependency("options",t),r.addDependency("graphics",n),r.addDependency("getLayout",o),r.addDependency("setLayout",i),r.addDependency("templates",a),r.addDependency("defaultConfig",new e.orgdiagram.Config),r.addDependency("defaultItemConfig",new e.orgdiagram.ItemConfig),r.addDependency("defaultTemplateConfig",new e.orgdiagram.TemplateConfig),r.addDependency("defaultButtonConfig",new e.orgdiagram.ButtonConfig),r.addDependency("defaultBackgroundAnnotationConfig",new e.orgdiagram.BackgroundAnnotationConfig),r.addDependency("defaultConnectorAnnotationConfig",new e.orgdiagram.ConnectorAnnotationConfig),r.addDependency("defaultHighlightPathAnnotationConfig",new e.orgdiagram.HighlightPathAnnotationConfig),r.addDependency("defaultShapeAnnotationConfig",new e.orgdiagram.ShapeAnnotationConfig),r.addDependency("isFamilyChartMode",!1),r.addDependency("showElbowDots",!1),r.addDependency("null",null),r.addDependency("foreground",2),r.addDependency("background",1),r.addTask("OptionsTask",["options"],e.orgdiagram.OptionsTask,"#000000"),r.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],e.orgdiagram.LayoutOptionsTask,"#000000"),r.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask"],e.orgdiagram.CurrentControlSizeTask,"#000000"),r.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],e.orgdiagram.CurrentScrollPositionTask,"#000000"),r.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.orgdiagram.CalloutOptionTask,"#000080"),r.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ConnectorsOptionTask,"#000080"),r.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],e.orgdiagram.ItemsOptionTask,"#000080"),r.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],e.orgdiagram.ItemsContentOptionTask,"#000080"),r.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],e.orgdiagram.ItemsSizesOptionTask,"#000080"),r.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.orgdiagram.LabelsOptionTask,"#000080"),r.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],e.orgdiagram.TemplatesOptionTask,"#000080"),r.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.OrientationOptionTask,"#000080"),r.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.VisualTreeOptionTask,"#000080"),r.addTask("MinimizedItemsOptionTask",["OptionsTask"],e.orgdiagram.MinimizedItemsOptionTask,"#000080"),r.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.CursorItemOptionTask,"#000080"),r.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.HighlightItemOptionTask,"#000080"),r.addTask("SelectedItemsOptionTask",["OptionsTask"],e.orgdiagram.SelectedItemsOptionTask,"#000080"),r.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.CursorSelectionPathModeOptionTask,"#000080"),r.addTask("SplitAnnotationsOptionTask",["OptionsTask"],e.orgdiagram.SplitAnnotationsOptionTask,"#00ffff"),r.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),r.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),r.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),r.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),r.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),r.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),r.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],e.orgdiagram.BackgroundAnnotationOptionTask,"#000080"),r.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ScaleOptionTask,"#000080"),r.addTask("CombinedContextsTask",["ItemsContentOptionTask"],e.orgdiagram.CombinedContextsTask,"#00ffff"),r.addTask("OrgTreeTask",["ItemsOptionTask"],e.orgdiagram.OrgTreeTask,"#ff0000"),r.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],e.orgdiagram.ReadTemplatesTask,"#00ffff"),r.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],e.orgdiagram.ActiveItemsTask,"#00ffff"),r.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],e.orgdiagram.ItemTemplateParamsTask,"#00ffff"),r.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],e.orgdiagram.GroupTitleTemplateTask,"#00ffff"),r.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],e.orgdiagram.CheckBoxTemplateTask,"#00ffff"),r.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask","templates"],e.orgdiagram.ButtonsTemplateTask,"#00ffff"),r.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],e.orgdiagram.AnnotationLabelTemplateTask,"#00ffff"),r.addTask("VisualTreeTask",["OrgTreeTask","ActiveItemsTask","VisualTreeOptionTask","isFamilyChartMode"],e.orgdiagram.VisualTreeTask,"#ff0000"),r.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],e.orgdiagram.VisualTreeLevelsTask,"#ff0000"),r.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],e.orgdiagram.ConnectionsGraphTask,"#00ffff"),r.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],e.orgdiagram.HighlightItemTask,"#00ffff"),r.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],e.orgdiagram.CursorItemTask,"#00ffff"),r.addTask("CursorNeighboursTask",["CursorItemTask","VisualTreeTask"],e.orgdiagram.CursorNeighboursTask,"#00ffff"),r.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],e.orgdiagram.SelectedItemsTask,"#00ffff"),r.addTask("SelectionPathItemsTask",["VisualTreeTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],e.orgdiagram.SelectionPathItemsTask,"#00ffff"),r.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff"),r.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],e.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff"),r.addTask("CombinedNormalVisibilityItemsTask",["ItemsSizesOptionTask","CursorItemTask","CursorNeighboursTask","SelectedItemsTask","SelectionPathItemsTask","NormalVisibilityItemsByForegroundShapeAnnotationTask","NormalVisibilityItemsByBackgroundShapeAnnotationTask","NormalVisibilityItemsByBackgroundAnnotationTask","NormalVisibilityItemsByForegroundHighlightPathAnnotationTask","NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask","NormalVisibilityItemsByForegroundConnectorAnnotationTask","NormalVisibilityItemsByBackgroundConnectorAnnotationTask"],e.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff"),r.addTask("ItemsPositionsTask",["CurrentControlSizeTask","ScaleOptionTask","OrientationOptionTask","ItemsSizesOptionTask","ConnectorsOptionTask","VisualTreeOptionTask","VisualTreeTask","VisualTreeLevelsTask","ItemTemplateParamsTask","CursorItemTask","CombinedNormalVisibilityItemsTask"],e.orgdiagram.ItemsPositionsTask,"#ff0000"),r.addTask("AlignDiagramTask",["OrientationOptionTask","ItemsSizesOptionTask","VisualTreeOptionTask","ScaleOptionTask","CurrentControlSizeTask","ActiveItemsTask","ItemsPositionsTask","isFamilyChartMode"],e.orgdiagram.AlignDiagramTask,"#ff0000"),r.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],e.orgdiagram.CreateTransformTask,"#00ffff"),r.addTask("CenterOnCursorTask",["LayoutOptionsTask","CurrentControlSizeTask","CurrentScrollPositionTask","CursorItemTask","AlignDiagramTask","CreateTransformTask","ScaleOptionTask"],e.orgdiagram.CenterOnCursorTask,"#00ffff"),r.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],e.orgdiagram.PaletteManagerTask,"#00ffff"),r.addTask("ApplyLayoutChangesTask",["graphics","setLayout","ItemsSizesOptionTask","CurrentControlSizeTask","ScaleOptionTask","AlignDiagramTask"],e.orgdiagram.ApplyLayoutChangesTask,"#008000"),r.addTask("DrawBackgroundAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","BackgroundAnnotationOptionTask","VisualTreeTask","AlignDiagramTask"],e.orgdiagram.DrawBackgroundAnnotationTask,"#008000"),r.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),r.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),r.addTask("DrawForegroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),r.addTask("DrawBackgroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),r.addTask("DrawForegroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),r.addTask("DrawBackgroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),r.addTask("DrawCursorTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","ItemTemplateParamsTask","CursorItemTask","SelectedItemsTask"],e.orgdiagram.DrawCursorTask,"#008000"),r.addTask("DrawHighlightTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","ItemTemplateParamsTask","HighlightItemTask","CursorItemTask","SelectedItemsTask"],e.orgdiagram.DrawHighlightTask,"#008000"),r.addTask("DrawHighlightAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","ScaleOptionTask","CombinedContextsTask","CalloutOptionTask","ReadTemplatesTask","AlignDiagramTask","CenterOnCursorTask","HighlightItemTask","CursorItemTask","SelectedItemsTask"],e.orgdiagram.DrawHighlightAnnotationTask,"#008000"),r.addTask("DrawTreeItemsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","ScaleOptionTask","ItemsSizesOptionTask","CombinedContextsTask","AlignDiagramTask","CenterOnCursorTask","ItemTemplateParamsTask","CursorItemTask","SelectedItemsTask","GroupTitleTemplateTask","CheckBoxTemplateTask","ButtonsTemplateTask"],e.orgdiagram.DrawTreeItemsTask,"#008000"),r.addTask("DrawMinimizedItemsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","MinimizedItemsOptionTask","ItemTemplateParamsTask","AlignDiagramTask"],e.orgdiagram.DrawMinimizedItemsTask,"#008000"),r.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],e.orgdiagram.DrawConnectorsTask,"#008000"),r.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","LabelsOptionTask","AlignDiagramTask"],e.orgdiagram.DrawItemLabelsTask,"#008000"),r},e.common.binarySearch=function(e,t,n,o){var i,a,r,s,l=null,m=n||0,c=o||e.length-1;if(e.length>0&&(l={index:m,item:s=e[m]},(i=t(s,m))>0))if(a=Math.abs(i),(i=t(s=e[c],c))>=0)l={index:c,item:s};else for(a>(i=Math.abs(i))&&(a=i,l={index:c,item:s});m+1<c;){if(0===(i=t(s=e[r=Math.round((m+c)/2)],r))){l={index:r,item:s};break}i>0?m=r:c=r,a>(i=Math.abs(i))&&(a=i,l={index:r,item:s})}return l},e.common.family=function(t){var n={},o={},i={},a={},r={},s={},l={};function m(e,t,n,o){var i,a;if(null!=o&&null!=(a=t[n]))for(i in a)if(a.hasOwnProperty(i)&&o.call(e,i,a[i]))break}function c(e,t){var l=!1;return null!=i[e]&&null!=i[e][t]&&(delete i[e][t],a[e]-=1,delete r[t][e],s[t]-=1,a[e]||(delete i[e],delete a[e]),r[t]||(delete r[t],delete s[t],null==n.null&&(n.null={},o.null=0),n.null[t]=!0,o.null+=1),l=!0),l}function h(e,t){var n;if(null!=t)for(n in l)if(l.hasOwnProperty(n)&&t.call(e,n,l[n]))break}function u(e,t,n,o){for(var i,a,r={},s=0,c=!0;c;){for(a in i={},c=!1,n)if(n.hasOwnProperty(a)&&!r[a])switch(r[a]=!0,o.call(e,a,l[a],s)){case 1:i={},c=!1;break;case 2:break;default:m(this,t,a,(function(e){r[e]||(i[e]=!0,c=!0)}))}n=i,s+=1}}function d(e,t,n){null!=n&&null!=t&&null!=l[t]&&null!=i[t]&&u(e,i,i[t],n)}function g(e,t,n){null!=n&&null!=t&&null!=l[t]&&null!=r[t]&&u(e,r,r[t],n)}function p(e,t,n,o,i,a){var r,s,c,h,u,d,g;if(null!=a){for(c in u=[],h={},l)l.hasOwnProperty(c)&&(h[c]=n[c]||0,h[c]||u.push(c));for(g=0;u.length>0;){for(d=[],r=0,s=u.length;r<s;r+=1){if(c=u[r],a.call(e,c,l[c],g)){d=[];break}g+=1,m(this,o,c,(function(e){h[e]-=1,0===h[e]&&d.push(e)}))}u=d}}}function f(e,t){p(e,0,s,i,0,t)}function T(e,t){p(e,0,a,r,0,t)}function y(e,t,n,o,i,a,r,s,m){var c,h,u,d=!1;if(null!=l[e]&&null!=r[e]){if(d=!0,m)for(c=0,h=t.length;c<h;c+=1)u=t[c],null!=l[u]&&null!=r[e][u]||(d=!1);if(d&&(null!=o&&(l[n]=o),null!=l[n]))for(i[n]||(i[n]={},a[n]=0),r[n]||(r[n]={},s[n]=0),i[n][e]||(i[n][e]=!0,a[n]+=1),r[e][n]||(r[e][n]=!0,s[e]+=1),c=0,h=t.length;c<h;c+=1)n!=(u=t[c])&&(null!=r[e][u]&&(delete r[e][u],s[e]-=1),null!=i[u][e]&&(delete i[u][e],a[u]-=1),i[u][n]||(i[u][n]=!0,a[u]+=1),r[n][u]||(r[n][u]=!0,s[n]+=1))}return d}function k(e,t,n,o){return y(e,t,n,o,r,s,i,a,!0)}function v(){this.id="",this.key="",this.children=[],this.childrenHash={},this.processed=!1}function w(e){this.items=[],this.weight=0,this.difference=0,arguments.length>0&&(this.difference=e)}function C(t){var n,o,a,s,l,c,h,u,d=e.common.graph(),g={};for(n in t)t.hasOwnProperty(n)&&m(this,i,n,(function(e){if(!g.hasOwnProperty(e))for(g[e]=!0,o=[],m(this,r,e,(function(e){o.push(e)})),a=0,l=o.length;a<l-1;a+=1)if(c=o[a],t.hasOwnProperty(c))for(s=a+1;s<l;s+=1)if(h=o[s],t.hasOwnProperty(h)){u=Math.abs(t[c].children.length-t[h].children.length);var n=d.edge(c,h);null==n&&(n=new w(u),d.addEdge(c,h,n)),n.items.push(e),n.weight+=1}}));return d}function b(e,t){this.parentid=e,this.childid=t,this.key=e+","+t}function P(e,t,n){this.from=e,this.to=t,this.distance=0}function O(e){return a[e]||0}function S(e){return s[e]||0}function I(e){var t=null,n=i[e]||{};for(t in n)if(n.hasOwnProperty(t))return t;return null}function x(e){var t=null,n=r[e]||{};for(t in n)if(n.hasOwnProperty(t))return t;return null}function A(e,t){this.parentid=e,this.childid=t,this.ids=[],this.nodes=[]}function L(){return e.common.family({roots:n,rootsCount:o,children:i,childrenCount:a,parents:r,parentsCount:s,nodes:l})}return function(t){e.common.isObject(t)&&(n=e.common.cloneObject(t.roots,!1),o=e.common.cloneObject(t.rootsCount,!0),i=e.common.cloneObject(t.children,!1),a=e.common.cloneObject(t.childrenCount,!0),r=e.common.cloneObject(t.parents,!1),s=e.common.cloneObject(t.parentsCount,!0),l=e.common.cloneObject(t.nodes,!0))}(t),{add:function(e,t,c){var h,u,d,g={};if(e&&0!==e.length||(e=[null]),null==l[t]&&null!=c){for(l[t]=c,h=0,u=e.length;h<u;h+=1)null==g[d=e[h]]&&d!=t&&(g[d]=!0,null!=l[d]?(null==r[t]&&(r[t]={},s[t]=0),r[t][d]||(r[t][d]=!0,s[t]+=1),null==i[d]&&(i[d]={},a[d]=0),i[d][t]||(i[d][t]=!0,a[d]+=1)):(null==n[d]&&(n[d]={},o[d]=0),n[d][t]||(n[d][t]=!0,o[d]+=1)));null!=n[t]&&(i[t]=n[t],a[t]=o[t],delete n[t],delete o[t],m(this,i,t,(function(e){null==r[e]&&(r[e]={},s[e]=0),r[e][t]||(r[e][t]=!0,s[e]+=1)})))}},adopt:function(e,t){var n,o,m;if(null==l[t])throw"Child should be in hierarchy!";for(n=0,o=e.length;n<o;n+=1){if(m=e[n],null==r[t]&&(r[t]={},s[t]=0),m==t||null==l[m])throw"Item cannot be parent of itself and parent should exist in the structure!";r[t][m]||(r[t][m]=!0,s[t]+=1),null==i[m]&&(i[m]={},a[m]=0),i[m][t]||(i[m][t]=!0,a[m]+=1)}},bundleChildren:k,bundleParents:function(e,t,n,o){return y(e,t,n,o,i,a,r,s,!0)},optimizeReferences:function(t){var n,o,c,h,u,g,p={},f={},T={},k=0,w=10;if(null!=t){for(n in l)k+=1,l.hasOwnProperty(n)&&(o=new v,m(this,i,n,(function(e){o.children.push(e),o.childrenHash[e]=!0})),o.children.sort(),o.id=n,o.key=o.children.join(","),T[o.id]=o);for(w=Math.pow(10,k.toString().length);!e.common.isEmptyObject(T);){for(n in c={},g={},h=C(T),T)T.hasOwnProperty(n)&&(T[n].processed||(u=h.getSpanningTree(n,(function(e){return e.weight*w+w-e.difference}))).loopLevels(this,(function(e,n,o){T[e].processed=!0,u.loopChildren(this,e,(function(o,m){var u,k,w,C,b,P,O,S=h.edge(e,o),I=null;if(T[o].processed=!0,S.weight>1){if(k=S.items.join(","),p.hasOwnProperty(k))I=p[k];else{for(u=t(),l[u.id]=u,(I=new v).id=u.id,I.key=k,w=0,C=S.items.length;w<C;w+=1)O=S.items[w],I.children.push(O),I.childrenHash[O]=!0,g[O]=!0;I.children.sort(),p[I.key]=I,f[I.id]=I,c[I.id]=I,g[I.id]=I,b=I.children.slice(0),d(this,n.replacementItem||e,(function(e,t,n){return I.childrenHash[e]||null==f[e]||(P=!0,d(this,e,(function(e,t,n){return I.childrenHash[e]?g.hasOwnProperty(e)?void 0:2:(P=!1,1)})),P&&b.push(e)),2})),y(n.replacementItem||e,b,I.id,u,r,s,i,a,!1),(a[e]||0)<=1&&null==n.replacementItem&&(n.replacementItem=I.id)}I.id!=o&&(b=I.children.slice(0),d(this,m.replacementItem||o,(function(e,t,n){return null==f[e]||I.childrenHash[e]||(P=!0,d(this,e,(function(e,t,n){return I.childrenHash[e]?(g.hasOwnProperty(e),2):(P=!1,1)})),P&&b.push(e)),2})),y(m.replacementItem||o,b,I.id,null,r,s,i,a,!1),(a[o]||0)<=1&&null==m.replacementItem&&(m.replacementItem=I.id))}}))})));T=c}}},eliminateManyToMany:function(e){var t,n;for(t in i)i.hasOwnProperty(t)&&(a[t]||0)>1&&m(this,i,t,(function(o){(s[o]||0)>1&&(n=e(),k(t,[o],n.id,n))}))},groupBy:function(e,t,n){if(null!=n){var o={};for(var i in l){var r=s[i]||0,m=a[i]||0;if(r<=1&&m<=1){var c=x(i),h=I(i),u=c+" * "+h;o.hasOwnProperty(u)||(o[u]=new A(c,h)),o[u].ids.push(i),o[u].nodes.push(l[i])}}for(u in o)if(o.hasOwnProperty(u)){var d=o[u];if(d.ids.length>=t&&n.call(e,d.parentid,d.childid,d.ids,d.nodes))break}}},getPlanarFamily:function(t){var n,o,i=new e.common.family;return t.loopLevels(this,(function(a,r){var s=new e.common.LinkedHashItems,l={},m={},c=[];t.loopLevelItems(this,a,(function(e,n,o){if(d(this,e,(function(n,o){var i=t.getItemPosition(n),a=new b(e,n);m[a.key]=a;var r=[];s.isEmpty()?s.add(i,[a]):(s.iterateBack((function(t,n){if(n<i)return s.insertAfter(n,i,[a]),!0;if(n==i)return t.push(a),!0;for(var o=0,l=t.length;o<l;o+=1){var m=t[o];m.parentid!=e&&r.push(m)}})),s.startKey()>i&&s.unshift(i,[a])),l[a.key]=r;for(var c=0,h=r.length;c<h;c+=1)l[r[c].key].push(a);return 2})),1==O(e)){var i=I(e);if(1==S(i)){var a=new b(e,i);c.push(a.key)}}}));var h,u=[];for(var g in l){var p=(h=l[g]).length;null!=u[p]?u[p].push(g):u[p]=[g]}var f={};u.unshift(c);for(var T=0,y=u.length;T<y;T+=1){var k=u[T];if(null!=k)for(n=0,o=k.length;n<o;n+=1)if(g=k[n],!f.hasOwnProperty(g)){f[g]=!0;var v=m[g];null==i.node(v.parentid)&&i.add(null,v.parentid,{}),null==i.node(v.childid)?i.add([v.parentid],v.childid,{}):i.adopt([v.parentid],v.childid);for(var w=0,C=(h=l[g]).length;w<C;w+=1)f[h[w].key]=!0}}})),i},getFamilyWithoutGrandParentsRelations:function(){var t=new e.common.family,n={},o=[],i=0;for(var a in r)r.hasOwnProperty(a)&&m(this,r,a,(function(e){var t=n[a];if(null==t&&(t={},n[a]=t),!t.hasOwnProperty(e)){var r=new P(a,e,i);o.push(r),n[a][e]=r}}));for(;o.length>0;){var s=[];i+=1;for(var l=0,c=o.length;l<c;l+=1){var u=o[l];a=u.to,r.hasOwnProperty(a)&&m(this,r,a,(function(e){var t=n[u.from];if(null==t&&(t={},n[u.from]=t),t.hasOwnProperty(e))t[e].distance=i;else{var o=new P(a,e,i);s.push(o),t[e]=o}}))}o=s}return h(this,(function(e,o){var i=[];m(this,r,e,(function(t){0===n[e][t].distance&&i.push(t)})),t.add(i,e,o)})),t},getGraph:function(t,n){var o,a=e.common.graph();for(o in i)i.hasOwnProperty(o)&&m(this,i,o,(function(e){var i=a.edge(o,e);null==i&&(i=null==n?new w({}):n.call(t,o,e),a.addEdge(o,e,i))}));return a},removeNode:function(e){null!=l[e]&&(m(this,i,e,(function(t){delete r[t][e],s[t]-=1,s[t]||(delete r[t],delete s[t],null==n.null&&(n.null={},o.null=0),n.null[t]||(n.null[t]=!0,o.null+=1))})),m(this,r,e,(function(t){delete i[t][e],a[t]-=1,a[t]||(delete i[t],delete a[t])})),null!=n.null&&null!=n.null[e]&&(delete n.null[e],o.null-=1,o.null||(delete n.null,delete o.null)),delete i[e],delete a[e],delete r[e],delete s[e],delete l[e])},removeRelation:function(e,t){var n=!1;return null!=l[e]&&null!=l[t]&&(n=c(e,t)||c(t,e)),n},removeChildRelation:function(e,t){var n=!1;return null!=l[e]&&null!=l[t]&&(n=c(e,t)),n},node:function(e){return l[e]},loop:h,loopLevels:function(e,t,n){var o,a,s,c,h,u,d,g,p,y,k,v,w,C,b,P,O,S,I,x,A=[],L={},M={},R=[],z={},B={},D=null,V=t?f:T;function F(){this.items={},this.minimumLevel=null}function H(e,t,n){var o=B[t];o||(o=new F,B[t]=o),o.addItemToLevel(e,n),D=null==D?n:Math.min(D,n),z[e]=n,M[e]=!0}if(F.prototype.addItemToLevel=function(e,t){var n=this.items[t];n?n.push(e):(n=[e],this.items[t]=n),this.minimumLevel=null==this.minimumLevel?t:Math.min(this.minimumLevel,t)},null!=n){for(V(this,(function(e,t,n){A.push(e),L[e]=n})),g=0,p=A.length;g<p;g+=1)if(C=A[g],null==M[C])for(R.push(C),H(C,g,0);R.length>0;){for(b=null,P=null,O=null,S=!t,I=[],y=0,k=R.length;y<k;y+=1)v=R[y],w=z[v],x=!1,t?(m(this,r,v,(function(e){var t;M[e]||(x=!0,t=L[e],(null==b||!S||b<t||b==t&&O>w-1)&&(b=t,P=e,O=w-1,S=!0))})),m(this,i,v,(function(e){var t;M[e]||(x=!0,t=L[e],(null==b||!S&&(b>t||b==t&&O<w+1))&&(b=t,P=e,O=w+1,S=!1))}))):(m(this,i,v,(function(e){var t;M[e]||(x=!0,t=L[e],(null==b||S||b<t||b==t&&O<w+1)&&(b=t,P=e,O=w+1,S=!1))})),m(this,r,v,(function(e){var t;M[e]||(x=!0,t=L[e],(null==b||S&&(b>t||b==t&&O>w-1))&&(b=t,P=e,O=w-1,S=!0))}))),x&&I.push(v);null!=P&&(I.push(P),H(P,g,O)),R=I}for(a=!0,o=D;a;){for(c in s={},a=!1,B)if(B.hasOwnProperty(c)&&null!=(u=(h=B[c]).items[h.minimumLevel-D+o]))for(s[c]=h,a=!0,g=0,p=u.length;g<p;g+=1)if(d=u[g],n.call(e,d,l[d],o-D))return a=!1,!0;B=s,o+=1}}},loopTopo:f,loopTopoReversed:T,loopChildren:d,loopParents:g,findLargestRoot:function(){var e,t,n=null,o={},i={};return e=null,T(this,(function(a,r,l){o.hasOwnProperty(a)||(o[a]={},i[a]=0),o[a][a]=!0,i[a]+=1,t=!0,g(this,r.id,(function(e,n,r){var l,m;if(t=!1,o.hasOwnProperty(e)||(o[e]={},i[e]=0),i[e]||1!=s[a])for(m in l=o[a])l.hasOwnProperty(m)&&(o[e][m]=!0,i[e]+=1);else o[e]=o[a],i[e]=i[a];return 2})),t&&(!e||i[a]>e)&&(e=i[a],n=a)})),n},loopRoots:function(e,t){var n,o,i,a,r,m,c,h,u,d,p,f=null,y=0,k={},v={},w={},C={};for(m in T(this,(function(e,t,n){k.hasOwnProperty(e)||(k[e]={},v[e]=0),k[e][e]=!0,v[e]+=1,o=!0,g(this,t.id,(function(t,n,i){var a,r;if(o=!1,k.hasOwnProperty(t)||(k[t]={},v[t]=0),v[t]||1!=s[e])for(r in a=k[e])a.hasOwnProperty(r)&&(k[t][r]||(k[t][r]=!0,v[t]+=1));else k[t]=k[e],v[t]=v[e];return 2})),o&&(w[e]=!0,y+=1)})),c={},w)if(w.hasOwnProperty(m))for(a in r=k[m])r.hasOwnProperty(a)&&(c[a]||(c[a]=[]),c[a].push(m.toString()));for(;y>0;){for(i in n=null,w)w.hasOwnProperty(i)&&(!n||v[i]<n)&&(n=v[i],f=i);if(null!=f){for(a in null!=t&&t.call(e,f,l[f]),r=k[f])if(r.hasOwnProperty(a)&&!C[a]){for(d=0,p=(h=c[a]).length;d<p;d+=1)u=h[d],v[u]-=1;C[a]=!0}delete w[f],y-=1}}},hasNodes:function(){return!e.common.isEmptyObject(l)},hasCommonChild:function(e){var t,n,o,a,c,h,u,d=!1;for(t={},o=0,a=0,c=e.length;a<c;a+=1)h=e[a],null==l[h]||t[h]||(t[h]=!0,o+=1);for(h in n={},t)t.hasOwnProperty(h)&&m(this,i,h,(function(e){n[e]?n[e]+=1:n[e]=1}));for(u in n)if(n.hasOwnProperty(u)&&null!=r[u]&&(s[u]||0)==n[u]&&n[u]==o){d=!0;break}return d},loopNeighbours:function(e,t,n){var o={};null!=n&&(d(this,t,(function(t,i,a){return o.hasOwnProperty(t)||(o[t]=null,n.call(e,t,i,1)&&(o[t]=2),g(this,t,(function(t,i,a){return o.hasOwnProperty(t)||(o[t]=null,n.call(e,t,i,2)&&(o[t]=2)),o[t]}))),o[t]})),g(this,t,(function(t,i,a){return o.hasOwnProperty(t)||(o[t]=null,n.call(e,t,i,1)&&(o[t]=2),d(this,t,(function(t,i,a){return o.hasOwnProperty(t)||(o[t]=!0,n.call(e,t,i,2)&&(o[t]=2)),o[t]}))),o[t]})))},countChildren:O,countParents:S,firstParent:x,firstChild:I,validate:function(e){var t,c;function u(e){var t,n=0;if(null!=e)for(t in e)e.hasOwnProperty(t)&&(n+=1);return n}for(t in h(this,(function(t,n){m(this,i,t,(function(n){if(!r.hasOwnProperty(n)||!r[n].hasOwnProperty(t))return null!=e&&(e.message="Child #"+n+" does not reference parent #"+t),!1})),m(this,r,t,(function(n){if(!i.hasOwnProperty(n)||!i[n].hasOwnProperty(t))return null!=e&&(e.message="Parent #"+n+" does not reference child #"+t),!1}))})),r)if(r.hasOwnProperty(t)){if((s[t]||0)!=u(r[t]))return null!=e&&(e.message="Parents count for item #"+t+" missmatch."),!1;if(r.hasOwnProperty(t)&&!l.hasOwnProperty(t))return null!=e&&(e.message="Orphant parents for item #"+t),!1}for(c in i)if(i.hasOwnProperty(c)){if((a[c]||0)!=u(i[c]))return null!=e&&(e.message="Children count for item "+c+" missmatch."),!1;if(i.hasOwnProperty(c)&&!l.hasOwnProperty(c))return null!=e&&(e.message="Orphant children of item "+c),!1}for(c in n)if(n.hasOwnProperty(c)){if((o[c]||0)!=u(n[c]))return null!=e&&(e.message="Root children count for item @"+c+" missmatch."),!1;m(this,n,c,(function(t){if(!l.hasOwnProperty(t))return null!=e&&(e.message="Child #"+t+"of root #"+c+" does not exists."),!1}))}return!0},hasLoops:function(){var e=L();return f(this,(function(t,n,o){e.removeNode(t)})),e.hasNodes()},clone:L,BREAK:1,SKIP:2}},e.common.FamilyAlignment=function(t,n,o,i){var a,r,s={};function l(t,n){var o=t[n];return null==o&&(o=new e.common.FamilyMargins,t[n]=o),o}function m(e,t,n,o,i,a,r,l){var m=a,c=a;n.loopSiblings(this,t,(function(e){var t=r.getItemPosition(e);m=Math.min(m,t),c=Math.max(c,t)}));for(var h=a-1;h>=m;h-=1){var u=r.getItemAtPosition(o,h);if(!e.hasOwnProperty(u)){var d=r.getItemAtPosition(o,h+1);e[u]=e[d]-(s[u]/2+(l[d]||0)+s[d]/2)}}for(h=a+1;h<=c;h+=1)u=r.getItemAtPosition(o,h),e.hasOwnProperty(u)||(d=r.getItemAtPosition(o,h-1),e[u]=e[d]+(s[d]/2+(l[u]||0)+s[u]/2));var g=e[u=r.getItemAtPosition(o,m)]-s[u]/2;g+=e[u=r.getItemAtPosition(o,c)]+s[u]/2,g/=2,m=null,c=null,n.loopNonSiblings(this,t,(function(e){var t=r.getItemPosition(e);m=null!=m?Math.min(m,t):t,c=null!=c?Math.max(c,t):t}));var p=0;for(h=m;h<=c;h+=1){var f=r.getItemAtPosition(i,h);p+=s[f],h>m&&(p+=l[f]||0)}var T=g-p/2;for(f=r.getItemAtPosition(i,m),e.hasOwnProperty(f)||(e[f]=T+s[f]/2),h=m+1;h<=c;h+=1)f=r.getItemAtPosition(i,h),e.hasOwnProperty(f)||(d=r.getItemAtPosition(i,h-1),e[f]=e[d]+(s[d]/2+(l[f]||0)+s[f]/2))}return null!=i&&o.loopItems(this,(function(e,n,o,a,r){s[e]=i.call(t,e,n)})),r=function(t,n){var o={},i={},a=null;return n.loopLevelsReversed(this,(function(r,m){var c=new e.common.FamilyMargins;null!=a&&(a.add(0,Number.MAX_VALUE),c.merge(a,0));var h=a=c;n.loopLevelItems(this,r,(function(e,a,r){var m=l(i,e);switch(m.add(s[e],r),t.countParents(e)){case 0:null!=h&&(o[e]=h.attach(m));break;case 1:t.loopParents(this,e,(function(n,a,r){var s=l(i,n);return o[e]=s.merge(m),h=s,t.BREAK}));break;default:var c=0,u=null,d=null,g={};t.loopParents(this,e,(function(e,o,i){if(i>0)return t.BREAK;c+=s[e];var a=n.getItemPosition(e);u=null==u?a:Math.min(u,a),d=null==d?a:Math.max(d,a),g[a]=e}));for(var p=-c/2,f=u;f<=d;f+=1){var T=g[f];p+=s[T]/2;var y=l(i,T);y.attach(m,-p),h=y,p+=s[T]/2}}}))})),o}(n,o),a=function(t,n,o){var i={},a=e.common.getFamilyUnits(t),r={};return n.loopLevels(this,(function(e,t){n.loopLevelItems(this,e,(function(t,l,c){if(!i.hasOwnProperty(t)){var h=0;if(0===c)null!=o[t]&&(h+=o[t]+s[t]/2);else{var u=n.getItemAtPosition(e,c-1);h+=i[u]+s[u]/2+(o[t]||0)+s[t]/2}i[t]=h}var d=a[t];if(null!=d)for(var g=0;g<d.length;g+=1){var p=d[g];r.hasOwnProperty(p.id)||(r[p.id]=!0,m(i,t,p,e,e+1,c,n,o))}}))})),i}(n,o,r),{getOffset:function(e){return a[e]}}},e.common.FamilyMargins=function(){function e(e,t,n,o){this.left=e,this.right=t,this.leftIndex=n,this.rightIndex=o}this.items=[],this.add=function(t,n,o,i){switch(arguments.length){case 2:this.items.push(new e(-t/2,t/2,n,n));break;case 4:this.items.push(new e(t,n,o,i))}},this.merge=function(t,n){for(var o=this.getDistanceTo(t),i=0,a=0,r=this.items.length,s=t.items.length,l=Math.min(r,s),m=Math.max(r,s),c=0;c<l;c+=1){var h=this.items[r-1-c],u=t.items[s-1-c];if(0===c){var d=h.right-h.left+(o||0)+(n||0)+u.right-u.left;i=d/2+h.left,a=d/2-u.right}h.left-=i,h.right=u.right+a,h.rightIndex=u.rightIndex,this.items[m-1-c]=h}for(c=l;c<m;c+=1)h=this.items[r-1-c],u=t.items[s-1-c],null==h?this.items[m-1-c]=new e(u.left+a,u.right+a,u.leftIndex,u.rightIndex):(h.left-=i,h.right-=i);return o},this.attach=function(t,n){for(var o=this.getDistanceTo(t),i=n||0,a=this.items.length,r=t.items.length,s=Math.min(a,r),l=Math.max(a,r),m=0;m<s;m+=1){var c=this.items[a-1-m],h=t.items[r-1-m];0===m&&(i=c.right+(o||0)+(n||0)-h.left),c.right=h.right+i,c.rightIndex=h.rightIndex,this.items[l-1-m]=c}for(m=s;m<l;m+=1)null==(c=this.items[a-1-m])&&(h=t.items[r-1-m],this.items[l-1-m]=new e(h.left+i,h.right+i,h.leftIndex,h.rightIndex));return o},this.getDistanceTo=function(e){var t=null,n=0,o=this.items.length,i=e.items.length,a=Math.min(o,i);if(a>0){for(var r=0;r<a;r+=1){var s=this.items[o-1-r],l=e.items[i-1-r];0===r?t=n=s.right-l.left:s.rightIndex<l.leftIndex&&(t=Math.max(t,s.right-l.left))}t-=n}return t},this.loop=function(e,t){if(null!=t)for(var n=0,o=this.items.length;n<o;n+=1){var i=this.items[o-1-n];if(t.call(e,n,i.left,i.right,i.leftIndex,i.rightIndex))break}},this.getLeft=function(e){var t=this.items.length-1;if(t>=e)return this.items[t-e].left}},e.common.HeapResult=function(e){this.key=e.key,this.priority=e.priority,this.item=e.item},e.common.FibonacciHeap=function(t){var n=null,o={};function i(e,t,n){this.key=e,this.priority=t,this.item=n,this.degree=0,this.marked=!1,this.parent=null,this.child=null,this.left=null,this.right=null}function a(e,t){var n=o[e.right];t.right=e.right,t.left=e.key,e.right=t.key,n.left=t.key}function r(e){var t=o[e.left],n=o[e.right];t.right=n.key,n.left=t.key,e.right=e.key,e.left=e.key}function s(){var t=null;return null!=n&&(t=new e.common.HeapResult(o[n])),t}function l(){var e=s();if(null!=e){var t=o[n],i=o[t.right];if(null!=t.child){var a=o[t.child],l=o[a.left];t.right=a.key,i.left=l.key,a.left=t.key,l.right=i.key,r(t),delete o[t.key],n=null,m(a.key)}else r(t),delete o[t.key],n=null,i.key!=t.key&&m(i.key)}return e}function m(e){for(var i,a=[],r={},s=e;!r.hasOwnProperty(s);){var l=o[s],m=l.right;for(r[s]=!0,l.parent=null;null!=(i=a[l.degree]);)(t?l.priority>i.priority:l.priority<i.priority)?c(l,i):(c(i,l),l=i),a[l.degree-1]=null;a[l.degree]=l,(null==n||null==o[n]||(t?o[n].priority<=l.priority:o[n].priority>=l.priority))&&(n=l.key),s=m}}function c(e,n){e.degree+=1,r(n);var i=o[e.child];null!=i?(a(i,n),(t?i.priority<n.priority:i.priority>n.priority)&&(e.child=n.key)):e.child=n.key,n.parent=e.key}function h(e,i){var a=o[e];if(t?a.priority>i:a.priority<i)throw"Priority increase is not supported";if(a.priority=i,null!=a.parent){var r=o[a.parent];(t?r.priority<a.priority:r.priority>a.priority)&&(u(r,a),function e(t){if(null!=t.parent)if(t.marked){var n=o[t.parent];u(n,t),e(n)}else t.marked=!0}(r))}(t?o[n].priority<a.priority:o[n].priority>a.priority)&&(n=a.key)}function u(e,t){t.marked=!1,t.parent=null,t.right==t.key?e.child=null:(e.child=t.right,r(t)),e.degree-=1,a(o[n],t)}return{add:function(e,r,s){if(o.hasOwnProperty(e))throw"Duplicate keys are not supported!";var l=new i(e,r,s);if(o[e]=l,null==n)l.left=e,l.right=e,n=e;else{var m=o[n];a(m,l),(t?m.priority<l.priority:m.priority>l.priority)&&(n=e)}},getPriority:function(e){var t=null;return o.hasOwnProperty(e)&&(t=o[e].priority),t},setPriority:h,heapRoot:s,extractRoot:l,deleteKey:function(e){h(e,t?1/0:-1),l()},validate:function(){var e=0;for(var t in o)if(o.hasOwnProperty(t)){var i=o[t];if(e+=1,null!=i.child){if(!o.hasOwnProperty(i.child))throw"Child does not exists";var a=o[i.child];if(a.parent!=i.key)throw"Child references wrong parent"}if(null!=i.parent&&!o.hasOwnProperty(i.parent))throw"Parent does not exists";if(null!=i.left){if(!o.hasOwnProperty(i.left))throw"Left does not exists";if((a=o[i.left]).right!=i.key)throw"Left references wrong right"}if(null!=i.right){if(!o.hasOwnProperty(i.right))throw"Right does not exists";if((a=o[i.right]).left!=i.key)throw"Right references wrong left"}}if(null==n&&e>0)throw"Orphans";if(null!=n){if(!o.hasOwnProperty(n))throw"Root node does not exists";if(null!=(i=o[n]).parent)throw"Root node has parent reference";for(var r=[n],s={},l=0;r.length>0;){for(var m=[],c=0,h=r.length;c<h;c+=1)for(var u=o[r[c]];!s.hasOwnProperty(u.key);)s[u.key]=!0,l+=1,null!=u.child&&m.push(u.child),u=o[u.right];r=m}if(e!=l)throw"Tree has loops or orpants"}}}},e.common.getCrossingRectangles=function(t,n,o){function i(e,t,n,o){this.isStart=e,this.index=t,this.x=n,this.rect=o}function a(){this.count=0,this.rectangles={},this.add=function(e){this.count+=1,this.rectangles[e]=!0},this.remove=function(e){return this.count-=1,delete this.rectangles[e],0==this.count}}function r(e,i,a,r,s){e.loopForward(this,i,(function(e,i){if(e>a)return!0;for(var l in i.rectangles)if(i.rectangles.hasOwnProperty(l)){var m=r>l?r+"-"+l:l+"-"+r;u.hasOwnProperty(m)||(u[m]=!0,o.call(t,s,n[l]))}}))}if(null!=o){for(var s=[],l=0;l<n.length;l+=1){var m=n[l];s.push(new i(1,l,m.x,m)),s.push(new i(0,l,m.right(),m))}s.sort((function(e,t){return e.x==t.x?t.isStart-e.isStart:e.x-t.x}));var c=e.common.SortedList(),h={},u={};for(l=0;l<s.length;l+=1){var d=s[l],g=[d.rect.y,d.rect.bottom()];if(1==d.isStart){r(c,g[0],g[1],d.index,d.rect);for(var p=0,f=g.length;p<f;p+=1){var T=g[p],y=h[T];null==y&&(y=new a,h[T]=y,c.add(T,y)),y.add(d.index)}}else{for(p=0,f=g.length;p<f;p+=1)(y=h[T=g[p]]).remove(d.index)&&(delete h[T],c.remove(T));r(c,g[0],g[1],d.index,d.rect)}}}},e.common.Edge=function(e,t){this.from=e,this.to=t},e.common.getFamilyLoops=function(t,n){var o,i,a,r,s,l,m,c,h=[],u=t.clone();t.loopTopo(this,(function(e){u.removeNode(e)})),t.loopTopoReversed(this,(function(e){u.removeNode(e)}));var d=u.clone();for(d.loop(this,(function(t){if(null!=u.node(t)){d.loopParents(this,t,(function(n){return h.push(new e.common.Edge(n,t)),u.removeChildRelation(n,t),d.SKIP}));var n=[];u.loopTopo(this,(function(e){n.push(e)})),u.loopTopoReversed(this,(function(e){n.push(e)}));for(var o=0;o<n.length;o+=1)u.removeNode(n[o])}})),i=0,a=h.length;i<a;i+=1)if(o=h[i],!d.removeChildRelation(o.from,o.to))throw"Relation does not exists";if(n&&d.hasLoops())throw"Failed to clean loops in family";var g=d.getGraph(this,(function(e,t){return{from:e,to:t,capacity:1,flow:0}})),p="__1000__",f="__2000__",T=h.length;for(i=0,a=h.length;i<a;i+=1)o=h[i],null==(c=g.edge(o.from,f))?g.addEdge(o.from,f,{from:o.from,to:f,capacity:1,flow:0,tos:[o.to]}):(c.capacity+=1,c.tos.push(o.to)),null==(c=g.edge(p,o.to))?g.addEdge(p,o.to,{from:p,to:o.to,capacity:1,flow:0,froms:[o.from]}):(c.capacity+=1,c.froms.push(o.from));for(var y=0;g.getLevelGraph(this,p,(function(e,t,n){return e==n.from?n.capacity>n.flow:n.flow>0})).hasNode(f);)for(;;){var k=g.dfsPath(this,p,f,(function(e,t,n){return e==n.from?n.capacity>n.flow:n.flow>0}));if(0==k.length)break;var v=1/0;for(i=0,a=k.length;i<a-1;i+=1){l=k[i],m=k[i+1];var w=0;if(0==(w=(c=g.edge(l,m)).from==l?c.capacity-c.flow:c.flow))throw"Broken flow path";v=Math.min(v,w)}for(i=0,a=k.length;i<a-1;i+=1)l=k[i],m=k[i+1],(c=g.edge(l,m)).from==l?c.flow+=v:c.flow-=v;y+=v}if(y<T){var C=g.getLevelGraph(this,p,(function(e,t,n){return e==n.from&&n.capacity>n.flow})),b=[];C.loopNodes(this,p,(function(t){g.loopNodeEdges(this,t,(function(n,o){if(o.to==n&&!C.hasNode(n)){var i=!0;g.dfsLoop(this,n,(function(e,t,n){return n.from==e&&n.capacity>0}),(function(e){return!!C.hasNode(e)&&(i=!1,!0)})),i&&b.push(new e.common.Edge(t,n))}}))}));var P=[],O=0;for(i=0,a=b.length;i<a;i+=1){var S=b[i];if(S.from==p)for(r=0,s=(c=g.edge(S.from,S.to)).froms.length;r<s;r+=1)P.push(new e.common.Edge(c.froms[r],S.to)),O+=1;else if(S.to==f)for(r=0,s=(c=g.edge(S.from,S.to)).tos.length;r<s;r+=1)P.push(new e.common.Edge(S.from,c.tos[r])),O+=1;else P.push(S),O+=1}if(O!=y)throw"Failed to properly collect edges cutting maximum flow";h=P}return h},e.common.getFamilyUnits=function(e){var t,n,o=[],i={};function a(){this.fromIndex=0,this.toIndex=0,this.items=[],this.hash={}}function r(e){this.id=e,this.parents=new a,this.children=new a,this.loopSiblings=function(e,t,n){this._loop(e,this.parents.hash.hasOwnProperty(t)?this.parents.items:this.children.items,n)},this.loopNonSiblings=function(e,t,n){this._loop(e,this.parents.hash.hasOwnProperty(t)?this.children.items:this.parents.items,n)},this.loop=function(e,t){this._loop(e,this.parents.items,t),this._loop(e,this.children.items,t)},this._loop=function(e,t,n){if(null!=n)for(var o=0,i=t.length;o<i;o+=1){var a=t[o];n.call(e,a)}},this.addParent=function(e){this._add(e,this.parents)},this.addChild=function(e){this._add(e,this.children)},this._add=function(e,t){t.hash.hasOwnProperty(e)||(t.items.push(e),t.hash[e]=!0)}}t=0,e.loop(this,(function(n,a){var s=e.countChildren(n);if(s>0&&!i.hasOwnProperty(n)){var l=new r(t);t+=1,l.addParent(n),e.loopChildren(this,n,(function(t,n){return l.addChild(t),1==s&&e.loopParents(this,t,(function(t){return l.addParent(t),i[t]=l,e.SKIP})),e.SKIP})),o.push(l),i[n]=l}}));var s={};for(t=0,n=o.length;t<n;t+=1){var l=o[t];l.loop(this,(function(e){s.hasOwnProperty(e)?s[e].push(l):s[e]=[l]}))}return s},e.common.getLiniarBreaks=function(t){for(var n=[],o=t.length,i=0,a=0;a<o;a+=1)i+=t[a],n[a]=i;function r(o,i){var a=0,r=(n[i]-n[o]+t[o])/(i-o+1),s=e.common.binarySearch(t,(function(e){return r-e}),o,i);return s.item<=r?(a+=r*(s.index+1-o)-(n[s.index]-n[o]+t[o]),a+=n[i]-n[s.index]-r*(i-s.index)):(a+=r*(s.index-o)-(n[s.index]-n[o]-t[s.index]+t[o]),a+=n[i]-n[s.index]+t[s.index]-r*(i-s.index+1)),a}function s(e,t){var n=0;return n+=r(0,e),t>e+1&&(n+=r(e+1,t-1)),n+=r(t,o-1)}for(var l=0,m=o-1,c=s(l,m);l<m+1;){var h=s(l+1,m),u=s(l,m-1);if(h<u){if(h>=c)break;l+=1,c=h}else{if(u>=c)break;m-=1,c=u}}return[l,m-1,o-1]},e.common.getMergedRectangles=function(t,n,o){var i,a,r,s,l;n.sort((function(e,t){return e.x==t.x?e.y-t.y:e.x-t.x}));var m=[],c={};for(i=0,a=n.length;i<a;i+=1)for(var h=n[i],u=[h.x,h.right()],d=0;d<u.length;d+=1){var g=u[d];null==(l=c[g])&&(l={x:g,add:[],remove:[]},c[g]=l,m.push(l)),g==h.x?l.add.push(i):l.remove.push(i)}function p(e,t){this.start=e,this.startHead=null,this.end=t,this.endHead=null,this.overlap=function(e){return!(this.end<e.start||this.start>e.end)}}function f(e,t){this.x=e,this.ranges=t}m.sort((function(e,t){return e.x-t.x}));var T={},y=[];for(y.push(new f(null,[])),i=0,a=m.length;i<a;i+=1){for(r=0,s=(l=m[i]).add.length;r<s;r+=1)T[l.add[r]]=!0;for(r=0,s=l.remove.length;r<s;r+=1)delete T[l.remove[r]];var k=[];for(var v in T)T.hasOwnProperty(v)&&k.push(n[v]);k.sort((function(e,t){return e.y-t.y}));var w=[],C=null,b=null;for(r=0,s=k.length;r<s;r+=1){var P=k[r];null==C?(C=P.y,b=P.bottom()):b<P.y?(w.push(new p(C,b)),C=P.y,b=P.bottom()):b=Math.max(b,P.bottom())}null!=C&&w.push(new p(C,b)),y.push(new f(l.x,w))}var O=[],S={},I=1;function x(e,t){this.isHead=e,this.list=t,S.hasOwnProperty(t)||(S[t]=[]),S[t].push(this),this.add=function(e){e.from.equalTo(e.to)||(this.isHead?(O[this.list].add(I,e),I+=1):(O[this.list].unshift(I,e),I+=1))},this.getTail=function(){return new x(!this.isHead,this.list)},this.attach=function(e){if(this.list!=e.list){O[this.list].attach(O[e.list]);var t=S[e.list];if(delete S[e.list],null!=t)for(var n=0,o=t.length;n<o;n+=1){var i=t[n];i!=e&&(i.list=this.list,S[this.list].push(i))}}}}function A(t){return O.push(new e.common.LinkedHashItems),new x(t,O.length-1)}for(i=1,a=y.length;i<a;i+=1)for(var L=y[i-1],M=y[i],R=0,z=0;R<L.ranges.length||z<M.ranges.length;){var B=R<L.ranges.length?L.ranges[R]:null,D=z<M.ranges.length?M.ranges[z]:null;if(null!=D)if(null!=B)if(D.overlap(B)){for(m=[new e.common.Point(L.x,B.start),new e.common.Point(M.x,B.start),new e.common.Point(M.x,D.start)],W=1;W<m.length;W+=1)B.startHead.add(new e.common.Vector(m[W],m[W-1]));D.startHead=B.startHead;for(var V=!0;V;)if(V=!1,B.end>D.end){var F=z+1<M.ranges.length?M.ranges[z+1]:null;if(null!=F&&F.overlap(B)){var H=new e.common.Point(M.x,F.start),N=new e.common.Point(M.x,D.end);D.endHead=A(!0),D.endHead.add(new e.common.Vector(H,N)),F.startHead=D.endHead.getTail(),z+=1,D=F,V=!0}}else{var E=R+1<L.ranges.length?L.ranges[R+1]:null;if(null!=E&&E.overlap(D)){for(m=[new e.common.Point(L.x,B.end),new e.common.Point(M.x,B.end),new e.common.Point(M.x,E.start),new e.common.Point(L.x,E.start)],W=1;W<m.length;W+=1)B.endHead.add(new e.common.Vector(m[W-1],m[W]));B.endHead.attach(E.startHead),R+=1,B=E,V=!0}}for(m=[new e.common.Point(L.x,B.end),new e.common.Point(M.x,B.end),new e.common.Point(M.x,D.end)],W=1;W<m.length;W+=1)B.endHead.add(new e.common.Vector(m[W-1],m[W]));D.endHead=B.endHead,R+=1,z+=1}else{if(B.start<D.start){for(m=[new e.common.Point(L.x,B.end),new e.common.Point(M.x,B.end),new e.common.Point(M.x,B.start),new e.common.Point(L.x,B.start)],W=1;W<m.length;W+=1)B.endHead.add(new e.common.Vector(m[W-1],m[W]));B.endHead.attach(B.startHead),R+=1;continue}D.endHead=A(!0),D.endHead.add(new e.common.Vector(new e.common.Point(M.x,D.start),new e.common.Point(M.x,D.end))),D.startHead=D.endHead.getTail(),z+=1}else D.endHead=A(!0),D.endHead.add(new e.common.Vector(new e.common.Point(M.x,D.start),new e.common.Point(M.x,D.end))),D.startHead=D.endHead.getTail(),z+=1;else{m=[new e.common.Point(L.x,B.end),new e.common.Point(M.x,B.end),new e.common.Point(M.x,B.start),new e.common.Point(L.x,B.start)];for(var W=1;W<m.length;W+=1)B.endHead.add(new e.common.Vector(m[W-1],m[W]));B.endHead.attach(B.startHead),R+=1}}if(null!=o)for(i=0;i<O.length;i+=1)if(S.hasOwnProperty(i)){var G=O[i];m=[],G.iterate((function(e,t){0==m.length?(m.push(e.from),m.push(e.to)):m.push(e.to)})),o.call(t,m)}},e.common.getMinimumCrossingRows=function(e,t,n){var o=null,i=null;if(null!=n){t.sort((function(e,t){return e.y-t.y}));for(var a=0;a<t.length;a+=1){var r=t[a],s=r.bottom();null===o?(o=r.y,i=s):r.y>=i?(n.call(e,o),o=r.y,i=s):(r.y>o&&(o=r.y),s<i&&(i=s))}null!==o&&n.call(e,o)}},e.common.graph=function(){var t={};function n(e,n,o,i){var a,r,s,l,m,c,h=[];if(h.push(n),o[n]=!0,null!=i)for(;h.length>0;){for(r=[],s=0,l=h.length;s<l;s+=1){if(a=h[s],i.call(e,a))return;for(c in m=t[a])m.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=!0,r.push(c))}h=r}}function o(e,n){var o,i,a,r=null,s=0,l=null;for(o in t)if(t.hasOwnProperty(o)){for(a in s=0,i=t[o])i.hasOwnProperty(a)&&(s+=n.call(e,i[a],o,a));(s>l||null==l)&&(r=o,l=s)}return r}function i(e,n,i,a,r){var s,l,m,c,h,u,d,g,p,f,T={},y=[],k={},v=0;if(null!=i&&null!=a&&(null==n&&(n=o(e,i)),null!=n))for(a.call(e,n),T[n]=!0,v+=1,k[n]=null;v>0;){for(s in y=[],m=null,c=null,h={},T)if(T.hasOwnProperty(s)){for(d in l=!1,u=t[s])if(u.hasOwnProperty(d)&&!k.hasOwnProperty(d))switch(g=i.call(e,u[d],s,d),l=!0,r){case 1:null==h[d]&&(h[d]=0),h[d]+=g,(!c||h[d]>c)&&(m=d,c=h[d]);break;case 2:null==h[d]?h[d]=g:h[d]=Math.min(h[d],g),(!c||h[d]<c)&&(m=d,c=h[d])}l||y.push(s)}if(null==m)break;for(T[m]=!0,v+=1,k[m]=!0,a.call(e,m),p=0,f=y.length;p<f;p+=1)delete T[y[p]],v-=1}}return{addEdge:function(e,n,o){null!=t[e]&&null!=t[e][n]||null==o||(null==t[e]&&(t[e]={}),t[e][n]=o,null==t[n]&&(t[n]={}),t[n][e]=o)},edge:function(e,n){var o=null;return null!=t[e]&&t[e][n]&&(o=t[e][n]),o},hasNode:function(e){return t.hasOwnProperty(e)},loopNodes:function(e,o,i){var a={};if(null==o)for(o in t)t.hasOwnProperty(o)&&(a.hasOwnProperty[o]||n(e,o,a,i));else n(e,o,a,i)},loopNodeEdges:function(e,n,o){var i,a;if(null!=o&&null!=(i=t[n]))for(a in i)i.hasOwnProperty(a)&&o.call(e,a,i[a])},getSpanningTree:function(n,o){var i,a,r,s,l,m=e.common.tree(),c=e.common.FibonacciHeap(!0),h={};for(c.add(n,0,null),h[n]=null;null!=(i=c.extractRoot());){for(r in a=t[i.key])a.hasOwnProperty(r)&&!m.node(r)&&(s=null!=o?o(a[r]):a[r],null==(l=c.getPriority(r))?(c.add(r,s,null),h[r]=i.key.toString()):l<=s&&(c.setPriority(r,s),h[r]=i.key.toString()));m.add(h[i.key],i.key.toString(),{})}return m},getTotalWeightGrowthSequence:function(e,t,n){i(e,o(e,t),t,n,1)},getMinimumWeightGrowthSequence:function(e,t,n,o){i(e,t,n,o,2)},getShortestPath:function(n,o,i,a,r){var s,l,m,c,h,u,d,g,p,f=e.common.FibonacciHeap(!1),T={},y={},k={},v=0,w=0;for(g=0,p=i.length;g<p;g+=1)l=i[g],k.hasOwnProperty(l)||(v+=1,k[l]=!0);for(f.add(o,0,null),y[o]=null;null!=(s=f.extractRoot());){for(l in m=t[s.key])m.hasOwnProperty(l)&&(h=1,null!=a?(h=a.call(n,m[l],s,l),c=s.priority+h):c=s.priority+1,h>=0&&(null!=(T=f.getPriority(l))?T>c&&(f.setPriority(l,c),y[l]=s.key):y.hasOwnProperty(l)||(f.add(l,c,null),y[l]=s.key)));if(k.hasOwnProperty(s.key)){for(u=[],d=s.key;null!=d;)u.push(d),d=y[d];if(r.call(n,u,s.key),(w+=1)>=v)break}}},dfsPath:function(e,n,o,i){var a=[],r={};if(a.push(n),r[n]=null,n!=o)for(;a.length>0&&!r.hasOwnProperty(o);){var s=a[a.length-1];a.length-=1;var l=t[s];for(var m in l)if(l.hasOwnProperty(m)&&!r.hasOwnProperty(m)&&i.call(e,s,m,l[m])&&(a.push(m),r[m]=s,m==o))break}s=o;for(var c=[];r.hasOwnProperty(s);)c.push(s),s=r[s];var h=[];if(c.length>0)for(var u=c.length-1;u>=0;u-=1)h.push(c[u]);return h},getLevelGraph:function(n,o,i){var a,r,s,l={},m=[];for(m.push(o),l[o]=1;m.length>0;){for(var c=[],h=0,u=m.length;h<u;h+=1)for(var d in r=l[a=m[h]],s=t[a])s.hasOwnProperty(d)&&(l.hasOwnProperty(d)||i.call(n,a,d,s[d])&&(c.push(d),l[d]=r+1));m=c}var g=e.common.graph();for(a in t)if(l.hasOwnProperty(a))for(d in r=l[a],s=t[a])l.hasOwnProperty(d)&&r+1==l[d]&&g.addEdge(a,d,s[d]);return g},dfsLoop:function(e,n,o,i){var a,r=[],s={};for(r.push(n),s[n]=!0;r.length>0;){a=r[r.length-1],r.length-=1;var l=t[a];for(var m in l)if(l.hasOwnProperty(m)&&!s.hasOwnProperty(m)&&o.call(e,a,m,l[m])&&(r.push(m),s[m]=!0,i.call(e,m)))return}}}},e.common.LCA=function(t){var n,o=[],i=[],a={};return function(){var r=0;t.loopEulerWalk(this,(function(e,t,n){o.push(e),i.push(n),a.hasOwnProperty(e)||(a[e]=r),r+=1})),n=e.common.RMQ(i)}(),{getLowestCommonAncestor:function(e,t){var i,r=a[e],s=a[t];return i=r<s?n.getRangeMinimumIndex(r,s):n.getRangeMinimumIndex(s,r),o[i]}}},e.common.LinkedHashItems=function(){var e={},t={},n={},o=null,i=null;function a(a,r){if(e.hasOwnProperty(a))throw"Duplicate segments are not supported!";e[a]=r,t[a]=null,null==i?(o=a,n[a]=null):(t[i]=a,n[a]=i),i=a}function r(a,r){if(e.hasOwnProperty(a))throw"Duplicate segments are not supported!";e[a]=r,n[a]=null,null==o?(i=a,t[a]=null):(n[o]=a,t[a]=o),o=a}function s(o,i,s){if(e.hasOwnProperty(i))throw"Duplicate segments are not supported!";if(null==o)r(i,s);else{var l=t[o];null==l?a(i,s):(e[i]=s,t[o]=i,t[i]=l,n[l]=i,n[i]=o)}}function l(a,r,s,l){var m,c=s;if(null==c&&(c=a?o:i),null!=r)for(;null!=c;){if(null!=(m=e[c])&&r(m,c))return;c=c==l?null:a?t[c]:n[c]}}function m(e,t,n){l(!0,e,t,n)}return{add:a,item:function(t){return e[t]},nextKey:function(e){return t[e]},prevKey:function(e){return n[e]},startKey:function(){return o},endKey:function(){return i},unshift:r,insertAfter:s,insertBefore:function(t,o,i){if(e.hasOwnProperty(o))throw"Duplicate segments are not supported!";if(null==t||!e.hasOwnProperty(t))throw"Before key should be defined!";var a=n[t];null==a?r(o,i):s(a,o,i)},remove:function(a){var r=n[a],s=t[a];null!=r?t[r]=s:o=s,null!=s?n[s]=r:i=r,delete e[a],delete t[a],delete n[a]},isEmpty:function(){return null==o},attach:function(e){e.iterate((function(e,t){a(t,e)}))},iterate:m,iterateBack:function(e,t,n){l(!1,e,t,n)},empty:function(){e={},t={},n={},o=null,i=null},toArray:function(){var e=[];return m((function(t){e.push(t)})),e},validate:function(a){var r,s,l;for(r in e)if(e.hasOwnProperty(r)&&(!t.hasOwnProperty(r)||!n.hasOwnProperty(r)))return null!=a&&(a.message="Orphant key found!"),!1;if(!e.hasOwnProperty(o)||!e.hasOwnProperty(i))return null!=a&&(a.message="Start or end values are missing!"),!1;for(r in t)if(t.hasOwnProperty(r)){if(!e.hasOwnProperty(r)||!n.hasOwnProperty(r))return null!=a&&(a.message="Orphant key found!"),!1;if((l=t[r])&&!t.hasOwnProperty(l))return null!=a&&(a.message="Next key not found!"),!1}for(r in n)if(n.hasOwnProperty(r)){if(!e.hasOwnProperty(r)||!t.hasOwnProperty(r))return null!=a&&(a.message="Orphant key found!"),!1;if((s=n[r])&&!n.hasOwnProperty(s))return null!=a&&(a.message="Prev key not found!"),!1}return!0}}},e.common.mergeSort=function(e,t,n){var o,i,a,r,s,l,m,c,h,u,d,g,p,f=null;switch(e.length){case 0:f=[];break;default:for(o=[],r=0;r<e.length;r+=1){for(i=e[r],a=[],m=o.length,c=i.length,s=0,l=0,h=null,d=null,u=null,g=null,m>0&&(h=o[s],d=t?t(h):h),c>0&&(u=i[l],g=t?t(u):u),p=null;s<m||l<c;)s>=m?(n&&p==u||(a.push(u),p=u),(l+=1)<c&&(u=i[l],g=t?t(u):u)):l>=c||d<g?(n&&p==h||(a.push(h),p=h),(s+=1)<m&&(h=o[s],d=t?t(h):h)):(n&&p==u||(a.push(u),p=u),(l+=1)<c&&(u=i[l],g=t?t(u):u));o=a}f=o}return f},e.common.pile=function(){var e=[];function t(e,t,n,o){this.context=n,this.from=e,this.to=t,this.offset=null,this.direction=o}function n(e,t,o,i,a){if(e>=t.length)return 0;if(o.hasOwnProperty(e))return o[e];for(var r=t[e],s=n(e+1,t,o,i,a),l=e+1;l<t.length&&!(t[l].from>=r.to);)l+=1;var m=1+n(l,t,o,i,a);return m>s?(o[e]=m,i[e]=l,a[e]=!0):(o[e]=s,i[e]=e+1,a[e]=!1),o[e]}return{add:function(n,o,i){n<o?e.push(new t(n,o,i,1)):e.push(new t(o,n,i,-1))},resolve:function(t,o){var i,a,r,s,l,m,c,h,u=0;if(null!=o){for((r=e.slice(0)).sort((function(e,t){return e.from-t.from})),m=[];r.length>0;){for(n(0,r,{},i={},a={}),l=[],m[u]=[],h=0;i.hasOwnProperty(h);)a[h]&&(l.push(h),m[u].push(r[h])),h=i[h];for(h=l.length-1;h>=0;h-=1)r.splice(l[h],1);u+=1}for(c=0;c<u;c+=1)for(l=m[c],h=0;h<l.length;h+=1)if(s=l[h],o.call(t,s.from,s.to,s.context,c,u,s.direction))return u}return u}}},e.common.QuadTree=function(t){var n,o=Math.max(1,(n=t,Math.floor(Math.log(n)/Math.log(2)))),i=8,a=256,r=null;function s(e,t,n,o){this.x=e,this.y=t,this.scale=n,this.size=o,this.quadrants=[],this.points=[]}function l(e){var t=e.size/2;e.quadrants=[new s(e.x,e.y,e.scale-1,t),new s(e.x+t,e.y,e.scale-1,t),new s(e.x,e.y+t,e.scale-1,t),new s(e.x+t,e.y+t,e.scale-1,t)];for(var n=0,o=e.points.length;n<o;n+=1){var i=e.points[n],a=Math.floor(i.x),r=Math.floor(i.y);e.quadrants[e.getQuadrantIndex(a,r)].points.push(i)}e.points=null}return r=new s(0,0,i,a),s.prototype.notEnclosed=function(e){return this.x<e.x||this.x+this.size>e.x+e.width||this.y<e.y||this.y+this.size>e.y+e.height},s.prototype.overlaps=function(e){return!(this.x+this.size<e.x||e.x+e.width<this.x||this.y+this.size<e.y||e.y+e.height<this.y)},s.prototype.getQuadrantIndex=function(e,t){var n=this.scale-1;return e>>n&1|(t>>n&1)<<1},{addPoint:function(e){for(var t=Math.floor(e.x),n=Math.floor(e.y),m=Math.max(t,n);a<=m;){var c=new s(0,0,i+=1,a*=2);l(c),c.quadrants[0]=r,r=c}!function(e){var t=Math.floor(e.x),n=Math.floor(e.y),i=r;if(t<0||n<0)throw"Negative values are not supported in the quad tree.";for(;(null==i.points||i.points.length>0)&&(i.scale!=o||null==i.points);)null!=i.points&&i.points.length>0&&l(i),i=i.quadrants[i.getQuadrantIndex(t,n)];i.points.push(e)}(e)},loopArea:function(e,t,n){var o,i,a;if(null!=n)for(var s=[r],l=[];s.length>0||l.length>0;){var m=[],c=[];for(i=0,a=s.length;i<a;i+=1)if((o=s[i]).overlaps(t))if(o.notEnclosed(t))if(null==o.points)for(var h=0;h<4;h+=1)m.push(o.quadrants[h]);else for(var u=0,d=o.points.length;u<d;u+=1){var g=o.points[u];if(t.contains(g)&&n.call(e,g))return}else l.push(o);for(i=0,a=l.length;i<a;i+=1)if(null==(o=l[i]).points)for(h=0;h<4;h+=1)c.push(o.quadrants[h]);else for(u=0,d=o.points.length;u<d;u+=1)if(n.call(e,o.points[u]))return;s=m,l=c}},validate:function(){for(var t=[r];t.length>0;){for(var n=[],o=0,i=t.length;o<i;o+=1){var a=t[o],s=new e.common.Rect(a.x,a.y,a.size,a.size);if(null!=a.points&&a.quadrants.length>0)return!1;if(null==a.points)for(var l=0;l<4;l+=1)n.push(a.quadrants[l]);else for(var m=0,c=a.points.length;m<c;m+=1){var h=a.points[m];if(!s.contains(h))return!1}}t=n}return!0},getPositions:function(t){for(var n=[],o=[r];o.length>0;){for(var i=[],a=0,s=o.length;a<s;a+=1){var l=o[a],m=new e.common.Rect(l.x,l.y,l.size,l.size);m.context={isHighlighted:!1},null!=t&&t.overlaps(m)&&null!=l.points&&l.points.length>0&&(m.context.isHighlighted=!0),n.push(m);for(var c=0;c<4;c+=1){var h=l.quadrants[c];null!=h&&i.push(h)}}o=i}return n}}},e.common.RMQ=function(e){var t=[],n=Math.log(2);function o(o,i){var a=Math.floor(Math.log(i-o+1)/n);return e[t[o][a]]<=e[t[i-(1<<a)+1][a]]?t[o][a]:t[i-(1<<a)+1][a]}return function(){for(var n,o=0,i=e.length;o<i;o+=1)t[o]=[o];for(n=1,i=e.length;1<<n<i;n+=1)for(o=0;o+(1<<n)-1<i;o+=1)e[t[o][n-1]]<e[t[o+(1<<n-1)][n-1]]?t[o][n]=t[o][n-1]:t[o][n]=t[o+(1<<n-1)][n-1]}(),{getRangeMinimumIndex:o,getRangeMinimum:function(t,n){return e[o(t,n)]}}},e.common.SortedList=function(){var e=null;function t(e,t){this.value=e,this.context=t,this.left=null,this.right=null,this.balance=0}function n(e){var t;if(2==e.balance){var n=e.right;(t=n.balance)>=0?function(e,t){o(e,t),1==e.balance?(t.balance=0,e.balance=0):(t.balance=-1,e.balance=1)}(n,e):function(e,t){var n=e.left;switch(i(n,e),o(e,t),t.balance=0,n.balance){case 1:e.balance=-1,n.balance=0;break;case 0:n.balance=0,e.balance=0;break;default:n.balance=1,e.balance=0}}(n,e)}else-2==e.balance&&((t=e.left.balance)<=0?function(e,t){i(e,t),-1==e.balance?(t.balance=0,e.balance=0):(t.balance=1,e.balance=-1)}(e.left,e):function(e,t){var n=e.right;switch(o(n,e),i(e,t),t.balance=0,n.balance){case-1:n.balance=0,e.balance=1;break;case 0:n.balance=0,e.balance=0;break;default:n.balance=-1,e.balance=0}}(e.left,e));return t}function o(e,t){r(e,t),t.right=e.right,e.right=e.left,e.left=t.left,t.left=e}function i(e,t){r(e,t),t.left=e.left,e.left=e.right,e.right=t.right,t.right=e}function a(t,n){var o=null!=t.right?t.right:t.left;null!=n?n.value>t.value?n.left=o:n.right=o:e=o}function r(e,t){var n=e.value;e.value=t.value,t.value=n;var o=e.context;e.context=t.context,t.context=o}function s(t,n,o){if(null!=o){for(var i=[],a=null,r=e;null!=r;)(a=r).value>=n||null==n?(i.push(a),r=a.left):r=a.right;for(;null!=(a=i.pop());){if(o.call(t,a.value,a.context))return;for(r=a.right;null!=r;)if(null!=(a=r).left)i.push(a),r=a.left;else{if(o.call(t,a.value,a.context))return;r=a.right}}}}function l(t,n,o){if(null!=o){for(var i=[],a=null,r=e;null!=r;)(a=r).value<=n||null==n?(i.push(a),r=a.right):r=a.left;for(;null!=(a=i.pop());){if(o.call(t,a.value,a.context))return;for(r=a.left;null!=r;)if(null!=(a=r).right)i.push(a),r=a.right;else{if(o.call(t,a.value,a.context))return;r=a.left}}}}function m(e){var t=[],n=0;if(null!=e)for(t.push(e);t.length>0;){for(var o=[],i=0;i<t.length;i+=1)null!=(e=t[i]).left&&o.push(e.left),null!=e.right&&o.push(e.right);t=o,n+=1}return n}return{add:function(o,i,a,r){if(null==e)e=new t(o,i);else{for(var s=[],l=null,m=e;null!=m;)if(null!=l&&s.push(l),(l=m).value==o){if(null==r)throw"Structure does not support duplicates.";r.call(a,l.context)}else m=l.value>o?l.left:l.right;s.push(l);var c=new t(o,i);for(l.value>o?l.left=c:l.right=c,l=c;null!=(m=s.pop());){if(l.value<m.value){if(m.balance<0){m.balance-=1,n(m);break}if(m.balance>0){m.balance-=1;break}m.balance-=1}else{if(m.balance>0){m.balance+=1,n(m);break}if(m.balance<0){m.balance+=1;break}m.balance+=1}l=m}}},remove:function(t){for(var o,i,r=[],s=e;null!=s;){if(s.value==t){if(null!=s.right&&null!=s.left){r.push(s);for(var l=s.right;null!=l.left;)r.push(l),l=l.left;o=l,(i=s).value=o.value,i.context=o.context,a(l,r[r.length-1]),r.push(l)}else a(s,r[r.length-1]),r.push(s);for(var m=r.length-2;m>=0;m-=1){var c=r[m];if(s=r[m+1],c.value>s.value)if(c.balance>0){if(c.balance+=1,0===n(c))break}else{if(0===c.balance){c.balance+=1;break}c.balance+=1}else if(c.balance<0){if(c.balance-=1,0===n(c))break}else{if(0===c.balance){c.balance-=1;break}c.balance-=1}}break}r.push(s),s=s.value>t?s.left:s.right}},loopForward:s,loopBackward:l,nextContext:function(e){var t=null;return s(this,e,(function(e,n){return t=n,!0})),t},previousContext:function(e){var t=null;return l(this,e,(function(e,n){return t=n,!0})),t},validate:function(){if(null!=e)for(var t=[e];t.length>0;){for(var n=[],o=0;o<t.length;o+=1){var i=t[o];if(null==i.value)return!1;if(null!=i.left&&(n.push(i.left),i.left.value>=i.value))return!1;if(null!=i.right&&(n.push(i.right),i.right.value<=i.value))return!1;if(i.balance!=m(i.right)-m(i.left))return console.log("Disbalanced node: "+i.value+" - "+JSON.stringify(e)),!1}t=n}return!0}}},e.common.SpatialIndex=function(t){var n=[];switch(t.sort((function(e,t){return e-t})),t.length){case 0:n.push(new m(0,1e6));break;case 1:var o=t[0];n.push(new m(0,o));break;case 2:o=t[0];var i=t[1];i>2*o?(n.push(new m(0,o)),n.push(new m(o,i))):n.push(new m(0,i));break;default:for(var a=e.common.getLiniarBreaks(t),r=0,s=0;s<a.length;s+=1){var l=t[a[s]];n.push(new m(r,l)),r=l}}function m(t,n){this.minimum=t,this.maximum=n,this.quadTree=e.common.QuadTree(2*n)}return{addRect:function(e){for(var t=Math.max(e.width,e.height),o=e.centerPoint(),i=0,a=n.length;i<a;i+=1){var r=n[i];if(t<=r.maximum||i==a-1){o.context=e,r.quadTree.addPoint(o);break}}},loopArea:function(t,o,i){if(null!=i)for(var a=0,r=n.length;a<r;a+=1){var s=n[a],l=new e.common.Rect(o);l.offset(s.maximum/2),s.quadTree.loopArea(this,l,(function(e){var n=e.context;if(o.overlaps(n))return i.call(t,n)}))}},validate:function(){for(var e=!0,t=0,o=n.length;t<o;t+=1){var i=n[t];e=e&&i.quadTree.validate()}return e},getPositions:function(e){for(var t=[],o=0,i=n.length;o<i;o+=1){var a=n[o];t=t.concat(a.quadTree.getPositions(e))}return t}}},e.common.tree=function(t){var n={},o={},i={},a={},r={};function s(e,t,o){var a,r,s,l;if(null!=n[t]&&null!=(a=i[t]))for(s=0,l=a.length;s<l&&(r=a[s],!o.call(e,r,n[r],s,l-1));s+=1);}function l(e){var t=null;return null!=o[e]&&(t=o[e]),t}function m(e,t){var n,o=e.length;for(n=0;n<o;n+=1)if(e[n]==t)return e.splice(n,1),o-1;return o}function c(e,t,o){if(null!=o&&n.hasOwnProperty(t)){var i=l(t);if(null!=i&&o.call(e,i,n[i]))return;s(e,i,(function(n,i){n==t||o.call(e,n,i)})),s(e,t,(function(t,n){o.call(e,t,n)}))}}return function(t){e.common.isObject(t)&&(n=e.common.cloneObject(t.nodes,!0),o=e.common.cloneObject(t.parents,!0),i=e.common.cloneObject(t.children,!1),a=e.common.cloneObject(t.roots,!1),r=e.common.cloneObject(t.rootChildren,!0))}(t),{loop:function(e,t){var o;if(null!=t)for(o in n)if(n.hasOwnProperty(o)&&t.call(e,o,n[o]))break},loopLevels:function(e,t,o){var a,s,l,m,c,h,u=0,d=[];switch(arguments.length){case 2:s=t;break;case 3:a=t,s=o}if(null!=s){if(null==a)for(m in r)r.hasOwnProperty(m)&&(d=d.concat(r[m]));else null!=i[a]&&(d=d.concat(i[a]));for(;d.length>0;){for(l=[],c=0,h=d.length;c<h;c+=1)switch(a=d[c],s.call(e,a,n[a],u)){case 1:l=[];break;case 2:break;default:null!=i[a]&&(l=l.concat(i[a]))}d=l,u+=1}}},loopParents:function(e,t,i,a){var r=t;if(null!=n[r]&&null!=i){if(!0===a&&i.call(e,r,n[r]))return;for(;null!=(r=o[r])&&!i.call(e,r,n[r]););}},loopChildren:s,loopChildrenRange:function(e,t,o,a,r){var s,l,m;if(null!=n[t]&&null!=(s=i[t]))if(o<a)for(o=Math.max(o,0),a=Math.min(a,s.length-1),m=o;m<=a&&(l=s[m],!r.call(e,l,n[l],m,NaN));m+=1);else for(o=Math.min(o,s.length-1),a=Math.max(0,a),m=o;m>=a&&(l=s[m],!r.call(e,l,n[l],m,NaN));m-=1);},loopChildrenReversed:function(e,t,o){var a,r,s,l;if(null!=n[t]&&(l=(a=i[t]).length-1,null!=a))for(s=l;s>=0&&(r=a[s],!o.call(e,r,n[r],s,l));s-=1);},loopPostOrder:function(e,t){var a,s,l,m,c,h=[];if(null!=t){for(s in r)r.hasOwnProperty(s)&&(h=h.concat(r[s]));for(;h.length>0;)if((a=h[h.length-1])!=m&&null!=(c=i[a]))for(l=c.length-1;l>=0;l-=1)h.push(c[l]);else if(h.pop(),m=o[a],t.call(e,a,n[a],m,n[m]))break}},loopPreOrder:function(e,t){var a,s,l,m,c,h,u=[];if(null!=t){for(s in r)r.hasOwnProperty(s)&&(u=u.concat(r[s]));for(;u.length>0&&((a=u[u.length-1])==c||(m=o[a],!t.call(e,a,n[a],m,n[m])));)if(a!=c&&null!=(h=i[a]))for(l=h.length-1;l>=0;l-=1)u.push(h[l]);else u.pop(),c=o[a]}},loopEulerWalk:function(e,t){var a,s,l,m,c,h,u=[],d=[],g=0;if(null!=t){for(s in r)if(r.hasOwnProperty(s))for(l=0,m=(h=r[s]).length;l<m;l+=1)u.push(h[l]),d.push(0);for(;u.length>0&&(a=u[l=u.length-1],g=d[l],!t.call(e,a,n[a],g));)if(a!=c&&null!=(h=i[a]))for(l=h.length-1;l>=0;l-=1)u.push(h[l]),d.push(g+1),l>0&&(u.push(a),d.push(g));else u.pop(),d.pop(),c=o[a]}},loopNeighbours:function(e,t,o,i){var a,r={},s=[t],l=0;if(null!=i&&n.hasOwnProperty(t))for(r[t]=!0;s.length>0;){a=[];for(var m=0,h=s.length;m<h;m+=1){var u=s[m];if(l>0&&i.call(e,u,n[u],l))return;l<o&&c(this,u,(function(e,t){r.hasOwnProperty(e)||(a.push(e),r[e]=!0)}))}s=a,l+=1}},zipUp:function(e,t,n,i){var a,r;if(null!=i)for(;null!=t&&null!=n&&t!=n&&(a=o[t],r=o[n],!i.call(e,t,a,n,r));)t=a,n=r},parentid:l,parent:function(e){var t=null;return null!=o[e]&&(t=n[o[e]]),t},adopt:function(e,t){if(null==n[e]||null==n[t])throw"Both parent and child should be in hierarchy!";if(e==t)throw"Item cannot be parent of itself!";a.hasOwnProperty(t)&&(m(r[a[t]],t)||delete r[a[t]],delete a[t]),o.hasOwnProperty(t)&&(m(i[o[t]],t)||delete i[o[t]]),o[t]=e,null!=i[e]?i[e].push(t):i[e]=[t]},moveChildren:function(e,t){null!=n[e]&&null!=n[t]&&e!=t&&null!=i[e]&&(s(this,e,(function(e,n,i){o[e]=t})),null!=i[t]?i[t]=i[t].concat(i[e]):i[t]=i[e],delete i[e])},node:function(e){return n[e]},add:function(e,t,s,l){var m,c,h,u;if(null!=n[t])throw"Node already exists";if(null!=t&&null!=s&&null==n[t]&&(null!=n[e]?(o[t]=e,null!=i[e]?null==l?i[e].push(t):i[e].splice(l,0,t):i[e]=[t]):(a[t]=e,null!=r[e]?null==l?r[e].push(t):r[e].splice(l,0,t):r[e]=[t]),n[t]=s,null!=r[t]))for(i[t]=r[t],delete r[t],m=0,c=(h=i[t]).length;m<c;m+=1)u=h[m],delete a[u],o[u]=t},insert:function(e,t,a){null!=n[e]&&null!=t&&null==n[t]&&null!=a&&(n[t]=a,null!=i[e]&&(i[t]=i[e]),i[e]=[t],s(this,t,(function(e,n,i){o[e]=t})),o[t]=e)},hasNodes:function(){return!e.common.isEmptyObject(r)},hasChildren:function(e){return null!=i[e]},countChildren:function(e){return null!=i[e]?i[e].length:0},countSiblings:function(e){var t=l(e);return null!=t?i[t].length:0},indexOf:function(t){var n=l(t);return null!=n?e.common.indexOf(i[n],t):null},getChild:function(e,t){var o,a=null;return null!=(o=i[e])&&(a=n[o[t]]),a},arrangeChildren:function(e,t){var a,r,s;if(t=t.slice(0),null!=n[e])if(null!=i[e]){if(i[e].length!=t.length)throw"Collections of children don't match each other!";for(r=0,s=t.length;r<s;r+=1)if(a=t[r],o[a]!=e)throw"Child "+a+" does not belong to given node!";i[e]=t}else if(t.length>0)throw"Collections of children don't match each other!"},validate:function(){var e,t=!0;for(e in a)if(a.hasOwnProperty(e)&&null!=a[e]){t=!1;break}return t},clone:function(){return e.common.tree({nodes:n,parents:o,children:i,roots:a,rootChildren:r})},BREAK:1,SKIP:2}},e.common.TreeLevels=function(t){var n=[],o={},i=null,a=null;function r(e){this.context=e,this.items=[]}function s(e,t,n){this.context=e,this.positions={},this.positions[n]=t,this.startLevel=n,this.endLevel=n}function l(e){return null==n[e]&&(n[e]=new r(null),i=null===i?e:Math.min(i,e),a=null===a?e:Math.max(a,e)),n[e]}return function(t){e.common.isObject(t)&&(n=e.common.cloneObject(t.levels,!0),o=e.common.cloneObject(t.items,!0),i=e.common.cloneObject(t.minimum,!0),a=e.common.cloneObject(t.maximum,!0))}(t),{addlevel:function(e,t){l(e).context=t},hasLevel:function(e){return null!=n[e]},hasItem:function(e){return o.hasOwnProperty(e)},addItem:function(e,t,n){var i,a;o.hasOwnProperty(t)?((i=l(e)).items.push(t),(a=o[t]).positions[e]=i.items.length-1,a.startLevel=Math.min(a.startLevel,e),a.endLevel=Math.max(a.endLevel,e)):((i=l(e)).items.push(t),o[t]=new s(n,i.items.length-1,e))},getItemContext:function(e){var t=null;return o.hasOwnProperty(e)&&(t=o[e].context),t},getLevelIndex:function(e){return o.hasOwnProperty(e)?o[e].startLevel:null},getEndLevelIndex:function(e){return o.hasOwnProperty(e)?o[e].endLevel:null},getItemPosition:function(e,t){var n=o[e];return null!=n?null!=t?n.positions[t]:n.positions[n.startLevel]:null},getItemAtPosition:function(e,t){var o=n[e],i=null;return null!=o&&(i=o.items[t]),i},loopLevels:function(e,t){var o,r;if(null!=t)for(o=i;o<=a&&(null==(r=n[o])||!t.call(e,o,r.context));o+=1);},loopLevelsReversed:function(e,t){var o,r;if(null!=t)for(o=a;o>=i&&(null==(r=n[o])||!t.call(e,o,r.context));o-=1);},loopLevelItems:function(e,t,i){var a,r,s,l;if(null!=i&&null!=(s=n[t]))for(a=0,r=s.items.length;a<r&&(l=s.items[a],!i.call(e,l,o[l].context,a));a+=1);},getLevelLength:function(e){var t=0,o=n[e];return null!=o&&(t=o.items.length),t},loopItems:function(e,t){var r,s,l,m,c,h,u={};if(null!=t)for(m=i;m<=a;m+=1)if(null!=(l=n[m]))for(r=0,s=(c=l.items).length;r<s;r+=1)if(h=c[r],!u.hasOwnProperty(h)&&(u[h]=!0,t.call(e,h,o[h].context,r,m,l.context)))return},binarySearch:function(t,i,a){var r,s=null;return null!=a&&null!=(r=n[i])&&(s=e.common.binarySearch(r.items,(function(e){return a.call(t,e,o[e].context)}))),s.item},loopMerged:function(t,i,a){var r,s,l,m,c,h=[];for(r=0,s=n.length;r<s;r+=1)null!=(l=n[r])&&h.push(l.items);if(c=e.common.mergeSort(h,i,!0),null!=a)for(r=0,s=c.length;r<s&&(m=c[r],!a.call(t,m,o[m].context));r+=1);},loopFromItem:function(e,t,i,a,r){var s,l,m,c,h,u,d;if(o.hasOwnProperty(t)&&(s=o[t],u=r||s.startLevel,c=n[u].items,d=s.positions[u],null!=a))if(i)for(l=d-1;l>=0&&(h=c[l],!a.call(e,h,o[h].context));l-=1);else for(l=d+1,m=c.length;l<m&&(h=c[l],!a.call(e,h,o[h].context));l+=1);},loopLevelsFromItem:function(e,t,r,s){var l,m,c;if(o.hasOwnProperty(t)&&(l=o[t],null!=s))if(r)for(m=l.endLevel+1;m<=a&&(c=n[m],!s.call(e,m,null!=c?c.context:null));m+=1);else for(m=l.startLevel-1;m>=i&&(c=n[m],!s.call(e,m,null!=c?c.context:null));m-=1);},getPrevItem:function(e,t){var i=null;if(o.hasOwnProperty(e)){var a=o[e];t=t||a.startLevel,i=n[t].items[a.positions[t]-1]}return i},getNextItem:function(e,t){var i=null;if(o.hasOwnProperty(e)){var a=o[e];t=t||a.startLevel,i=n[t].items[a.positions[t]+1]}return i},length:function(){return n.length},isEmpty:function(){return!n.length},clone:function(){return e.common.TreeLevels({levels:n,items:o,minimum:i,maximum:a})}}},e.common.DependencyManager=function(){var e={};return{register:function(t,n){return e[t]=n,n},resolve:function(){var t=[],n=arguments[0],o=arguments[1],i=arguments[2]||{};return function(){for(var a=Array.prototype.slice.call(arguments,0),r=0;r<n.length;r+=1){var s=n[r];t.push(e.hasOwnProperty(s)&&""!==s?e[s]:a.shift())}return t=t.concat(a),o.apply(i||{},t)}}}},e.common.KeyboardNavigationManager=function(){var t,n,o=[],i=null;function a(e,t){this.itemid=e,this.row=t}function r(){if(null==n){var i=0;t=e.common.SortedList(),e.common.getMinimumCrossingRows(this,o,(function(e){t.add(e,i),i+=1})),n=e.common.TreeLevels(),o.sort((function(e,t){return e.horizontalCenter()-t.horizontalCenter()}));for(var a=0,r=o.length;a<r;a+=1){var s=o[a];t.loopForward(this,s.y,(function(e,t){if(e>s.bottom())return!0;n.addItem(t,s.context,s)}))}}}function s(e){return r(),null!=i&&i.itemid==e||(i=new a(e,n.getLevelIndex(e))),i}function l(e){var t=n.getItemContext(i.itemid).horizontalCenter(),o=i.itemid;n.loopLevelsFromItem(this,i.itemid,e,(function(e){return i.row=e,i.itemid=n.binarySearch(this,e,(function(e,n){return t-n.horizontalCenter()})),!0})),o==i.itemid&&(i.row=e?n.getEndLevelIndex(i.itemid):n.getLevelIndex(i.itemid))}return{addRect:function(t,n){var i=new e.common.Rect(t);i.context=n,o.push(i)},prepair:r,getItemAbove:function(e){return i=s(e),l(!1),i.itemid},getItemBelow:function(e){return i=s(e),l(!0),i.itemid},getItemOnLeft:function(e){i=s(e);var t=n.getPrevItem(i.itemid,i.row);return null!=t&&(i.itemid=t),i.itemid},getItemOnRight:function(e){i=s(e);var t=n.getNextItem(i.itemid,i.row);return null!=t&&(i.itemid=t),i.itemid},getNavigationLevels:function(){r();var e=[];return n.loopLevels(this,(function(t,o){var i=[];n.loopLevelItems(this,t,(function(e,t,n){i.push(e)})),e.push(i)})),e}}},e.common.TaskManager=function(){var t=new e.common.family,n=new e.common.DependencyManager,o=[];function i(e,t,n,o){this.name=e,this.dependencies=t,this.factory=n,this.task=null,this.color=o}return{addTask:function(e,n,a,r){if(o.length>0)throw"Task Manager is already initialized";t.add(n,e,new i(e,n,a,r))},addDependency:function(e,t){if(o.length>0)throw"Task Manager is already initialized";n.register(e,t)},getTask:function(e){var n=t.node(e);return n&&n.task},process:function(e,i,a){var r=!1,s=a;0===o.length&&t.loopTopo(this,(function(e,t){t.task=n.register(e,n.resolve(t.dependencies,t.factory)()),o.push(t)})),a&&console.log("-- process --");for(var l={},m=0,c=o.length;m<c;m+=1){var h=o[m],u=[];if(h.name==e||l.hasOwnProperty(h.name)){if(s)var d=performance.now();if((r=h.task.process(a))&&t.loopChildren(this,h.name,(function(e,n){return l[e]=!0,a&&u.push(e),t.SKIP})),s)var g=performance.now();if(a){var p=Math.round(g-d,2);console.log(m+". "+h.name+", "+p+" ms. "+(r?" - forces: "+u.toString():""))}}if(h.name==i)return}},getProcessDiagramConfig:function(){var i=new e.famdiagram.Config;0===o.length&&t.loopTopo(this,(function(e,t){t.task=n.register(e,n.resolve(t.dependencies,t.factory)()),o.push(t)}));for(var a=0,r=o.length;a<r;a+=1){var s=o[a],l=new e.famdiagram.ItemConfig;l.id=s.name,l.title=e.common.splitCamelCaseName(s.name).join(" "),l.description=s.task.description||"",l.itemTitleColor=s.color,l.parents=[],t.loopParents(this,s.name,(function(e,n){return l.parents.push(e),t.SKIP})),i.items.push(l)}return i}}},e.pdf.graphics=function(t){this._doc=t,this._context=this._doc,this._dummyPlaceholder=new e.common.Placeholder},e.pdf.graphics.prototype.clean=function(){},e.pdf.graphics.prototype.resize=function(e,t,n){},e.pdf.graphics.prototype.begin=function(){},e.pdf.graphics.prototype.end=function(){},e.pdf.graphics.prototype.reset=function(e,t){},e.pdf.graphics.prototype.activate=function(e,t){return this._dummyPlaceholder},e.pdf.graphics.prototype.text=function(e,t,n,o,i,a,r,s,l){},e.pdf.graphics.prototype.polylinesBuffer=function(e){e.loop(this,(function(e){e.length()>0&&this.polyline(e)}))},e.pdf.graphics.prototype.polyline=function(e){this.m_activePlaceholder;var t,n,o=e.paletteItem.toAttr(),i=this._doc;if(i.save(),e.loop(this,(function(e){switch(e.segmentType){case 1:i.moveTo(Math.round(e.x)+.5,Math.round(e.y)+.5);break;case 0:i.lineTo(Math.round(e.x)+.5,Math.round(e.y)+.5);break;case 4:e.width==e.height&&e.width/2<=e.cornerRadius?i.roundedRect(Math.round(e.x)+.5,Math.round(e.y)+.5,e.width,e.height,Math.min(e.width,e.height)/2):0===e.cornerRadius?(i.moveTo(Math.round(e.x)+.5,Math.round(e.y)+.5),i.lineTo(Math.round(e.x+e.width)+.5,Math.round(e.y)+.5),i.lineTo(Math.round(e.x+e.width)+.5,Math.round(e.y+e.height)+.5),i.lineTo(Math.round(e.x)+.5,Math.round(e.y+e.height)+.5),i.lineTo(Math.round(e.x)+.5,Math.round(e.y)+.5)):(n=Math.min(e.cornerRadius,Math.min(e.width/2,e.height/2)),i.roundedRect(Math.round(e.x)+.5,Math.round(e.y)+.5,e.width,e.height,n));break;case 2:i.quadraticCurveTo(Math.round(e.cpX)+.5,Math.round(e.cpY)+.5,Math.round(e.x)+.5,Math.round(e.y)+.5);break;case 3:i.bezierCurveTo(Math.round(e.cpX1)+.5,Math.round(e.cpY1)+.5,Math.round(e.cpX2)+.5,Math.round(e.cpY2)+.5,Math.round(e.x)+.5,Math.round(e.y)+.5)}})),i.lineJoin("round"),null!=o.lineType)switch(t=Math.round(o.lineWidth)||1,o.lineType){case 0:break;case 1:i.dash(t,2*t);break;case 2:i.dash(5*t,3*t)}void 0!==o.lineWidth&&void 0!==o.fillColor?i.lineWidth(o.lineWidth).fillOpacity(o.opacity).fillAndStroke(o.fillColor,o.borderColor):void 0!==o.lineWidth?i.lineWidth(o.lineWidth).stroke(o.borderColor):void 0!==o.fillColor&&i.fillOpacity(o.opacity).fillColor(o.fillColor),i.restore()},e.pdf.graphics.prototype.rightAngleLine=function(e,t,n,o,i){},e.pdf.graphics.prototype.template=function(t,n,o,i,a,r,s,l,m,c,h,u,d){var g=0;null!==d&&void 0!==d.borderWidth&&(g=this.getPxSize(d.borderWidth));var p=new e.common.Rect(t+a,n+r,s-g,l-g);null==u&&(u=new e.common.RenderEventArgs),null!==h&&h(this._doc,p,u)},e.pdf.graphics.prototype.getPxSize=function(e,t){var n=e;return"string"==typeof e&&(n=e.indexOf("pt")>0?96*parseInt(e,10)/72:e.indexOf("%")>0?parseFloat(e)/100*t:parseInt(e,10)),n},e.pdf.famdiagram.Plugin=function(t){var n={name:"famdiagram",doc:null,options:t,tasks:null,graphics:null};function o(){return n.options}function i(){return n.graphics}function a(){var t=new e.common.TaskManager;return t.addDependency("options",o),t.addDependency("graphics",i),t.addDependency("defaultConfig",new e.famdiagram.Config),t.addDependency("defaultItemConfig",new e.famdiagram.ItemConfig),t.addDependency("defaultTemplateConfig",new e.famdiagram.TemplateConfig),t.addDependency("defaultButtonConfig",new e.famdiagram.ButtonConfig),t.addDependency("defaultPaletteItemConfig",new e.famdiagram.PaletteItemConfig),t.addDependency("defaultBackgroundAnnotationConfig",new e.famdiagram.BackgroundAnnotationConfig),t.addDependency("defaultConnectorAnnotationConfig",new e.famdiagram.ConnectorAnnotationConfig),t.addDependency("defaultHighlightPathAnnotationConfig",new e.famdiagram.HighlightPathAnnotationConfig),t.addDependency("defaultShapeAnnotationConfig",new e.famdiagram.ShapeAnnotationConfig),t.addDependency("defaultLabelAnnotationConfig",new e.famdiagram.LabelAnnotationConfig),t.addDependency("isFamilyChartMode",!0),t.addDependency("showElbowDots",!0),t.addDependency("null",null),t.addDependency("foreground",2),t.addDependency("background",1),t.addTask("OptionsTask",["options"],e.famdiagram.OptionsTask,"#000000"),t.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.orgdiagram.CalloutOptionTask,"#000080"),t.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ConnectorsOptionTask,"#000080"),t.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],e.famdiagram.ItemsOptionTask,"#000080"),t.addTask("RemoveLoopsOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.RemoveLoopsOptionTask,"#000080"),t.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],e.famdiagram.SpousesOptionTask,"#000080"),t.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],e.orgdiagram.ItemsSizesOptionTask,"#000080"),t.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],e.orgdiagram.TemplatesOptionTask,"#000080"),t.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.OrientationOptionTask,"#000080"),t.addTask("VisualTreeOptionTask",["OptionsTask"],e.famdiagram.VisualTreeOptionTask,"#000080"),t.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.HideGrandParentsConnectorsOptionTask,"#000080"),t.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],e.famdiagram.NormalizeOptionTask,"#000080"),t.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.famdiagram.OrderFamilyNodesOptionTask,"#000080"),t.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],e.famdiagram.LinePaletteOptionTask,"#000080"),t.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.CursorItemOptionTask,"#000080"),t.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.HighlightItemOptionTask,"#000080"),t.addTask("SelectedItemsOptionTask",["OptionsTask"],e.orgdiagram.SelectedItemsOptionTask,"#000080"),t.addTask("SplitAnnotationsOptionTask",["OptionsTask"],e.orgdiagram.SplitAnnotationsOptionTask,"#00ffff"),t.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),t.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),t.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),t.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),t.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),t.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),t.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],e.orgdiagram.BackgroundAnnotationOptionTask,"#000080"),t.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ScaleOptionTask,"#000080"),t.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],e.famdiagram.UserDefinedNodesOrderTask,"#ff0000"),t.addTask("LogicalFamilyTask",["ItemsOptionTask"],e.famdiagram.LogicalFamilyTask,"#00ffff"),t.addTask("RemoveLoopsTask",["ItemsOptionTask","RemoveLoopsOptionTask","LogicalFamilyTask"],e.famdiagram.RemoveLoopsTask,"#ff0000"),t.addTask("LabelAnnotationOptionTask",["SplitAnnotationsOptionTask","RemoveLoopsTask","defaultLabelAnnotationConfig"],e.famdiagram.LabelAnnotationOptionTask,"#000080"),t.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],e.famdiagram.LabelAnnotationTemplateOptionTask,"#000080"),t.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],e.famdiagram.LabelAnnotationPlacementOptionTask,"#000080"),t.addTask("CombinedContextsTask",["ItemsOptionTask","LabelAnnotationOptionTask"],e.orgdiagram.CombinedContextsTask,"#00ffff"),t.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","RemoveLoopsTask"],e.famdiagram.AddLabelAnnotationsTask,"#ff0000"),t.addTask("AddSpousesTask",["SpousesOptionTask","AddLabelAnnotationsTask"],e.famdiagram.AddSpousesTask,"#ff0000"),t.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],e.famdiagram.HideGrandParentsConnectorsTask,"#ff0000"),t.addTask("NormalizeLogicalFamilyTask",["NormalizeOptionTask","HideGrandParentsConnectorsTask"],e.famdiagram.NormalizeLogicalFamilyTask,"#ff0000"),t.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask"],e.famdiagram.OrderFamilyNodesTask,"#ff0000"),t.addTask("ReadTemplatesTask",["TemplatesOptionTask"],e.pdf.orgdiagram.ReadTemplatesTask,"#00ffff"),t.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],e.orgdiagram.ItemTemplateParamsTask,"#00ffff"),t.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],e.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff"),t.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],e.famdiagram.CombinedTemplateParamsTask,"#00ffff"),t.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],e.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff"),t.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask"],e.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff"),t.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],e.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff"),t.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],e.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff"),t.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","OrderFamilyNodesTask","AlignDiagramTask","RemoveLoopsTask"],e.orgdiagram.ConnectionsGraphTask,"#00ffff"),t.addTask("HighlightItemTask",["HighlightItemOptionTask","null"],e.orgdiagram.HighlightItemTask,"#00ffff"),t.addTask("CursorItemTask",["CursorItemOptionTask","null"],e.orgdiagram.CursorItemTask,"#00ffff"),t.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],e.orgdiagram.SelectedItemsTask,"#00ffff"),t.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],e.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff"),t.addTask("CurrentControlSizeTask",["OptionsTask"],e.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff"),t.addTask("ItemsPositionsTask",["CurrentControlSizeTask","ScaleOptionTask","OrientationOptionTask","ItemsSizesOptionTask","ConnectorsOptionTask","OrderFamilyNodesOptionTask","OrderFamilyNodesTask","CombinedTemplateParamsTask","CursorItemTask","CombinedNormalVisibilityItemsTask"],e.famdiagram.ItemsPositionsTask,"#ff0000"),t.addTask("AlignDiagramTask",["OrientationOptionTask","ItemsSizesOptionTask","VisualTreeOptionTask","ScaleOptionTask","CurrentControlSizeTask","null","ItemsPositionsTask","isFamilyChartMode"],e.orgdiagram.AlignDiagramTask,"#ff0000"),t.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],e.orgdiagram.CreateTransformTask,"#00ffff"),t.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],e.orgdiagram.PaletteManagerTask,"#00ffff"),t.addTask("DrawBackgroundAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","BackgroundAnnotationOptionTask","LogicalFamilyTask","AlignDiagramTask"],e.orgdiagram.DrawBackgroundAnnotationTask,"#008000"),t.addTask("DrawBackgroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background","DrawBackgroundAnnotationTask"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),t.addTask("DrawBackgroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background","DrawBackgroundShapeAnnotationTask"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),t.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground","DrawBackgroundConnectorAnnotationTask"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),t.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask","DrawBackgroundHighlightPathAnnotationTask"],e.orgdiagram.DrawConnectorsTask,"#008000"),t.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background","DrawConnectorsTask"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),t.addTask("DrawTreeItemsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","null","ItemsSizesOptionTask","CombinedContextsTask","AlignDiagramTask","null","CombinedTemplateParamsTask","CursorItemTask","SelectedItemsTask","GroupTitleTemplateTask","CheckBoxTemplateTask","ButtonsTemplateTask","DrawForegroundHighlightPathAnnotationTask"],e.orgdiagram.DrawTreeItemsTask,"#008000"),t.addTask("DrawCursorTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","CombinedTemplateParamsTask","CursorItemTask","SelectedItemsTask","DrawTreeItemsTask"],e.orgdiagram.DrawCursorTask,"#008000"),t.addTask("DrawHighlightTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","CombinedTemplateParamsTask","HighlightItemTask","CursorItemTask","SelectedItemsTask","DrawCursorTask"],e.orgdiagram.DrawHighlightTask,"#008000"),t.addTask("DrawForegroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground","DrawHighlightTask"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),t.addTask("DrawForegroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground","DrawForegroundShapeAnnotationTask"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),t}function r(){n.options.hasButtons=2,n.options.pageFitMode=5,n.options.autoSizeMaximum=new e.common.Size(1e5,1e5)}return{draw:function(t,o,i){n.doc=t,n.tasks=a(),n.graphics=new e.pdf.graphics(n.doc),n.graphics.debug=!1,r(),n.doc.save(),n.doc.translate(o,i),n.tasks.process("OptionsTask",null,!1),n.doc.restore();var s=n.tasks.getTask("AlignDiagramTask");return new e.common.Size(s.getContentSize())},getSize:function(){n.tasks=a(),r(),n.tasks.process("OptionsTask","AlignDiagramTask",!1);var t=n.tasks.getTask("AlignDiagramTask");return new e.common.Size(t.getContentSize())}}},e.pdf.Template=function(t,n){this.templateConfig=null,this.itemTemplate=null,this.highlightTemplate=null,this.dotHighlightTemplate=null,this.cursorTemplate=null,null!=n&&(this.templateConfig=n,this.itemTemplate=e.common.isNullOrEmpty(n.itemTemplate)?new e.pdf.ItemTemplate(t,n):new e.pdf.UserTemplate(t,n,t.onItemRender),this.highlightTemplate=e.common.isNullOrEmpty(n.highlightTemplate)?new e.pdf.HighlightTemplate(t,n):new e.pdf.UserTemplate(t,n,t.onHighlightRender),this.dotHighlightTemplate=new e.pdf.DummyTemplate(t,n),this.cursorTemplate=e.common.isNullOrEmpty(n.cursorTemplate)?new e.pdf.CursorTemplate(t,n):new e.pdf.UserTemplate(t,n,t.onCursorRender))},e.pdf.orgdiagram.DummyCurrentControlSizeTask=function(t){return{process:function(){return!0},getScrollPanelSize:function(){return new e.common.Size(800,600)},getOptimalPanelSize:function(){return new e.common.Size(775,575)}}},e.pdf.orgdiagram.AnnotationLabelTemplateTask=function(t){var n={template:null};return{process:function(){return!1},getTemplate:function(){return null==n.template&&(n.template=new e.pdf.AnnotationLabelTemplate),n.template}}},e.pdf.orgdiagram.ButtonsTemplateTask=function(t){var n={template:null};return{process:function(){return!1},getTemplate:function(){return null==n.template&&(n.template=new e.pdf.DummyTemplate),n.template}}},e.pdf.orgdiagram.CheckBoxTemplateTask=function(t){var n={template:null};return{process:function(){return n.template=null,!0},getTemplate:function(){var o;return null==n.template&&(o=t.getOptions(),n.template=new e.pdf.CheckBoxTemplate(o.selectCheckBoxLabel)),n.template}}},e.pdf.orgdiagram.GroupTitleTemplateTask=function(t){var n={template:null};return{process:function(){return n.template=null,!0},getTemplate:function(){var o;return null==n.template&&(o=t.getOptions(),n.template=new e.pdf.GroupTitleTemplate(o.itemTitleFirstFontColor,o.itemTitleSecondFontColor)),n.template}}},e.pdf.orgdiagram.ReadTemplatesTask=function(t){var n={templates:{}};return{process:function(){var o,i,a,r=t.getOptions(),s=r.templates;n.templates={},n.templates.DefaultWidgetTemplate=new e.pdf.Template(r,new e.orgdiagram.TemplateConfig);var l=new e.orgdiagram.TemplateConfig;l.name="DefaultWidgetLabelAnnotationTemplate",l.isActive=!1,l.itemSize=new e.common.Size(100,20),l.minimizedItemSize=new e.common.Size(0,0);var m=new e.pdf.Template;for(m.templateConfig=l,m.minimizedItemCornerRadius=l.minimizedItemSize.width/2,m.itemTemplate=new e.pdf.LabelAnnotationTemplate,m.dotHighlightTemplate=new e.pdf.DummyTemplate,n.templates.DefaultWidgetLabelAnnotationTemplate=m,o=0,i=s.length;o<i;o+=1)a=s[o],n.templates[a.name]=new e.pdf.Template(r,a);return!0},getTemplate:function(e,t,o){return n.templates[e]||n.templates[t]||n.templates[o]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}},e.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask=function(e){return{process:function(){return!0},isItemSelected:function(e){return!1}}},e.pdf.orgdiagram.Plugin=function(t){var n={name:"orgdiagram",doc:null,options:t,tasks:null,graphics:null};function o(){return n.options}function i(){return n.graphics}function a(){var t=new e.common.TaskManager;return t.addDependency("options",o),t.addDependency("graphics",i),t.addDependency("defaultConfig",new e.orgdiagram.Config),t.addDependency("defaultItemConfig",new e.orgdiagram.ItemConfig),t.addDependency("defaultTemplateConfig",new e.orgdiagram.TemplateConfig),t.addDependency("defaultButtonConfig",new e.orgdiagram.ButtonConfig),t.addDependency("defaultBackgroundAnnotationConfig",new e.orgdiagram.BackgroundAnnotationConfig),t.addDependency("defaultConnectorAnnotationConfig",new e.orgdiagram.ConnectorAnnotationConfig),t.addDependency("defaultHighlightPathAnnotationConfig",new e.orgdiagram.HighlightPathAnnotationConfig),t.addDependency("defaultShapeAnnotationConfig",new e.orgdiagram.ShapeAnnotationConfig),t.addDependency("isFamilyChartMode",!1),t.addDependency("showElbowDots",!1),t.addDependency("null",null),t.addDependency("foreground",2),t.addDependency("background",1),t.addTask("OptionsTask",["options"],e.orgdiagram.OptionsTask,"#000000"),t.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],e.orgdiagram.CalloutOptionTask,"#000080"),t.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ConnectorsOptionTask,"#000080"),t.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],e.orgdiagram.ItemsOptionTask,"#000080"),t.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],e.orgdiagram.ItemsSizesOptionTask,"#000080"),t.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],e.orgdiagram.TemplatesOptionTask,"#000080"),t.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.OrientationOptionTask,"#000080"),t.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.VisualTreeOptionTask,"#000080"),t.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.CursorItemOptionTask,"#000080"),t.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.HighlightItemOptionTask,"#000080"),t.addTask("SelectedItemsOptionTask",["OptionsTask"],e.orgdiagram.SelectedItemsOptionTask,"#000080"),t.addTask("SplitAnnotationsOptionTask",["OptionsTask"],e.orgdiagram.SplitAnnotationsOptionTask,"#00ffff"),t.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),t.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],e.orgdiagram.ShapeAnnotationOptionTask,"#000080"),t.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),t.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],e.orgdiagram.HighlightPathAnnotationOptionTask,"#000080"),t.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),t.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],e.orgdiagram.ConnectorAnnotationOptionTask,"#000080"),t.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],e.orgdiagram.BackgroundAnnotationOptionTask,"#000080"),t.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],e.orgdiagram.ScaleOptionTask,"#000080"),t.addTask("CombinedContextsTask",["ItemsOptionTask"],e.orgdiagram.CombinedContextsTask,"#00ffff"),t.addTask("OrgTreeTask",["ItemsOptionTask"],e.orgdiagram.OrgTreeTask,"#ff0000"),t.addTask("ReadTemplatesTask",["TemplatesOptionTask"],e.pdf.orgdiagram.ReadTemplatesTask,"#00ffff"),t.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],e.orgdiagram.ItemTemplateParamsTask,"#00ffff"),t.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],e.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff"),t.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask"],e.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff"),t.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],e.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff"),t.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],e.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff"),t.addTask("VisualTreeTask",["OrgTreeTask","null","VisualTreeOptionTask","isFamilyChartMode"],e.orgdiagram.VisualTreeTask,"#ff0000"),t.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],e.orgdiagram.VisualTreeLevelsTask,"#ff0000"),t.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],e.orgdiagram.ConnectionsGraphTask,"#00ffff"),t.addTask("HighlightItemTask",["HighlightItemOptionTask","null"],e.orgdiagram.HighlightItemTask,"#00ffff"),t.addTask("CursorItemTask",["CursorItemOptionTask","null"],e.orgdiagram.CursorItemTask,"#00ffff"),t.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],e.orgdiagram.SelectedItemsTask,"#00ffff"),t.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],e.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff"),t.addTask("CurrentControlSizeTask",["OptionsTask"],e.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff"),t.addTask("ItemsPositionsTask",["CurrentControlSizeTask","ScaleOptionTask","OrientationOptionTask","ItemsSizesOptionTask","ConnectorsOptionTask","VisualTreeOptionTask","VisualTreeTask","VisualTreeLevelsTask","ItemTemplateParamsTask","CursorItemTask","CombinedNormalVisibilityItemsTask"],e.orgdiagram.ItemsPositionsTask,"#ff0000"),t.addTask("AlignDiagramTask",["OrientationOptionTask","ItemsSizesOptionTask","VisualTreeOptionTask","ScaleOptionTask","CurrentControlSizeTask","null","ItemsPositionsTask","isFamilyChartMode"],e.orgdiagram.AlignDiagramTask,"#ff0000"),t.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],e.orgdiagram.CreateTransformTask,"#00ffff"),t.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],e.orgdiagram.PaletteManagerTask,"#00ffff"),t.addTask("DrawBackgroundAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","BackgroundAnnotationOptionTask","VisualTreeTask","AlignDiagramTask"],e.orgdiagram.DrawBackgroundAnnotationTask,"#008000"),t.addTask("DrawBackgroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background","DrawBackgroundAnnotationTask"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),t.addTask("DrawBackgroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","BackgroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","background","DrawBackgroundShapeAnnotationTask"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),t.addTask("DrawTreeItemsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","null","ItemsSizesOptionTask","CombinedContextsTask","AlignDiagramTask","null","ItemTemplateParamsTask","CursorItemTask","SelectedItemsTask","GroupTitleTemplateTask","CheckBoxTemplateTask","ButtonsTemplateTask","DrawBackgroundConnectorAnnotationTask"],e.orgdiagram.DrawTreeItemsTask,"#008000"),t.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground","DrawTreeItemsTask"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),t.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask","DrawBackgroundHighlightPathAnnotationTask"],e.orgdiagram.DrawConnectorsTask,"#008000"),t.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background","DrawConnectorsTask"],e.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff"),t.addTask("DrawForegroundShapeAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundShapeAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground","DrawForegroundHighlightPathAnnotationTask"],e.orgdiagram.DrawShapeAnnotationTask,"#008000"),t.addTask("DrawForegroundConnectorAnnotationTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","OrientationOptionTask","ForegroundConnectorAnnotationOptionTask","AlignDiagramTask","AnnotationLabelTemplateTask","foreground","DrawForegroundShapeAnnotationTask"],e.orgdiagram.DrawConnectorAnnotationTask,"#008000"),t.addTask("DrawCursorTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","ItemTemplateParamsTask","CursorItemTask","SelectedItemsTask","DrawForegroundConnectorAnnotationTask"],e.orgdiagram.DrawCursorTask,"#008000"),t.addTask("DrawHighlightTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","CombinedContextsTask","AlignDiagramTask","ItemTemplateParamsTask","HighlightItemTask","CursorItemTask","SelectedItemsTask","DrawCursorTask"],e.orgdiagram.DrawHighlightTask,"#008000"),t}function r(){n.options.hasButtons=2,n.options.pageFitMode=5,n.options.autoSizeMaximum=new e.common.Size(1e5,1e5)}return{draw:function(t,o,i){n.doc=t,n.tasks=a(),n.graphics=new e.pdf.graphics(n.doc),n.graphics.debug=!1,r(),n.doc.save(),n.doc.translate(o,i),n.tasks.process("OptionsTask",null,!1),n.doc.restore();var s=n.tasks.getTask("AlignDiagramTask");return new e.common.Size(s.getContentSize())},getSize:function(){n.tasks=a(),r(),n.tasks.process("OptionsTask","AlignDiagramTask",!1);var t=n.tasks.getTask("AlignDiagramTask");return new e.common.Size(t.getContentSize())}}},e.pdf.AnnotationLabelTemplate=function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(e,t,n){var o=n.context;e.save(),e.font("Helvetica",12).text(o.label,t.x,t.y,{width:t.width,height:t.height,align:"center"}),e.restore()}}},e.pdf.CheckBoxTemplate=function(e){return{template:function(){return{}},getHashCode:function(){return 0},render:function(t,n,o){var i=o.isSelected?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAF/SURBVDhPpZM7rwFREMf/u4hEY5vVkigoSERiKwq1QqOh28R30QnFRqnSKHwFn0C37Sbi0SCE2KzE41wzd/feG48g91ftmdn5zznzkLLZrNhutzidTvgEv98PRVEgxeNx0e12EYvFcDweXfdjZFmGEIKDx+MxdF0HotGomEwmV/tnUAzFyqT8KrNHLpdDJpPBZrPh81UHLPAO7XYb6/Ua8/kcpmnC5/NBkqT3BJbLJRqNBgKBACqVCgqFAg6HA/veEiiVSlBVFZfLBZ1Ox7V+81KAMtPVV6sV+v2+a/2FBeg9RDqdhqZp/E1Mp1O0Wi32V6tVLuAtLEBvGw6HmM1m2O/3yOfz7CyXy4hEItz3ZrPJtr/8dIEKUiwWYRgGX3e32yGZTOJ8PnMBB4MBB9xy14VarcaZFosFQqEQHMdBvV5HIpFw/3gATZNlWTxdHr1eT4TDYZFKpVzLPRRDsU9HeTQaCdu23dM91wKzwNNlCgaDXINHW0pF95bpn+us4AsY2TIOZFyZ9AAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACjSURBVDhPrZNNCsQgDEY/f2q33sCCN+iNPJlXE2/gTtDiVBln1TJo+zZBJS+YELLvewkhIOeMETjnkFKCaK2LtRbbtiGl9H2+hlKKUkpLds7BGAMopYr3/rwfo+bUXFrN/yrfcXrQBDMwxkAImRfEGFucFnTeEdT/zNIEy7K0wyi/KfSGjPJoCp13BDM9EEK0eLtM67riOI7LLa0F+zI9XGeJDyTldfBA9FNyAAAAAElFTkSuQmCC";t.save(),t.image(i,n.x,n.y),t.font("Helvetica",11).text(e,n.x+20,n.y+4,{ellipsis:!0,width:n.width-4,height:n.height,align:"left"}),t.restore()}}},e.pdf.CursorTemplate=function(e,t){var n=t;return{template:function(){return{}},getHashCode:function(){return 0},render:function(e,t,o){e.save(),e.roundedRect(t.x,t.y,t.width,t.height,4).lineWidth(n.cursorBorderWidth).stroke("#fbd850"),e.restore()}}},e.pdf.DummyTemplate=function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(){}}},e.pdf.GroupTitleTemplate=function(t,n){return{template:function(){return{}},getHashCode:function(){return 0},render:function(o,i,a){var r=a.context,s=r.groupTitleColor||"#4169e1",l=e.common.highestContrast(s,n,t);o.save(),o.translate(i.width,0).rotate(90,{origin:[i.x,i.y]}),o.fillColor(s).roundedRect(i.x,i.y,i.height-2,i.width,4).fill(),o.fillColor(l).font("Helvetica",12).text(r.groupTitle,i.x+4,i.y+6,{ellipsis:!0,width:i.height-4,height:i.width-4,align:"center"}),o.restore()}}},e.pdf.HighlightTemplate=function(e,t){var n=t;return{template:function(){return{}},getHashCode:function(){return 0},render:function(e,t,o){e.save(),e.roundedRect(t.x,t.y,t.width,t.height,4).lineWidth(n.highlightBorderWidth).stroke("#fbcb09"),e.restore()}}},e.pdf.ItemTemplate=function(t,n){var o=n;return{template:function(){return{}},getHashCode:function(){return 0},render:function(n,i,a){var r=a.context,s=null!=r.itemTitleColor?r.itemTitleColor:"#4169e1",l=e.common.highestContrast(s,t.itemTitleSecondFontColor,t.itemTitleFirstFontColor),m=new e.common.Size(o.itemSize);m.width-=2*o.itemBorderWidth,m.height-=2*o.itemBorderWidth,n.save(),n.roundedRect(i.x,i.y,i.width,i.height,4).lineWidth(o.itemBorderWidth).stroke("#dddddd"),n.fillColor(s).roundedRect(i.x+2,i.y+2,m.width-4,18,2).fill(),n.fillColor(l).font("Helvetica",12).text(r.title,i.x+4,i.y+7,{ellipsis:!0,width:m.width-4-8,height:16,align:"left"}),null!=r.image&&n.image(r.image,i.x+3,i.y+24),n.rect(i.x+3,i.y+24,50,60).stroke("#cccccc"),n.fillColor("black").font("Helvetica",10).text(r.description,i.x+56,i.y+24,{ellipsis:!0,width:m.width-4-56,height:74,align:"left"}),n.restore()}}},e.pdf.LabelAnnotationTemplate=function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(e,t,n){var o=n.context;e.save(),e.font("Helvetica",12).text(o.title,t.x,t.y,{width:t.width,height:t.height,align:"center"}),e.restore()}}},e.pdf.UserTemplate=function(t,n,o){return{template:function(){return{}},getHashCode:function(){return 0},render:function(i,a,r){null!=o?o(i,a,r):e.pdf.ItemTemplate(t,n).render(i,a,r)}}},e);var e}.apply(t,[]))||(e.exports=o)}}]);
//# sourceMappingURL=8e13e05a-67817c1beb413ae415b7.js.map